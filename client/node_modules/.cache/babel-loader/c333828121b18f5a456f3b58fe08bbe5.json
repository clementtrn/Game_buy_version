{"ast":null,"code":"import _slicedToArray from\"C:/Users/hugod/decitude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"../styles/AdminInterface.css\";import\"../styles/App.css\";import React,{useState,useEffect,useRef}from'react';import PlayAPI from\"../API/PlayAPI\";import{useHistory}from'react-router-dom';import{TextField,Button,Divider,Typography}from\"@material-ui/core\";import io from'socket.io-client';import cookie from'react-cookies';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminInterface=function AdminInterface(){var history=useHistory();var user=cookie.load(\"user\");var handleDisconnect=function handleDisconnect(){cookie.save('user',\"disconnected\",{path:'/',maxAge:60*60*1.5//sec\n});history.push('/login');};if(user===null||user===undefined||user==\"disconnected\")history.push(\"/login\");if(user!==null&&user!==undefined&&user.role!==undefined&&!user.role.includes(\"ADMIN\"))handleDisconnect();var _useState=useState(user!==null&&user!==undefined?user.session:null),_useState2=_slicedToArray(_useState,2),session=_useState2[0],setSession=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),configuration=_useState4[0],setConfiguration=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),lancement=_useState6[0],setLancement=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),socket=_useState8[0],setSocket=_useState8[1];useEffect(function(){if(socket==null&&configuration!==null){var s=io.connect(\"https://www.back.leaders-extreme.fr\");setSocket(s);s.on('startStopPartie',function(data){setLancement(!data.start);console.log(!data.start);});}},[socket,configuration]);var handleClicLancement=function handleClicLancement(){PlayAPI.startStopPartie(socket,lancement);};return/*#__PURE__*/_jsxs(\"div\",{className:\"body-admin\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h1\",color:\"primary\",children:\"Espace administrateur\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-buttons-container\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:\"admin-button\",color:lancement?\"default\":\"primary\",onClick:handleClicLancement// disabled={lancement}\n,children:lancement?\"Lancer la partie\":\"Arrêter la partie\"})})]});};export default AdminInterface;","map":{"version":3,"sources":["C:/Users/hugod/decitude/client/src/routes/AdminInterface.js"],"names":["React","useState","useEffect","useRef","PlayAPI","useHistory","TextField","Button","Divider","Typography","io","cookie","AdminInterface","history","user","load","handleDisconnect","save","path","maxAge","push","undefined","role","includes","session","setSession","configuration","setConfiguration","lancement","setLancement","socket","setSocket","s","connect","on","data","start","console","log","handleClicLancement","startStopPartie"],"mappings":"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","sourcesContent":["import \"../styles/AdminInterface.css\"\r\nimport \"../styles/App.css\"\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport PlayAPI from \"../API/PlayAPI\"\r\nimport { useHistory } from 'react-router-dom';\r\nimport { TextField, Button, Divider, Typography } from \"@material-ui/core\"\r\nimport io from 'socket.io-client'\r\nimport cookie from 'react-cookies'\r\n\r\nconst AdminInterface = () => {\r\n\r\n  const history = useHistory()\r\n\r\n\r\n  const user = cookie.load(\"user\")\r\n  \r\n  const handleDisconnect = () => {\r\n    cookie.save('user', \"disconnected\", {\r\n      path: '/',\r\n      maxAge: 60 * 60 * 1.5, //sec\r\n    })\r\n    history.push('/login');\r\n  }\r\n\r\n\r\n  if (user === null || user === undefined || user==\"disconnected\") history.push(\"/login\");\r\n  if(user !== null && user !== undefined && user.role!==undefined && !user.role.includes(\"ADMIN\")) handleDisconnect()\r\n\r\n  const [session, setSession] = useState(user !== null && user !== undefined ? user.session : null)\r\n \r\n  const [configuration, setConfiguration] = useState(null)\r\n\r\n\r\n  const [lancement,setLancement]=useState(true)\r\n  \r\n\r\n  const [socket, setSocket] = useState(null)\r\n  useEffect(() => {\r\n    if (socket == null && configuration!==null) {\r\n      const s = io.connect(\"https://www.back.leaders-extreme.fr\")\r\n      setSocket(s)\r\n      s.on('startStopPartie', (data) => {\r\n        setLancement(!data.start)\r\n        console.log(!data.start)\r\n    });\r\n  }\r\n  },[socket,configuration]);\r\n\r\n  const handleClicLancement=()=>{\r\n    PlayAPI.startStopPartie(socket,lancement)\r\n  }\r\n\r\n  return (\r\n  <div\r\n        className=\"body-admin\"\r\n      >\r\n\r\n        <Typography variant=\"h1\" color=\"primary\">Espace administrateur</Typography>\r\n\r\n    <div className=\"admin-buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n          \r\n          className=\"admin-button\"\r\n          color={lancement ?   \"default\" : \"primary\"}\r\n          onClick={handleClicLancement}\r\n          // disabled={lancement}\r\n        >\r\n          {lancement ? \"Lancer la partie\" : \"Arrêter la partie\"}\r\n        </Button>\r\n       \r\n      </div>\r\n \r\n</div>\r\n );\r\n}\r\n\r\nexport default AdminInterface;\r\n\r\n"]},"metadata":{},"sourceType":"module"}