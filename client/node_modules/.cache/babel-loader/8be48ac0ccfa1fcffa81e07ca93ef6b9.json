{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hugod\\\\decitude\\\\client\\\\src\\\\components\\\\pieces\\\\MurPiece.js\",\n    _s = $RefreshSig$();\n\nimport { withWidth } from '@material-ui/core';\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MurPiece = ({\n  num,\n  height,\n  width,\n  type,\n  coordX,\n  coordY,\n  nbColonnesPiece,\n  nbLignesPiece,\n  nbColonnesGrille,\n  nbLignesGrille,\n  anchor,\n  propositionMursDetruire,\n  handleClicMur,\n  mursH,\n  mursV\n}) => {\n  _s();\n\n  // console.log(nbColonnesGrille,nbLignesGrille)\n  const epaisseurInit = 1;\n  const epaisseur = type > 0 ? type > 2 ? epaisseurInit * 8 : epaisseurInit * 4 : 1;\n  const [mounted, setMounted] = useState(false);\n  const [transform, setTranform] = useState([0, 0]); // console.log(anchor)\n\n  const colors = [\"\", // 0 simple\n  \"black\", // 1 large\n  \"green\", // 2 marqueur dégat\n  \"#490000\", //3 porte closed\n  \"#490000\" //4 porte open\n  ];\n\n  const getTransform = (coordX, coordY) => {\n    if (num == 0 || num == 2) {\n      // horizontal\n      var facteurX = 1; // droite par défaut\n\n      var facteurY = -1;\n\n      if (coordX < nbColonnesGrille / 2 - 1 && coordY < nbLignesGrille - 1 || coordY < 2) {\n        facteurX = -1;\n      }\n\n      if ((coordY <= nbLignesGrille / 2 && coordX <= nbColonnesGrille / 2 || coordY - anchor[0] < 2 && coordY - anchor[0] < nbLignesPiece + 1) && coordY - anchor[0] < nbLignesPiece - 1) {\n        facteurY = 1;\n      }\n\n      const translateX = facteurX * width * 0.9;\n      const translateY = facteurY * epaisseur / 1.5;\n      return [translateX, translateY]; // return 'translate(' + translateX + \"px,\" + translateY + \"px)\"\n    }\n\n    if (num == 1 || num == 3) {\n      // vertical\n      var facteurX = 1;\n      var facteurY = 1;\n\n      if ((coordX > nbColonnesGrille / 2 || coordY > nbLignesGrille / 2 || coordX + anchor[1] > nbColonnesPiece - 2) && (coordX - anchor[1] > 0 || coordX == 6 || coordX == 5)) {\n        facteurX = -1;\n      }\n\n      if (coordY < 6 || coordX > nbColonnesGrille - 2 || coordX < nbColonnesGrille / 2) {\n        facteurY = -1;\n      }\n\n      const translateX = facteurX * epaisseur / 1.5;\n      const translateY = facteurY * height * 0.9;\n      return [translateX, translateY]; // return 'translate(' + translateX + \"px,\" + translateY + \"px)\"\n    }\n  };\n\n  const getOpacity = () => {\n    if (num == 0 && !((coordY <= nbLignesGrille / 2 && coordX <= nbColonnesGrille / 2 || coordY - anchor[0] < 2 && coordY - anchor[0] < nbLignesPiece + 1) && coordY - anchor[0] < nbLignesPiece - 1)) return 0;\n    if (num == 2 && (coordY <= nbLignesGrille / 2 && coordX <= nbColonnesGrille / 2 || coordY - anchor[0] < 2 && coordY - anchor[0] < nbLignesPiece + 1) && coordY - anchor[0] < nbLignesPiece - 1) return 0;\n    if (num == 1 && !((coordX > nbColonnesGrille / 2 || coordY > nbLignesGrille / 2 || coordX + anchor[1] > nbColonnesPiece - 2) && (coordX - anchor[1] > 0 || coordX == 6 || coordX == 5))) return 0;\n    if (num == 3 && (coordX > nbColonnesGrille / 2 || coordY > nbLignesGrille / 2 || coordX + anchor[1] > nbColonnesPiece - 2) && (coordX - anchor[1] > 0 || coordX == 6 || coordX == 5)) return 0;\n    return 1;\n  };\n\n  useEffect(() => {\n    setMounted(true);\n    const transformNew = getTransform(coordX, coordY);\n\n    if (transform[0] !== transformNew[0] || transform[1] !== transformNew[1]) {\n      setTranform(transformNew);\n    }\n  });\n\n  const checkInCoords = index => {\n    var checked = false;\n    const mursADetruire = [1, 3, 4];\n    propositionMursDetruire[index].forEach(item => {\n      if (item[0] == coordX && item[1] == coordY && mursADetruire.includes(type)) checked = true; //case en question\n\n      if (item[0] == coordX && item[1] == coordY + 1 && num == 2 && mursADetruire.includes(type)) checked = true; //case dessus\n\n      if (item[0] == coordX && item[1] == coordY - 1 && num == 0 && mursADetruire.includes(type)) checked = true; //case dessous\n\n      if (item[0] == coordX + 1 && item[1] == coordY && num == 1 && mursADetruire.includes(type)) checked = true; //case gauche\n\n      if (item[0] == coordX - 1 && item[1] == coordY && num == 3 && mursADetruire.includes(type)) checked = true; //case droite\n    });\n\n    switch (num) {\n      // HORIZONTAL\n      case 0:\n        try {\n          if (getTransform(coordX + 1, coordY)[0] < 0 && (mursH[coordY][coordX + 1] == 3 || mursH[coordY][coordX + 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX + 1, coordY + 1)[0] < 0 && (mursH[coordY + 1][coordX + 1] == 3 || mursH[coordY + 1][coordX + 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX - 1, coordY)[0] > 0 && (mursH[coordY][coordX - 1] == 3 || mursH[coordY][coordX - 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX - 1, coordY - 1)[0] > 0 && (mursH[coordY - 1][coordX - 1] == 3 || mursH[coordY - 1][coordX - 1] == 4)) checked = false;\n        } catch (error) {}\n\n        break;\n\n      case 2:\n        try {\n          if (getTransform(coordX + 1, coordY)[0] < 0 && (mursH[coordY][coordX + 1] == 3 || mursH[coordY][coordX + 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX + 1, coordY + 1)[0] < 0 && (mursH[coordY + 1][coordX + 1] == 3 || mursH[coordY + 1][coordX + 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX - 1, coordY)[0] > 0 && (mursH[coordY][coordX - 1] == 3 || mursH[coordY][coordX - 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX - 1, coordY + 1)[0] > 0 && (mursH[coordY + 1][coordX - 1] == 3 || mursH[coordY + 1][coordX - 1] == 4)) checked = false;\n        } catch (error) {}\n\n        break;\n      // VERTICAL   \n\n      case 1:\n        try {\n          if (getTransform(coordX, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX] == 3 || mursV[coordY + 1][coordX] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX + 1, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX + 1] == 3 || mursV[coordY + 1][coordX + 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX] == 3 || mursV[coordY - 1][coordX] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX + 1, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX + 1] == 3 || mursV[coordY - 1][coordX + 1] == 4)) checked = false;\n        } catch (error) {}\n\n        break;\n\n      case 3:\n        try {\n          if (getTransform(coordX, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX] == 3 || mursV[coordY + 1][coordX] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX - 1, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX - 1] == 3 || mursV[coordY - 1][coordX - 1] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX] == 3 || mursV[coordY - 1][coordX] == 4)) checked = false;\n        } catch (error) {}\n\n        try {\n          if (getTransform(coordX - 1, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX - 1] == 3 || mursV[coordY - 1][coordX - 1] == 4)) checked = false;\n        } catch (error) {}\n\n        break;\n    }\n\n    return checked;\n  };\n\n  const [clignotant, setClignotant] = useState(false);\n  useEffect(() => {\n    setClignotant(checkInCoords(num % 2));\n  });\n  useEffect(() => {\n    console.log(clignotant);\n  }, [clignotant]);\n\n  const test = () => {\n    console.log(\"coords X \", coordX, \"coords Y \", coordY, \"type\", type);\n    console.log(mursH[coordY]); // console.log(propositionMursDetruire[0],propositionMursDetruire[1])\n    // console.log(checkInCoords(0),checkInCoords(1))\n  };\n\n  const renderPoignee = () => {\n    let component = [];\n\n    switch (num) {\n      case 0:\n        // horizontal haut\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: epaisseur,\n            height: epaisseur / 3,\n            backgroundColor: \"#9F9F9F\",\n            width: epaisseur / 2,\n            left: transform[0] > 0 ? width * 0.2 : null,\n            right: transform[0] < 0 ? width * 0.2 : null,\n            border: \"1px solid black\"\n          }\n        }, 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this));\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: epaisseur * 1.3,\n            height: epaisseur,\n            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n            width: epaisseur,\n            left: transform[0] > 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n            right: transform[0] < 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n            borderRadius: \"100%\",\n            border: \"1px solid black\",\n            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n          }\n        }, 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this));\n        break;\n\n      case 2:\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: -epaisseur * 0.3 - 2,\n            height: epaisseur / 3,\n            backgroundColor: \"#9F9F9F\",\n            width: epaisseur / 2,\n            left: transform[0] > 0 ? width * 0.2 : null,\n            right: transform[0] < 0 ? width * 0.2 : null,\n            border: \"1px solid black\"\n          }\n        }, 2, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 21\n        }, this));\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: -epaisseur * 1.3 - 2,\n            height: epaisseur,\n            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n            width: epaisseur,\n            left: transform[0] > 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n            right: transform[0] < 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n            borderRadius: \"100%\",\n            border: \"1px solid black\",\n            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n          }\n        }, 3, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this));\n        break;\n\n      case 1:\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: transform[1] > 0 ? height * 0.2 : null,\n            bottom: transform[1] < 0 ? height * 0.2 : null,\n            height: epaisseur / 3,\n            backgroundColor: \"#9F9F9F\",\n            width: epaisseur / 3,\n            right: epaisseur,\n            border: \"1px solid black\"\n          }\n        }, 4, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this));\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: transform[1] > 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n            bottom: transform[1] < 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n            // bottom: height * 0.2 - epaisseur / 6 - 1,\n            height: epaisseur,\n            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n            width: epaisseur,\n            right: epaisseur * 1.3,\n            borderRadius: \"100%\",\n            border: \"1px solid black\",\n            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n          }\n        }, 5, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 21\n        }, this));\n        break;\n\n      case 3:\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: transform[1] > 0 ? height * 0.2 : null,\n            bottom: transform[1] < 0 ? height * 0.2 : null,\n            height: epaisseur / 3,\n            backgroundColor: \"#9F9F9F\",\n            width: epaisseur / 3,\n            left: epaisseur,\n            border: \"1px solid black\"\n          }\n        }, 6, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 21\n        }, this));\n        component.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: transform[1] > 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n            bottom: transform[1] < 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n            height: epaisseur,\n            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n            width: epaisseur,\n            left: epaisseur * 1.3,\n            borderRadius: \"100%\",\n            border: \"1px solid black\",\n            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n          }\n        }, 7, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }, this));\n        break;\n    }\n\n    return component;\n  };\n\n  const renderTriangle = (top, bottom, left, rotate, marginLeft, marginTop, color) => {\n    return num % 2 == 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"triangle\",\n      style: {\n        borderTop: top + \"px solid transparent\",\n        borderBottom: bottom + \"px solid transparent\",\n        borderLeft: left + \"px solid \" + color,\n        top: num == 0 ? marginTop : null,\n        bottom: num == 2 ? marginTop : null,\n        left: num == 0 ? marginLeft : null,\n        right: num == 2 ? marginLeft : null,\n        transform: \"rotate(\" + (rotate + num * 90) + \"deg)\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"triangle\",\n      style: {\n        borderTop: left * 0.8 + \"px solid \" + color,\n        borderLeft: bottom + \"px solid transparent\",\n        borderRight: top + \"px solid transparent\",\n        top: num == 1 ? -1 : null,\n        bottom: num == 3 ? -1 : null,\n        left: num == 3 ? marginTop - 1 : null,\n        right: num == 1 ? marginTop - 1 : null,\n        transform: \"rotate(\" + (rotate + 0 + (num - 1) * 90) + \"deg) \"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderMarqueurDegat = () => {\n    const graySombre = \"#4A4848\";\n    const grayMiddle = \"#9F9F9F\";\n    const grayClair = \"#f1f1f1\";\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          left: num % 2 == 0 ? 0 : null,\n          top: num % 2 == 1 ? 0 : 0,\n          backgroundColor: num % 2 == 1 ? \"transparent\" : 'black',\n          width: epaisseur,\n          height: epaisseur\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          right: num % 2 == 0 ? 0 : null,\n          left: num % 2 == 1 ? 0 : null,\n          bottom: num % 2 == 1 ? 0 : 0,\n          backgroundColor: num % 2 == 1 ? \"transparent\" : 'black',\n          width: epaisseur,\n          height: epaisseur\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }, this), renderTriangle(0, epaisseur, width * 0.22, // top , bottom , left\n      0, // rotate\n      3, num % 2 == 1 ? -3 : -3, // margin left, margin top\n      \"black\" // color\n      ), renderTriangle(3, 3, width * 0.23, // top , bottom , left\n      0, // rotate\n      3, -2, // margin left, margin top\n      \"black\" // color\n      ), renderTriangle(4, 0, width * 0.25, // top , bottom , left\n      0, // rotate\n      3, num % 2 == 1 ? 1 : 0, // margin left, margin top\n      \"black\" // color\n      )]\n    }, void 0, true);\n  }; // console.log(propositionMursDetruire)\n\n\n  const renderCoins = () => {\n    //    console.log(\"test\")\n    try {\n      switch (num) {\n        case 1:\n          // if(mursH[coordY+1][coordX]>0 && mursV[coordY+1][coordX+1]>0 ){\n          if (mursH[coordY + 1][coordX] > 0 && mursV[coordY + 1][coordX + 1] > 0) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: \"absolute\",\n                backgroundColor: \"pink\",\n                width: 16,\n                height: 16,\n                bottom: 0,\n                right: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this);\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    } catch (error) {}\n\n    return null;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: clignotant ? \"clignotant\" : \"\" // onMouseOver={()=>setClignotant(false)}\n    ,\n    onClick: clignotant ? () => {\n      // test()\n      handleClicMur(num, coordX, coordY);\n    } : () => test(),\n    style: {\n      position: \"absolute\",\n      width: num % 2 == 0 ? width + 2 : epaisseur,\n      height: num % 2 == 1 ? height + 1 : epaisseur,\n      right: num == 1 ? -1 : null,\n      left: num % 2 == 0 || num == 3 ? -1 : null,\n      top: num == 0 || num % 2 == 1 ? -1 : null,\n      bottom: num == 2 ? 0 : null,\n      // backgroundColor: (type > 0 && type != 2) ? colors[type] : 'transparent',\n      zIndex: type > 1 ? clignotant ? 1 : 2 : 3,\n      transform: type == 4 ? 'translate(' + transform[0] + \"px,\" + transform[1] + \"px)\" : type == 3 ? num % 2 == 0 ? 'translate(0px,' + transform[1] + \"px)\" : 'translate(' + transform[0] + \"px,0px)\" : \"\",\n      opacity: type == 3 || type == 4 ? getOpacity() : 1,\n      transition: type > 2 && mounted ? \"1s\" : \"\",\n      borderRadius: type > 2 ? 3 : 0,\n      border: type > 2 ? \"1px solid black\" : \"\",\n      boxShadow: type > 2 ? \"-1px 1px 1px 1px #9F9F9F\" : \"\",\n      backgroundColor: type > 0 && type != 2 ? colors[type] : 'transparent',\n      cursor: clignotant ? \"pointer\" : \"\"\n    },\n    children: [type == 3 || type == 4 ? renderPoignee() : null, type == 2 ? renderMarqueurDegat() : null, type == 0 ? renderCoins() : null]\n  }, 8, true, {\n    fileName: _jsxFileName,\n    lineNumber: 476,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MurPiece, \"xZ/fPC1K5QiW4mCWqVsdYp0HyeY=\");\n\n_c = MurPiece;\nexport default MurPiece;\n\nvar _c;\n\n$RefreshReg$(_c, \"MurPiece\");","map":{"version":3,"sources":["C:/Users/hugod/decitude/client/src/components/pieces/MurPiece.js"],"names":["withWidth","React","useState","useEffect","MurPiece","num","height","width","type","coordX","coordY","nbColonnesPiece","nbLignesPiece","nbColonnesGrille","nbLignesGrille","anchor","propositionMursDetruire","handleClicMur","mursH","mursV","epaisseurInit","epaisseur","mounted","setMounted","transform","setTranform","colors","getTransform","facteurX","facteurY","translateX","translateY","getOpacity","transformNew","checkInCoords","index","checked","mursADetruire","forEach","item","includes","error","clignotant","setClignotant","console","log","test","renderPoignee","component","push","position","top","backgroundColor","left","right","border","background","borderRadius","boxShadow","bottom","renderTriangle","rotate","marginLeft","marginTop","color","borderTop","borderBottom","borderLeft","borderRight","renderMarqueurDegat","graySombre","grayMiddle","grayClair","renderCoins","zIndex","opacity","transition","cursor"],"mappings":"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","sourcesContent":["import { withWidth } from '@material-ui/core';\r\nimport React, { useState, useEffect } from 'react'\r\n\r\nconst MurPiece = ({\r\n    num,\r\n    height,\r\n    width,\r\n    type,\r\n    coordX,\r\n    coordY,\r\n    nbColonnesPiece,\r\n    nbLignesPiece,\r\n    nbColonnesGrille,\r\n    nbLignesGrille,\r\n    anchor,\r\n    propositionMursDetruire,\r\n    handleClicMur,\r\n    mursH,\r\n    mursV\r\n}) => {\r\n    // console.log(nbColonnesGrille,nbLignesGrille)\r\n    const epaisseurInit = 1\r\n    const epaisseur = type > 0 ? type > 2 ? epaisseurInit * 8 : epaisseurInit * 4 : 1\r\n    const [mounted, setMounted] = useState(false)\r\n    const [transform, setTranform] = useState([0, 0])\r\n    // console.log(anchor)\r\n\r\n    const colors = [\r\n        \"\", // 0 simple\r\n        \"black\", // 1 large\r\n        \"green\", // 2 marqueur dégat\r\n        \"#490000\",//3 porte closed\r\n        \"#490000\",//4 porte open\r\n    ]\r\n\r\n    const getTransform = (coordX,coordY) => {\r\n\r\n\r\n        if (num == 0 || num == 2) { // horizontal\r\n            var facteurX = 1 // droite par défaut\r\n            var facteurY = -1\r\n            if ((coordX < nbColonnesGrille / 2 - 1 && coordY < nbLignesGrille - 1) || coordY < 2) {\r\n                facteurX = -1\r\n            }\r\n            if (((coordY <= nbLignesGrille / 2 && coordX <= nbColonnesGrille / 2) || coordY - anchor[0] < 2 && coordY - anchor[0] < nbLignesPiece + 1) && coordY - anchor[0] < nbLignesPiece - 1) {\r\n                facteurY = 1\r\n            }\r\n\r\n            const translateX = facteurX * width * 0.9\r\n            const translateY = facteurY * epaisseur / 1.5\r\n            return [translateX, translateY]\r\n            // return 'translate(' + translateX + \"px,\" + translateY + \"px)\"\r\n        }\r\n\r\n\r\n\r\n        if (num == 1 || num == 3) { // vertical\r\n            var facteurX = 1\r\n            var facteurY = 1\r\n\r\n            if ((coordX > nbColonnesGrille / 2 || coordY > nbLignesGrille / 2 || coordX + anchor[1] > nbColonnesPiece - 2) && (coordX - anchor[1] > 0 || coordX == 6 || coordX == 5)) {\r\n                facteurX = -1\r\n            }\r\n            if (coordY < 6 || coordX > nbColonnesGrille - 2 || coordX < nbColonnesGrille / 2) {\r\n                facteurY = -1\r\n            }\r\n\r\n            const translateX = facteurX * epaisseur / 1.5\r\n            const translateY = facteurY * height * 0.9\r\n            return [translateX, translateY]\r\n\r\n            // return 'translate(' + translateX + \"px,\" + translateY + \"px)\"\r\n        }\r\n    }\r\n\r\n    const getOpacity = () => {\r\n\r\n        if (num == 0 && !(((coordY <= nbLignesGrille / 2 && coordX <= nbColonnesGrille / 2) || coordY - anchor[0] < 2 && coordY - anchor[0] < nbLignesPiece + 1) && coordY - anchor[0] < nbLignesPiece - 1)) return 0\r\n\r\n        if (num == 2 && (((coordY <= nbLignesGrille / 2 && coordX <= nbColonnesGrille / 2) || coordY - anchor[0] < 2 && coordY - anchor[0] < nbLignesPiece + 1) && coordY - anchor[0] < nbLignesPiece - 1)) return 0\r\n\r\n        if (num == 1 && !((coordX > nbColonnesGrille / 2 || coordY > nbLignesGrille / 2 || coordX + anchor[1] > nbColonnesPiece - 2) && (coordX - anchor[1] > 0 || coordX == 6 || coordX == 5))) return 0\r\n\r\n        if (num == 3 && ((coordX > nbColonnesGrille / 2 || coordY > nbLignesGrille / 2 || coordX + anchor[1] > nbColonnesPiece - 2) && (coordX - anchor[1] > 0 || coordX == 6 || coordX == 5))) return 0\r\n\r\n        return 1\r\n    }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        setMounted(true)\r\n        const transformNew = getTransform(coordX,coordY)\r\n        if (transform[0] !== transformNew[0] || transform[1] !== transformNew[1]) {\r\n            setTranform(transformNew)\r\n        }\r\n\r\n    })\r\n\r\n\r\n\r\n    const checkInCoords=(index)=>{\r\n        var checked=false\r\n        const mursADetruire=[1,3,4]\r\n        propositionMursDetruire[index].forEach(item => {\r\n            if(item[0]==coordX  && item[1]==coordY  && mursADetruire.includes(type))  checked=true  //case en question\r\n            if(item[0]==coordX  && item[1]==coordY+1 && num == 2 && mursADetruire.includes(type))  checked=true  //case dessus\r\n            if(item[0]==coordX  && item[1]==coordY-1 && num == 0 && mursADetruire.includes(type))  checked=true  //case dessous\r\n            if(item[0]==coordX+1  && item[1]==coordY  && num == 1 && mursADetruire.includes(type))  checked=true  //case gauche\r\n            if(item[0]==coordX-1  && item[1]==coordY  && num == 3 && mursADetruire.includes(type))  checked=true  //case droite\r\n            \r\n        });\r\n        \r\n        switch (num) {\r\n            // HORIZONTAL\r\n            case 0:\r\n                try{\r\n                    if(getTransform(coordX+1,coordY)[0]<0 && (mursH[coordY][coordX+1]==3 || mursH[coordY][coordX+1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX+1,coordY+1)[0]<0 && (mursH[coordY+1][coordX+1]==3 || mursH[coordY+1][coordX+1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX-1,coordY)[0]>0 && (mursH[coordY][coordX-1]==3 || mursH[coordY][coordX-1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX-1,coordY-1)[0]>0 && (mursH[coordY-1][coordX-1]==3 || mursH[coordY-1][coordX-1]==4)) checked= false\r\n                }catch(error){}\r\n                break;\r\n\r\n            case 2:\r\n                try{\r\n                    if(getTransform(coordX+1,coordY)[0]<0 && (mursH[coordY][coordX+1]==3 || mursH[coordY][coordX+1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX+1,coordY+1)[0]<0 && (mursH[coordY+1][coordX+1]==3 || mursH[coordY+1][coordX+1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX-1,coordY)[0]>0 && (mursH[coordY][coordX-1]==3 || mursH[coordY][coordX-1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX-1,coordY+1)[0]>0 && (mursH[coordY+1][coordX-1]==3 || mursH[coordY+1][coordX-1]==4)) checked= false\r\n                }catch(error){}\r\n                break;\r\n\r\n            // VERTICAL   \r\n            case 1:\r\n                try{\r\n                    if(getTransform(coordX,coordY+1)[1]<0 && (mursV[coordY+1][coordX]==3 || mursV[coordY+1][coordX]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX+1,coordY+1)[1]<0 && (mursV[coordY+1][coordX+1]==3 || mursV[coordY+1][coordX+1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX,coordY-1)[1]>0 && (mursV[coordY-1][coordX]==3 || mursV[coordY-1][coordX]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX+1,coordY-1)[1]>0 && (mursV[coordY-1][coordX+1]==3 || mursV[coordY-1][coordX+1]==4)) checked= false\r\n                }catch(error){}\r\n                break;\r\n\r\n            case 3:\r\n                try{\r\n                    if(getTransform(coordX,coordY+1)[1]<0 && (mursV[coordY+1][coordX]==3 || mursV[coordY+1][coordX]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX-1,coordY+1)[1]<0 && (mursV[coordY+1][coordX-1]==3 || mursV[coordY-1][coordX-1]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX,coordY-1)[1]>0 && (mursV[coordY-1][coordX]==3 || mursV[coordY-1][coordX]==4)) checked= false\r\n                }catch(error){}\r\n                try{\r\n                    if(getTransform(coordX-1,coordY-1)[1]>0 && (mursV[coordY-1][coordX-1]==3 || mursV[coordY-1][coordX-1]==4)) checked= false\r\n                }catch(error){}\r\n                \r\n                break;\r\n                        \r\n        }\r\n           \r\n        \r\n        return checked\r\n    }\r\n\r\n    const [clignotant,setClignotant]=useState(false)\r\n\r\n\r\n    useEffect(()=>{\r\n        setClignotant(checkInCoords(num%2))\r\n    })\r\n    \r\n    useEffect(()=>{\r\n        console.log(clignotant)\r\n    },[clignotant])\r\n\r\n    const test = () => {\r\n        console.log(\"coords X \", coordX, \"coords Y \", coordY,\"type\",type)\r\n        console.log(mursH[coordY])\r\n        // console.log(propositionMursDetruire[0],propositionMursDetruire[1])\r\n        // console.log(checkInCoords(0),checkInCoords(1))\r\n    }\r\n\r\n    const renderPoignee = () => {\r\n        let component = []\r\n\r\n        switch (num) {\r\n            case 0: // horizontal haut\r\n                component.push(\r\n                    <div // trait\r\n                        key={0}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: epaisseur,\r\n                            height: epaisseur / 3,\r\n                            backgroundColor: \"#9F9F9F\",\r\n                            width: epaisseur / 2,\r\n                            left: transform[0] > 0 ? width * 0.2 : null,\r\n                            right: transform[0] < 0 ? width * 0.2 : null,\r\n                            border: \"1px solid black\",\r\n\r\n\r\n                        }} />\r\n                )\r\n                component.push(\r\n                    <div // rond\r\n                        key={1}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: epaisseur * 1.3,\r\n                            height: epaisseur,\r\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\r\n                            width: epaisseur,\r\n                            left: transform[0] > 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\r\n                            right: transform[0] < 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\r\n                            borderRadius: \"100%\",\r\n                            border: \"1px solid black\",\r\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\r\n                        }} />\r\n                )\r\n                break;\r\n            case 2:\r\n                component.push(\r\n                    <div\r\n                        key={2}\r\n\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: -epaisseur * 0.3 - 2,\r\n                            height: epaisseur / 3,\r\n                            backgroundColor: \"#9F9F9F\",\r\n                            width: epaisseur / 2,\r\n                            left: transform[0] > 0 ? width * 0.2 : null,\r\n                            right: transform[0] < 0 ? width * 0.2 : null,\r\n                            border: \"1px solid black\"\r\n                        }} />\r\n                )\r\n                component.push(\r\n                    <div\r\n                        key={3}\r\n\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: -epaisseur * 1.3 - 2,\r\n                            height: epaisseur,\r\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\r\n                            width: epaisseur,\r\n                            left: transform[0] > 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\r\n                            right: transform[0] < 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\r\n                            borderRadius: \"100%\",\r\n                            border: \"1px solid black\",\r\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\r\n\r\n                        }} />\r\n                )\r\n                break;\r\n            case 1:\r\n                component.push(\r\n                    <div\r\n                        key={4}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: transform[1] > 0 ? height * 0.2 : null,\r\n                            bottom: transform[1] < 0 ? height * 0.2 : null,\r\n                            height: epaisseur / 3,\r\n                            backgroundColor: \"#9F9F9F\",\r\n                            width: epaisseur / 3,\r\n                            right: epaisseur,\r\n                            border: \"1px solid black\"\r\n                        }} />\r\n                )\r\n                component.push(\r\n                    <div\r\n                        key={5}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: transform[1] > 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\r\n                            bottom: transform[1] < 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\r\n                            // bottom: height * 0.2 - epaisseur / 6 - 1,\r\n                            height: epaisseur,\r\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\r\n                            width: epaisseur,\r\n                            right: epaisseur * 1.3,\r\n                            borderRadius: \"100%\",\r\n                            border: \"1px solid black\",\r\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\r\n\r\n                        }} />\r\n\r\n                )\r\n                break;\r\n            case 3:\r\n                component.push(\r\n                    <div\r\n                        key={6}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: transform[1] > 0 ? height * 0.2 : null,\r\n                            bottom: transform[1] < 0 ? height * 0.2 : null,\r\n                            height: epaisseur / 3,\r\n                            backgroundColor: \"#9F9F9F\",\r\n                            width: epaisseur / 3,\r\n                            left: epaisseur,\r\n                            border: \"1px solid black\"\r\n                        }} />\r\n                )\r\n                component.push(\r\n                    <div\r\n                        key={7}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: transform[1] > 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\r\n                            bottom: transform[1] < 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\r\n                            height: epaisseur,\r\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\r\n                            width: epaisseur,\r\n                            left: epaisseur * 1.3,\r\n                            borderRadius: \"100%\",\r\n                            border: \"1px solid black\",\r\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\r\n\r\n                        }} />\r\n                )\r\n                break;\r\n        }\r\n\r\n\r\n        return (component)\r\n    }\r\n\r\n    const renderTriangle = (top, bottom, left, rotate, marginLeft, marginTop, color) => {\r\n        return (\r\n            num%2==0 ?\r\n            <div\r\n                className='triangle'\r\n                style={{\r\n                    borderTop: top + \"px solid transparent\",\r\n                    borderBottom: bottom + \"px solid transparent\",\r\n                    borderLeft: left + \"px solid \" + color,\r\n                    top: num == 0 ? marginTop : null,\r\n                    bottom: num == 2 ? marginTop : null,\r\n                    left: num == 0 ? marginLeft : null,\r\n                    right: num == 2 ? marginLeft : null,\r\n                    transform: \"rotate(\" + (rotate + num * 90) + \"deg)\"\r\n                }}\r\n            ></div>\r\n            : \r\n            <div\r\n                className='triangle'\r\n                style={{\r\n                    borderTop:left*0.8 + \"px solid \"+color,\r\n                    borderLeft:(bottom )+ \"px solid transparent\" ,\r\n                    borderRight: top + \"px solid transparent\",\r\n                    top: num == 1 ? -1: null,\r\n                    bottom: num == 3 ? -1 : null,\r\n                    left: num == 3 ? marginTop-1  : null,\r\n                    right: num == 1 ? marginTop-1 : null,\r\n                    transform: \"rotate(\" +(rotate  +0+ (num-1)*90) + \"deg) \" ,\r\n                }}\r\n            ></div>\r\n        )\r\n    }\r\n\r\n    const renderMarqueurDegat = () => {\r\n        const graySombre = \"#4A4848\"\r\n        const grayMiddle = \"#9F9F9F\"\r\n        const grayClair = \"#f1f1f1\"\r\n\r\n        return (\r\n            <>\r\n                {/* COTES */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    left:   num%2==0 ? 0 : null,\r\n                    top : num%2==1 ? 0 : 0,\r\n                    backgroundColor:num%2==1 ? \"transparent\" :'black',\r\n                    width: epaisseur,\r\n                    height: epaisseur,\r\n\r\n                }}></div>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    right:  num%2==0 ? 0 : null,\r\n                    left:  num%2==1 ? 0 : null,\r\n                    bottom : num%2==1 ? 0 : 0,\r\n                    backgroundColor:num%2==1 ? \"transparent\" :'black',\r\n                    width: epaisseur,\r\n                    height: epaisseur\r\n\r\n                }}></div>\r\n               \r\n                {\r\n                    renderTriangle(\r\n                        0, epaisseur, width*0.22,// top , bottom , left\r\n                        0,// rotate\r\n                        3 , num%2==1 ? -3 : -3,// margin left, margin top\r\n                        \"black\"// color\r\n                    )\r\n                }\r\n                 {\r\n                    renderTriangle(\r\n                        3, 3, width*0.23,// top , bottom , left\r\n                        0,// rotate\r\n                        3, -2,// margin left, margin top\r\n                        \"black\"// color\r\n                    )\r\n                }\r\n                 {\r\n                    renderTriangle(\r\n                        4, 0, width*0.25,// top , bottom , left\r\n                        0,// rotate\r\n                        3, num%2==1 ? 1 : 0,// margin left, margin top\r\n                        \"black\"// color\r\n                    )\r\n                }\r\n\r\n               \r\n                \r\n            </>\r\n        )\r\n    }\r\n    // console.log(propositionMursDetruire)\r\n\r\n   const renderCoins=()=>{\r\n    //    console.log(\"test\")\r\n       try{\r\n    switch (num) {\r\n        case 1:\r\n            // if(mursH[coordY+1][coordX]>0 && mursV[coordY+1][coordX+1]>0 ){\r\n            if(mursH[coordY+1][coordX]>0 && mursV[coordY+1][coordX+1]>0 ){\r\n\r\n                return (\r\n                <div\r\n                 style={{\r\n                     position:\"absolute\",\r\n                     backgroundColor:\"pink\",\r\n                     width:16,\r\n                     height:16,\r\n                     bottom:0,\r\n                     right:0\r\n                 }}\r\n                ></div>\r\n                \r\n                )\r\n            }\r\n            break;\r\n    \r\n        default:\r\n            break;\r\n    }\r\n       }catch(error){}\r\n       \r\n       return null\r\n   }\r\n\r\n\r\n    return (\r\n        <div\r\n            className={clignotant ? \"clignotant\" : \"\"}\r\n            // onMouseOver={()=>setClignotant(false)}\r\n            key={8}\r\n            onClick={clignotant ? ()=>{\r\n                // test()\r\n                handleClicMur(num,coordX,coordY)\r\n            }\r\n                \r\n                : ()=>test()}\r\n            style={{\r\n                position: \"absolute\",\r\n                width: num % 2 == 0 ? width + 2 : epaisseur,\r\n                height: num % 2 == 1 ? height + 1 : epaisseur,\r\n                right: num == 1 ? -1 : null,\r\n                left: num % 2 == 0 || num == 3 ? -1 : null,\r\n                top: num == 0 || num % 2 == 1 ? -1 : null,\r\n                bottom: num == 2 ? 0 : null,\r\n                // backgroundColor: (type > 0 && type != 2) ? colors[type] : 'transparent',\r\n                zIndex: type>1 ? clignotant ? 1 : 2 : 3,\r\n                transform: type == 4 ? 'translate(' + transform[0] + \"px,\" + transform[1] + \"px)\" : (type == 3 ? (num % 2 == 0 ? 'translate(0px,' + transform[1] + \"px)\" : 'translate(' + transform[0] + \"px,0px)\") : \"\"),\r\n                opacity: type == 3 || type == 4 ? getOpacity() : 1,\r\n                transition: type > 2 && mounted ? \"1s\" : \"\",\r\n                borderRadius: type > 2 ? 3 : 0,\r\n                border: type > 2 ? \"1px solid black\" : \"\",\r\n                boxShadow: type > 2 ? \"-1px 1px 1px 1px #9F9F9F\" : \"\",\r\n                backgroundColor:(type > 0 && type != 2) ? colors[type] : 'transparent',\r\n                cursor:clignotant ? \"pointer\" : \"\"\r\n            }}\r\n        >\r\n            {\r\n                type == 3 || type == 4 ?\r\n                    renderPoignee()\r\n                    :\r\n                    null\r\n            }\r\n            {\r\n                type == 2 ?\r\n                    renderMarqueurDegat()\r\n                    :\r\n                    null\r\n            }\r\n            {\r\n                type == 0 ?\r\n                    renderCoins()\r\n                    :\r\n                    null\r\n            }\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default MurPiece;"]},"metadata":{},"sourceType":"module"}