{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hugod\\\\d\\xE9citude\\\\client\\\\src\\\\routes\\\\InterfaceTact.js\",\n    _s = $RefreshSig$();\n\nimport \"../App.css\";\nimport React, { useState, useEffect } from 'react';\nimport PlayAPI from \"../API/PlayAPI\";\nimport BandeauTop from \"../components/interfaceJoueur/BandeauTop\";\nimport BandeauBottom from \"../components/interfaceJoueur/BandeauBottom\";\nimport Grille from \"../components/interfaceJoueur/Grille\";\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport io from 'socket.io-client'; // import { Transition } from 'react-transition-group';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst InterfaceTact = ({\n  userConnected\n}) => {\n  _s();\n\n  const [numPompier, setNumPompier] = useState(userConnected.role.replace(\"TACT\", \"\"));\n  const [currentTour, setCurrentTour] = useState(1);\n  const [currentCycle, setCurrentCycle] = useState(1);\n  const [configuration, setConfiguration] = useState({});\n  const [interventionsJoueur, setInterventionsJoueur] = useState({\n    nbInterventions: 40,\n    nbFeu: 10,\n    nbFeuFum: 70,\n    nbFum: 10,\n    nbMarqueur: 50\n  });\n  const [resultats, setResultats] = useState({\n    nbDecedes: 10,\n    nbSauves: 50\n  });\n  const [actionsJoueur, setActionsJoueur] = useState({\n    Feu: 10,\n    FeuFum: 11,\n    Fum: 10,\n    Marqueur: 10,\n    OuvrirPorte: 10,\n    FermerPorte: 10,\n    Habitant: 20\n  });\n  const [budget, setBudget] = useState(800);\n  const socket = PlayAPI.getSocket();\n\n  const getPlayParameters = async () => {\n    const param = await PlayAPI.getConfiguration(1);\n    console.log(param);\n    setConfiguration(param);\n  };\n\n  useEffect(() => {\n    getPlayParameters();\n  }, [numPompier]);\n  const [position, setPosition] = useState([1, 4]); // INITIALISATION DE LA CARTE\n\n  const [carte, setCarte] = useState([[0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 4, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]);\n  const nbLignesGrille = carte.length;\n  const nbColonnesGrille = carte[0].length;\n  const [mursH, setMursH] = useState([[1, 1, 1, 1, 1, 1, 2, 6, 1, 1, 1, 1, 2, 5, 1, 1], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 2, 6, 1, 6, 2, 1, 1, 1, 5, 2, 1, 1], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 1, 1, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1]]);\n  const [mursV, setMursV] = useState([[1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], [2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], [5, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 2], [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 5]]);\n\n  const onTextChange = e => {\n    setNumPompier(e.target.value);\n    console.log(typeof e.target.value);\n  };\n\n  const onXChange = e => {\n    e.preventDefault();\n\n    if (e.target.value.length > 0) {\n      updateCarte(position, 0);\n      setPosition(position => [position[0], parseInt(e.target.value)]);\n    } else {\n      updateCarte(position, 0);\n      setPosition(position => [position[0], 0]);\n    }\n  };\n\n  const onYChange = e => {\n    e.preventDefault();\n\n    if (e.target.value.length > 0) {\n      updateCarte(position, 0);\n      setPosition(position => [parseInt(e.target.value), position[1]]);\n    } else {\n      updateCarte(position, 0);\n      setPosition(position => [0, position[1]]);\n    }\n  }; // UPDATES\n\n\n  const updateCarte = (coords, value) => {\n    if (coords[0] < nbLignesGrille && coords[1] < nbColonnesGrille) {\n      try {\n        var c = [...carte];\n        c[coords[0]][coords[1]] = value;\n        setCarte(c);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  const updateMurH = (coords, value) => {\n    if (coords[0] < mursH.length && coords[1] < mursH[0].length) {\n      try {\n        var m = [...mursH];\n        m[coords[0]][coords[1]] = value;\n        setMursH(m);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  const updateMurV = (coords, value) => {\n    if (coords[0] < mursV.length && coords[1] < mursV[0].length) {\n      try {\n        var m = [...mursV];\n        m[coords[0]][coords[1]] = value;\n        setMursV(m);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  const updateActions = (type, attr, value) => {\n    console.log(type, attr, value);\n\n    switch (type) {\n      case \"intervention\":\n        var i = interventionsJoueur;\n        i[attr] = value;\n        setInterventionsJoueur(i);\n        break;\n\n      case \"action\":\n        var a = actionsJoueur;\n        a[attr] = value;\n        setActionsJoueur(a);\n        break;\n    }\n  };\n\n  const updateResultats = sauve => {\n    var res = resultats;\n\n    if (sauve) {\n      res.nbSauves += 1;\n    } else {\n      res.nbDecedes += 1;\n    }\n\n    setResultats(res);\n  }; // SOCKETS \n\n\n  const onTourChange = async e => {\n    e.preventDefault();\n    console.log(\"nouveau tour todo\");\n    PlayAPI.nouveauTour(numPompier);\n    console.log(await PlayAPI.companies(\"co\", true));\n  };\n\n  useEffect(() => {\n    setBtnClickedBottom(null);\n  }, [position]);\n  useEffect(() => {\n    relacherHabitant();\n  }, [position, mursH, mursV]);\n  useEffect(() => {\n    if (Object.keys(configuration).length > 0) {\n      let inter = interventionsJoueur;\n      const interKeys = Object.keys(inter);\n      interKeys.forEach(key => {\n        try {\n          // console.log(configuration[key.replace(\"nb\",\"coutInter\")],key.replace(\"nb\",\"coutInter\"))\n          if (configuration[key.replace(\"nb\", \"coutInter\")].valeur > 0) {\n            inter[key] = budget / configuration[key.replace(\"nb\", \"coutInter\")].valeur;\n          }\n        } catch (error) {}\n      });\n      console.log(inter);\n      setInterventionsJoueur(inter);\n    }\n  }, [budget, configuration]);\n  useEffect(() => {\n    socket.on('tour', num => {\n      setCurrentTour(parseInt(num) + 1);\n    });\n  }); // TESTS\n\n  const test = async () => {\n    console.log(\"test function\");\n  };\n\n  const renderTests = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        top: 200\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          flex: 1,\n          flexDirection: \"column\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => onTourChange(e),\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Manual settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"name-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"numPompier\",\n              children: \"Num\\xE9ro pompier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"numPompier\",\n              onChange: e => onTextChange(e),\n              value: numPompier,\n              label: \"Num\\xE9ro pompier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), currentTour == numPompier ? /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Fin du tour\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: true,\n            children: \"Fin du tour\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"numPompier\",\n          children: \"Position x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"xPompier\",\n          onChange: e => onXChange(e),\n          value: position[1]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"numPompier\",\n          children: \"Position y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"yPompier\",\n          onChange: e => onYChange(e),\n          value: position[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => test(),\n        children: \"test function\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this);\n  }; // AUTORISATIONS \n\n\n  const deplacementAutorise = deplacement => {\n    // return true\n    var dpl = [...deplacement];\n    if (dpl[0] == 0 && dpl[1] == 0) return false;\n    if (position[0] + dpl[0] > carte.length - 1 || position[1] + dpl[1] > carte[0].length - 1 || position[0] + dpl[0] < 0 || position[1] + dpl[1] < 0) return false;\n    const dplInterditsCases = [1, 2, 3, 4, 5];\n\n    try {\n      if (dplInterditsCases.includes(carte[position[0] + dpl[0]][position[1] + dpl[1]])) return false;\n    } catch (error) {}\n\n    const dplInterditsMurs = [1, 2, 3, 5];\n\n    try {\n      if (dpl[0] != 0) {\n        // haut bas\n        if (dpl[0] < 0) {\n          dpl[0] = 0;\n        }\n\n        if (typeof mursH[position[0] + dpl[0]][position[1]] === 'undefined') return false;\n        if (dplInterditsMurs.includes(mursH[position[0] + dpl[0]][position[1]])) return false;\n      } else {\n        // gauche droite\n        if (dpl[1] < 0) {\n          dpl[1] = 0;\n        }\n\n        if (typeof mursV[position[0]][position[1] + dpl[1]] === 'undefined') return false;\n        if (dplInterditsMurs.includes(mursV[position[0]][position[1] + dpl[1]])) return false;\n      }\n    } catch (error) {}\n\n    return true;\n  };\n\n  const testRelacherHabitant = () => {\n    if (carte[position[0]][position[1]] != 3) return false;\n    const mursBloquants = [1, 2, 3, 5];\n    if (position[0] == 0 && !mursBloquants.includes(mursH[position[0]][position[1]])) return true; // haut\n\n    if (position[0] == nbLignesGrille - 1 && !mursBloquants.includes(mursH[position[0] + 1][position[1]])) return true; // bas\n\n    if (position[1] == 0 && !mursBloquants.includes(mursV[position[0]][position[1]])) return true; // gauche\n\n    if (position[1] == nbColonnesGrille - 1 && !mursBloquants.includes(mursV[position[0]][position[1] + 1])) return true; // droite\n\n    return false;\n  };\n\n  const relacherHabitant = () => {\n    if (testRelacherHabitant()) {\n      setTimeout(() => {\n        updateResultats(true);\n        updateCarte(position, 1);\n      }, 1000);\n    }\n  };\n\n  const getCasesAutour = () => {\n    var cases = [];\n\n    try {\n      cases.push(carte[position[0] - 1][position[1]]); // dessus\n    } catch (error) {}\n\n    try {\n      cases.push(carte[position[0]][position[1] + 1]); // droite\n    } catch (error) {}\n\n    try {\n      cases.push(carte[position[0] + 1][position[1]]); // dessous\n    } catch (error) {}\n\n    try {\n      cases.push(carte[position[0]][position[1] - 1]); // gauche\n    } catch (error) {}\n\n    return cases;\n  };\n\n  const getMursAutour = () => {\n    var murs = [];\n\n    try {\n      if (mursH[position[0]][position[1]] != 2 || mursH[position[0]][position[1] - 1] < 5 && mursH[position[0]][position[1] + 1] < 5) {\n        murs.push(mursH[position[0]][position[1]]); // dessus\n      } else {\n        murs.push(0);\n      }\n    } catch (error) {}\n\n    try {\n      if (mursV[position[0]][position[1] + 1] != 2 || mursV[position[0] - 1][position[1] + 1] < 5 && mursV[position[0] + 1][position[1] + 1] < 5) {\n        murs.push(mursV[position[0]][position[1] + 1]); // droite\n        // console.log(mursV[position[0]][position[1]+1])\n      } else {\n        murs.push(0);\n      }\n    } catch (error) {}\n\n    try {\n      if (mursH[position[0] + 1][position[1]] != 2 || mursH[position[0] + 1][position[1] - 1] < 5 && mursH[position[0] + 1][position[1] + 1] < 5) {\n        murs.push(mursH[position[0] + 1][position[1]]); // dessous\n      } else {\n        murs.push(0);\n      }\n    } catch (error) {}\n\n    try {\n      if (mursV[position[0]][position[1]] != 2 || mursV[position[0] - 1][position[1]] < 5 && mursV[position[0] + 1][position[1]] < 5) {\n        murs.push(mursV[position[0]][position[1]]); // gauche\n        // console.log(mursV[position[0]][position[1]])\n      } else {\n        murs.push(0);\n      }\n    } catch (error) {} // console.log(murs)\n\n\n    return murs;\n  };\n\n  const [btnClickedBottom, setBtnClickedBottom] = useState(null);\n  const [propositionsCase, setPropositionsCase] = useState([]); // Extincteurs\n\n  const [propositionMursDetruire, setPropositionMursDetruire] = useState([[], []]); // Horizontaux  , Verticaux\n\n  useEffect(() => {\n    if (btnClickedBottom != 3 || btnClickedBottom == null) {\n      setPropositionMursDetruire([[], []]);\n    }\n\n    if (btnClickedBottom > 2 && btnClickedBottom < 6 || btnClickedBottom == null) {\n      setPropositionsCase([]);\n    }\n  }, [btnClickedBottom]); // HANDLERS CLIC GRILLE\n\n  const handleClicCase = (valeurAvant, valeurApres, coordX, coordY) => {\n    console.log(valeurAvant, valeurApres, coordX, coordY);\n\n    try {\n      updateCarte([coordY, coordX], valeurApres);\n      if (valeurAvant == 2) updateCarte(position, 3);\n      setPropositionsCase([]);\n      setBtnClickedBottom(null);\n\n      if (valeurAvant == 5 && valeurApres == 0) {\n        // Extincteur flamme\n        updateActions(\"intervention\", \"nbFeu\", interventionsJoueur['nbFeu'] - 1);\n        updateActions(\"action\", \"Feu\", actionsJoueur['Feu'] - 1);\n      }\n\n      if (valeurAvant == 5 && valeurApres == 4) {\n        // Feu Fumée\n        updateActions(\"intervention\", \"nbFeuFum\", interventionsJoueur['nbFeuFum'] - 1);\n        updateActions(\"action\", \"FeuFum\", actionsJoueur['FeuFum'] - 1);\n      }\n\n      if (valeurAvant == 4 && valeurApres == 0) {\n        // Fumée\n        updateActions(\"intervention\", \"nbFum\", interventionsJoueur['nbFum'] - 1);\n        updateActions(\"action\", \"Fum\", actionsJoueur['Fum'] - 1);\n      }\n\n      if (valeurAvant == 2 && valeurApres == 0) {\n        // Habitant\n        updateActions(\"action\", \"Habitant\", actionsJoueur['Habitant'] - 1);\n      }\n    } catch (error) {}\n  };\n\n  const handleClicMur = (num, valeurAvant, coordX, coordY) => {\n    // marqueur dégat\n    if (propositionMursDetruire[0].length > 0 || propositionMursDetruire[1].length > 0) {\n      const checkInCoords = index => {\n        // console.log(\"coordx\",coordX,\"coordy\",coordY,\"position\",position)\n        let numClic = null;\n\n        if (coordX == position[1] && (coordY < position[0] || coordY == position[0] && num == 0)) {\n          // top\n          numClic = 0; // case en question\n          // console.log(\"top\",numClic)\n        }\n\n        if (coordX == position[1] && (coordY > position[0] || coordY == position[0] && num == 2)) {\n          // bottom\n          numClic = 2; // case en question\n          // console.log(\"bottom\",numClic)\n        }\n\n        if (coordY == position[0] && (coordX < position[1] || coordX == position[1] && num == 3)) {\n          // left\n          numClic = 3; // case en question\n          // console.log(\"left\",numClic)\n        }\n\n        if (coordY == position[0] && (coordX > position[1] || coordX == position[1] && num == 1)) {\n          // right\n          numClic = 1; // case en question\n          // console.log(\"right\",numClic)\n        }\n\n        return numClic;\n      };\n\n      var cote = checkInCoords(num % 2);\n      let valeurApres = 4;\n      if (valeurAvant == 1) valeurApres = 3;\n\n      if (cote != null) {\n        try {\n          switch (cote) {\n            case 0:\n              updateMurH([position[0], position[1]], valeurApres);\n              break;\n\n            case 1:\n              updateMurV([position[0], position[1] + 1], valeurApres);\n              break;\n\n            case 2:\n              updateMurH([position[0] + 1, position[1]], valeurApres);\n              break;\n\n            case 3:\n              updateMurV([position[0], position[1]], valeurApres);\n              break;\n          }\n\n          updateActions(\"intervention\", \"nbMarqueur\", interventionsJoueur['nbMarqueur'] - 1);\n          updateActions(\"action\", \"Marqueur\", actionsJoueur['Marqueur'] - 1);\n        } catch (error) {}\n\n        setPropositionMursDetruire([[], []]);\n        setBtnClickedBottom(null);\n      }\n    }\n  }; // HANDLER CLICS BOUTONS\n\n\n  const handleClicFleche = num => {\n    // Position y x\n    let deplacement;\n\n    switch (num) {\n      case 0:\n        // haut\n        console.log(\"haut\");\n        deplacement = [-1, 0];\n        break;\n\n      case 1:\n        // droite\n        console.log(\"droite\");\n        deplacement = [0, 1];\n        break;\n\n      case 2:\n        // bas\n        console.log(\"bas\");\n        deplacement = [1, 0];\n        break;\n\n      case 3:\n        // gauche\n        console.log(\"gauche\");\n        deplacement = [0, -1];\n        break;\n    }\n\n    if (deplacementAutorise(deplacement)) {\n      updateCarte([position[0] + deplacement[0], position[1] + deplacement[1]], carte[position[0]][position[1]]);\n      setPosition(position => [position[0] + deplacement[0], position[1] + deplacement[1]]);\n      updateCarte(position, 0);\n    }\n  };\n\n  const handleClicDoor = ouvrir => {\n    // position, ouvert/fermé\n    setBtnClickedBottom(ouvrir ? 4 : 5);\n    let valueAvant;\n    let valueApres;\n\n    if (ouvrir) {\n      valueAvant = 5;\n      valueApres = 6;\n      updateActions(\"action\", \"OuvrirPorte\", actionsJoueur['OuvrirPorte'] - 1);\n    } else {\n      valueAvant = 6;\n      valueApres = 5;\n      updateActions(\"action\", \"FermerPorte\", actionsJoueur['FermerPorte'] - 1);\n    }\n\n    try {\n      if (mursH[position[0]][position[1]] == valueAvant) updateMurH([position[0], position[1]], valueApres);\n      if (mursH[position[0] + 1][position[1]] == valueAvant) updateMurH([position[0] + 1, position[1]], valueApres);\n      if (mursV[position[0]][position[1]] == valueAvant) updateMurV([position[0], position[1]], valueApres);\n      if (mursV[position[0]][position[1] + 1] == valueAvant) updateMurV([position[0], position[1] + 1], valueApres);\n    } catch (error) {}\n  };\n\n  const handleClicExtincteur = num => {\n    // 0 FEU, 1 FEUFUM, 2 FUM\n    if (btnClickedBottom != num) {\n      var listeCasesAction = [];\n      let valeurAvant = 5;\n      let valeurApres = 0;\n      setBtnClickedBottom(num);\n\n      switch (num) {\n        case 0:\n          // ETEINDRE FEU\n          break;\n\n        case 1:\n          // FEU FUM\n          valeurApres = 4;\n          break;\n\n        case 2:\n          // ETEINDRE FUMEE\n          valeurAvant = 4;\n          break;\n      }\n\n      try {\n        if (carte[position[0] - 1][position[1]] == valeurAvant) listeCasesAction.push([position[0] - 1, position[1], valeurAvant, valeurApres]); // TOP\n      } catch (error) {}\n\n      try {\n        if (carte[position[0]][position[1] + 1] == valeurAvant) listeCasesAction.push([position[0], position[1] + 1, valeurAvant, valeurApres]); // RIGHT\n      } catch (error) {}\n\n      try {\n        if (carte[position[0] + 1][position[1]] == valeurAvant) listeCasesAction.push([position[0] + 1, position[1], valeurAvant, valeurApres]); // BOTTOM\n      } catch (error) {}\n\n      try {\n        if (carte[position[0]][position[1] - 1] == valeurAvant) listeCasesAction.push([position[0], position[1] - 1, valeurAvant, valeurApres]); // LEFT\n      } catch (error) {}\n\n      setPropositionsCase(listeCasesAction);\n    } else {\n      setBtnClickedBottom(null);\n    }\n  };\n\n  const handleClicMarqueur = () => {\n    if (btnClickedBottom != 3) {\n      setBtnClickedBottom(3);\n\n      if (propositionMursDetruire[0].length > 0 || propositionMursDetruire[1].length > 0) {\n        setPropositionMursDetruire([[], []]);\n      } else {\n        const mursADetruire = [1, 3, 5, 6];\n        var propositions = [[], []];\n        const mursAutour = getMursAutour();\n\n        try {\n          if (mursADetruire.includes(mursAutour[0])) propositions[0].push([position[1], position[0]]); // top\n\n          if (mursADetruire.includes(mursAutour[1])) propositions[1].push([position[1] + 1, position[0]]); // right\n\n          if (mursADetruire.includes(mursAutour[2])) propositions[0].push([position[1], position[0] + 1]); // bottom\n\n          if (mursADetruire.includes(mursAutour[3])) propositions[1].push([position[1], position[0]]); // left\n        } catch (error) {}\n\n        setPropositionMursDetruire(propositions);\n      }\n    } else {\n      setBtnClickedBottom(null);\n    }\n  };\n\n  const handleClicValidated = bool => {\n    for (let i = 0; i < mursH.length; i++) {\n      for (let j = 0; j < mursH[0].length; j++) {\n        if (mursH[i][j] == 5) {\n          updateMurH([i, j], 6);\n        } else {\n          if (mursH[i][j] == 6) updateMurH([i, j], 5);\n        }\n      }\n    }\n\n    for (let i = 0; i < mursV.length; i++) {\n      for (let j = 0; j < mursV[0].length; j++) {\n        if (mursV[i][j] == 5) {\n          updateMurV([i, j], 6);\n        } else {\n          if (mursV[i][j] == 6) updateMurV([i, j], 5);\n        }\n      }\n    }\n  };\n\n  const handleNoClicked = () => {\n    setPropositionMursDetruire([[], []]);\n    setPropositionsCase([]);\n  };\n\n  const handleClicHabitant = () => {\n    if (btnClickedBottom != 6) {\n      setBtnClickedBottom(6);\n      const valeurAvant = 2;\n      const valeurApres = 0;\n      var listeCasesAction = [];\n\n      try {\n        if (carte[position[0] - 1][position[1]] == valeurAvant) listeCasesAction.push([position[0] - 1, position[1], valeurAvant, valeurApres]); // TOP\n      } catch (error) {}\n\n      try {\n        if (carte[position[0]][position[1] + 1] == valeurAvant) listeCasesAction.push([position[0], position[1] + 1, valeurAvant, valeurApres]); // RIGHT\n      } catch (error) {}\n\n      try {\n        if (carte[position[0] + 1][position[1]] == valeurAvant) listeCasesAction.push([position[0] + 1, position[1], valeurAvant, valeurApres]); // BOTTOM\n      } catch (error) {}\n\n      try {\n        if (carte[position[0]][position[1] - 1] == valeurAvant) listeCasesAction.push([position[0], position[1] - 1, valeurAvant, valeurApres]); // LEFT\n      } catch (error) {}\n\n      setPropositionsCase(listeCasesAction);\n      console.log(\"handle clic habitant\");\n    } else {\n      setBtnClickedBottom(null);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Grille, {\n      nbColonnesGrille: nbColonnesGrille,\n      nbLignesGrille: nbLignesGrille,\n      carte: carte,\n      position: position,\n      mursH: mursH,\n      mursV: mursV,\n      propositionMursDetruire: propositionMursDetruire,\n      propositionsCase: propositionsCase,\n      handleClicMur: handleClicMur,\n      handleClicCase: handleClicCase\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BandeauTop, {\n      interventions: interventionsJoueur,\n      resultats: resultats,\n      numeroPompier: numPompier,\n      cycle: currentCycle,\n      tour: currentTour,\n      configuration: configuration,\n      budget: budget\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BandeauBottom, {\n      nbActions: actionsJoueur,\n      nbInterventions: interventionsJoueur,\n      numeroPompier: numPompier,\n      tour: currentTour,\n      handleClicFleche: handleClicFleche,\n      handleClicValidated: handleClicValidated,\n      handleClicDoor: handleClicDoor,\n      handleClicMarqueur: handleClicMarqueur,\n      handleClicExt: handleClicExtincteur,\n      handleNoClicked: handleNoClicked,\n      handleClicHabitant: handleClicHabitant,\n      btnClickedBottom: btnClickedBottom,\n      mursAutour: getMursAutour(),\n      casesAutour: getCasesAutour(),\n      currentCase: carte[position[0]][position[1]]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 763,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 737,\n    columnNumber: 5\n  }, this);\n};\n\n_s(InterfaceTact, \"JGpX6wxHgqXy2RvE1BR9IcHzGiQ=\");\n\n_c = InterfaceTact;\nexport default InterfaceTact;\n\nvar _c;\n\n$RefreshReg$(_c, \"InterfaceTact\");","map":{"version":3,"sources":["C:/Users/hugod/décitude/client/src/routes/InterfaceTact.js"],"names":["React","useState","useEffect","PlayAPI","BandeauTop","BandeauBottom","Grille","createMuiTheme","ThemeProvider","io","InterfaceTact","userConnected","numPompier","setNumPompier","role","replace","currentTour","setCurrentTour","currentCycle","setCurrentCycle","configuration","setConfiguration","interventionsJoueur","setInterventionsJoueur","nbInterventions","nbFeu","nbFeuFum","nbFum","nbMarqueur","resultats","setResultats","nbDecedes","nbSauves","actionsJoueur","setActionsJoueur","Feu","FeuFum","Fum","Marqueur","OuvrirPorte","FermerPorte","Habitant","budget","setBudget","socket","getSocket","getPlayParameters","param","getConfiguration","console","log","position","setPosition","carte","setCarte","nbLignesGrille","length","nbColonnesGrille","mursH","setMursH","mursV","setMursV","onTextChange","e","target","value","onXChange","preventDefault","updateCarte","parseInt","onYChange","coords","c","error","updateMurH","m","updateMurV","updateActions","type","attr","i","a","updateResultats","sauve","res","onTourChange","nouveauTour","companies","setBtnClickedBottom","relacherHabitant","Object","keys","inter","interKeys","forEach","key","valeur","on","num","test","renderTests","top","flex","flexDirection","deplacementAutorise","deplacement","dpl","dplInterditsCases","includes","dplInterditsMurs","testRelacherHabitant","mursBloquants","setTimeout","getCasesAutour","cases","push","getMursAutour","murs","btnClickedBottom","propositionsCase","setPropositionsCase","propositionMursDetruire","setPropositionMursDetruire","handleClicCase","valeurAvant","valeurApres","coordX","coordY","handleClicMur","checkInCoords","index","numClic","cote","handleClicFleche","handleClicDoor","ouvrir","valueAvant","valueApres","handleClicExtincteur","listeCasesAction","handleClicMarqueur","mursADetruire","propositions","mursAutour","handleClicValidated","bool","j","handleNoClicked","handleClicHabitant"],"mappings":"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","sourcesContent":["import \"../App.css\"\nimport React, { useState, useEffect } from 'react'\nimport PlayAPI from \"../API/PlayAPI\"\nimport BandeauTop from \"../components/interfaceJoueur/BandeauTop\"\nimport BandeauBottom from \"../components/interfaceJoueur/BandeauBottom\"\nimport Grille from \"../components/interfaceJoueur/Grille\"\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport io from 'socket.io-client'\n// import { Transition } from 'react-transition-group';\n\nconst InterfaceTact= ({userConnected})=> {\n  const [numPompier, setNumPompier] = useState(userConnected.role.replace(\"TACT\",\"\"))\n  const [currentTour, setCurrentTour] = useState(1)\n  const [currentCycle, setCurrentCycle] = useState(1)\n\n  const [configuration,setConfiguration]=useState(\n    {}\n    )\n  \n  const [interventionsJoueur,setInterventionsJoueur] = useState({\n    nbInterventions: 40,\n    nbFeu: 10,\n    nbFeuFum: 70,\n    nbFum: 10,\n    nbMarqueur: 50,\n  })\n  const [resultats,setResultats] = useState({\n    nbDecedes: 10,\n    nbSauves: 50\n  })\n\n  const [actionsJoueur,setActionsJoueur] = useState({\n    Feu: 10,\n    FeuFum: 11,\n    Fum: 10,\n    Marqueur: 10,\n    OuvrirPorte: 10,\n    FermerPorte: 10,\n    Habitant: 20\n  })\n\n  const [budget,setBudget]=useState(800)\n  \n  const socket = PlayAPI.getSocket()\n\n  const getPlayParameters=async()=>{\n    const param = await PlayAPI.getConfiguration(1)\n    console.log(param)\n    setConfiguration(param)\n  }\n\n\n  useEffect(()=>{\n    getPlayParameters()\n  },[numPompier])\n\n  const [position, setPosition] = useState([1, 4])\n\n\n  // INITIALISATION DE LA CARTE\n\n  const [carte, setCarte] = useState([\n    [0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 4, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n  ])\n\n  const nbLignesGrille = carte.length\n  const nbColonnesGrille = carte[0].length\n\n  const [mursH, setMursH] = useState([\n    [1, 1, 1, 1, 1, 1, 2, 6, 1, 1, 1, 1, 2, 5, 1, 1],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 1, 1, 1, 2, 6, 1, 6, 2, 1, 1, 1, 5, 2, 1, 1],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 1, 1, 1, 1, 1, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1]\n  ])\n\n  const [mursV, setMursV] = useState([\n    [1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n    [2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n    [5, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0, 0, 0, 1],\n    [1, 0, 0, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 2],\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 5]\n  ])\n\n\n\n  \n\n\n\n\n\n\n\n\n  const onTextChange = (e) => {\n    setNumPompier(e.target.value)\n    console.log(typeof (e.target.value))\n  }\n\n  const onXChange = (e) => {\n    e.preventDefault()\n    if (e.target.value.length > 0) {\n      updateCarte(position, 0)\n      setPosition(position => [position[0], parseInt(e.target.value)])\n    } else {\n      updateCarte(position, 0)\n      setPosition(position => [position[0], 0])\n    }\n\n  }\n  const onYChange = (e) => {\n    e.preventDefault()\n    if (e.target.value.length > 0) {\n      updateCarte(position, 0)\n      setPosition(position => [parseInt(e.target.value), position[1]])\n    } else {\n      updateCarte(position, 0)\n      setPosition(position => [0, position[1]])\n    }\n  }\n\n\n  // UPDATES\n  const updateCarte = (coords, value) => {\n    if (coords[0] < nbLignesGrille && coords[1] < nbColonnesGrille) {\n      try {\n        var c = [...carte]\n        c[coords[0]][coords[1]] = value\n        setCarte(c)\n      } catch (error) {\n        console.log(error)\n      }\n    }\n\n\n  }\n  const updateMurH = (coords, value) => {\n    if (coords[0] < mursH.length && coords[1] < mursH[0].length) {\n      try {\n        var m = [...mursH]\n        m[coords[0]][coords[1]] = value\n        setMursH(m)\n        \n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n  const updateMurV = (coords, value) => {\n    if (coords[0] < mursV.length && coords[1] < mursV[0].length) {\n      try {\n        var m = [...mursV]\n        m[coords[0]][coords[1]] = value\n        setMursV(m)\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n\n  const updateActions=(type,attr,value)=>{\n    console.log(type,attr,value)\n    switch (type) {\n      case \"intervention\":\n        var i = interventionsJoueur\n        i[attr]=value\n        setInterventionsJoueur(i)\n        break;\n    \n      case \"action\":\n        var a = actionsJoueur\n        a[attr]=value\n        setActionsJoueur(a)\n        break;\n    }\n    \n  }\n\n  const updateResultats=(sauve)=>{\n    var res = resultats\n    if(sauve){\n      res.nbSauves+=1\n    }else{\n      res.nbDecedes+=1\n    }\n    setResultats(res)\n  }\n\n\n\n  // SOCKETS \n  const onTourChange = async (e) => {\n    e.preventDefault()\n    console.log(\"nouveau tour todo\")\n    PlayAPI.nouveauTour(numPompier)\n    console.log(await PlayAPI.companies(\"co\", true))\n  }\n\n\n\n\n  useEffect(() => {\n    setBtnClickedBottom(null)\n  }, [position])\n\n  \n  useEffect(()=>{\n    relacherHabitant()\n  },[position,mursH,mursV])\n\n  useEffect(()=>{\n    \n    if(Object.keys(configuration).length>0){\n      let inter = interventionsJoueur\n      const interKeys = Object.keys(inter)\n\n      interKeys.forEach(key=>{\n        try{\n          // console.log(configuration[key.replace(\"nb\",\"coutInter\")],key.replace(\"nb\",\"coutInter\"))\n          if(configuration[key.replace(\"nb\",\"coutInter\")].valeur>0){\n            inter[key]=budget/configuration[key.replace(\"nb\",\"coutInter\")].valeur\n          }\n        }catch(error){}\n        \n      })\n      console.log(inter)\n      setInterventionsJoueur(inter)\n    }\n    \n\n  },[budget,configuration])\n \n\n\n  useEffect(() => {\n    socket.on('tour', num => {\n      setCurrentTour(parseInt(num) + 1)\n    })\n  });\n\n\n  \n  // TESTS\n\n  const test = async () => {\n\n    console.log(\"test function\")\n  }\n\n  const renderTests = () => {\n    return (\n      <div style={{ position: \"absolute\", top: 200 }}>\n        <div className=\"card\" style={{ flex: 1, flexDirection: \"column\" }}>\n          <form onSubmit={e => onTourChange(e)}>\n            <h1>Manual settings</h1>\n            <div className=\"name-field\">\n              <label htmlFor=\"numPompier\">Numéro pompier</label>\n              <input\n                type=\"number\"\n                name=\"numPompier\"\n                onChange={e => onTextChange(e)}\n                value={numPompier}\n                label=\"Numéro pompier\"\n              />\n            </div>\n            {currentTour == numPompier ?\n              <button>Fin du tour</button>\n              :\n              <button disabled>Fin du tour</button>\n\n            }\n\n          </form>\n\n        </div>\n        <div style={{ flex: 1, flexDirection: \"column\" }}>\n          <label htmlFor=\"numPompier\">Position x</label>\n          <input\n            type=\"number\"\n            name=\"xPompier\"\n            onChange={e => onXChange(e)}\n            value={position[1]}\n          />\n          <label htmlFor=\"numPompier\">Position y</label>\n          <input\n            type=\"number\"\n            name=\"yPompier\"\n            onChange={e => onYChange(e)}\n            value={position[0]}\n          />\n        </div>\n        <button onClick={() => test()} >test function</button>\n      </div>\n    )\n  }\n\n\n\n\n  // AUTORISATIONS \n  const deplacementAutorise = (deplacement) => {\n    // return true\n    var dpl = [...deplacement]\n    if (dpl[0] == 0 && dpl[1] == 0) return false\n    if (position[0] + dpl[0] > carte.length - 1 || position[1] + dpl[1] > carte[0].length - 1 || position[0]+dpl[0]<0||  position[1]+dpl[1]<0) return false\n\n    \n    const dplInterditsCases=[1,2,3,4,5]\n\n    try {\n      if(dplInterditsCases.includes(carte[position[0]+dpl[0]][position[1]+dpl[1]])) return false\n\n    } catch (error) {}\n    \n    const dplInterditsMurs = [1, 2,3,5]\n    try {\n      if (dpl[0] != 0) { // haut bas\n        if (dpl[0] < 0) {\n          dpl[0] = 0\n        }\n        if (typeof (mursH[position[0] + dpl[0]][position[1]]) === 'undefined') return false\n        if (dplInterditsMurs.includes(mursH[position[0] + dpl[0]][position[1]])) return false\n      } else { // gauche droite\n        if (dpl[1] < 0) {\n          dpl[1] = 0\n        }\n        if (typeof (mursV[position[0]][position[1] + dpl[1]]) === 'undefined') return false\n        if (dplInterditsMurs.includes(mursV[position[0]][position[1] + dpl[1]])) return false\n      }\n    } catch (error) {}\n    \n\n\n\n    return true\n  }\n  const testRelacherHabitant=()=>{\n    if(carte[position[0]][position[1]]!=3) return false\n\n    const mursBloquants = [1,2,3,5]\n\n    if(position[0]==0 && ! mursBloquants.includes(mursH[position[0]][position[1]])) return true // haut\n    if(position[0]==nbLignesGrille-1 && !mursBloquants.includes(mursH[position[0]+1][position[1]])) return true // bas\n\n    if(position[1]==0 && ! mursBloquants.includes(mursV[position[0]][position[1]])) return true // gauche\n    if(position[1]==nbColonnesGrille-1 && !mursBloquants.includes(mursV[position[0]][position[1]+1])) return true // droite\n\n    return false\n  }\n  const relacherHabitant=()=>{\n    if(testRelacherHabitant()){\n      setTimeout(() => {\n        updateResultats(true)\n        updateCarte(position,1)\n      }, 1000);\n      \n    }\n  }\n \n  const getCasesAutour=()=>{\n    var cases = []\n\n    try {\n      cases.push(carte[position[0]-1][position[1]]) // dessus\n    } catch (error) {}\n    try {\n      cases.push(carte[position[0]][position[1]+1]) // droite\n    } catch (error) {}\n    try {\n      cases.push(carte[position[0]+1][position[1]]) // dessous\n    } catch (error) {}\n    try {\n      cases.push(carte[position[0]][position[1]-1]) // gauche\n    } catch (error) {}\n    return cases\n  }\n  const getMursAutour=()=>{\n    var murs = []\n\n    try {\n      if(mursH[position[0]][position[1]]!=2 || (mursH[position[0]][position[1]-1]<5   && mursH[position[0]][position[1]+1]<5)){\n        murs.push(mursH[position[0]][position[1]]) // dessus\n      }else{\n        murs.push(0)\n      }\n    } catch (error) {}\n\n    try {\n      if(mursV[position[0]][position[1]+1]!=2 || (mursV[position[0]-1][position[1]+1]<5   && mursV[position[0]+1][position[1]+1]<5)){\n        murs.push(mursV[position[0]][position[1]+1])  // droite\n        // console.log(mursV[position[0]][position[1]+1])\n\n      }else{\n        murs.push(0)\n      }\n    } catch (error) {}\n\n    try {\n      if(mursH[position[0]+1][position[1]]!=2 || (mursH[position[0]+1][position[1]-1]<5   && mursH[position[0]+1][position[1]+1]<5)){\n        murs.push(mursH[position[0]+1][position[1]]) // dessous\n      }else{\n        murs.push(0)\n      }\n      \n    } catch (error) {}\n    try {\n      if(mursV[position[0]][position[1]]!=2 || (mursV[position[0]-1][position[1]]<5   && mursV[position[0]+1][position[1]]<5)){\n        murs.push(mursV[position[0]][position[1]])  // gauche\n        // console.log(mursV[position[0]][position[1]])\n      }else{\n        murs.push(0)\n      }\n    } catch (error) {}\n    // console.log(murs)\n    return murs\n  }\n\n  \n\n\n  const [btnClickedBottom,setBtnClickedBottom]=useState(null)\n  const [propositionsCase,setPropositionsCase]=useState([]) // Extincteurs\n  const [propositionMursDetruire,setPropositionMursDetruire]=useState([[],[]]) // Horizontaux  , Verticaux\n  useEffect(()=>{\n    if(btnClickedBottom!=3 || btnClickedBottom==null){\n      setPropositionMursDetruire([[],[]])\n    }\n    if((btnClickedBottom>2 && btnClickedBottom<6 ) || btnClickedBottom==null){\n      setPropositionsCase([])\n    }\n  },[btnClickedBottom])\n\n  // HANDLERS CLIC GRILLE\n\n  const handleClicCase=(valeurAvant,valeurApres,coordX,coordY)=>{ \n\n    console.log(valeurAvant,valeurApres,coordX,coordY)\n    try {\n      updateCarte([coordY,coordX],valeurApres)\n      if(valeurAvant==2) updateCarte(position,3)\n      setPropositionsCase([])\n      setBtnClickedBottom(null)\n\n      if(valeurAvant==5 && valeurApres==0){ // Extincteur flamme\n        updateActions(\"intervention\",\"nbFeu\",interventionsJoueur['nbFeu']-1)\n        updateActions(\"action\",\"Feu\",actionsJoueur['Feu']-1)\n      }\n      if(valeurAvant==5 && valeurApres==4){ // Feu Fumée\n        updateActions(\"intervention\",\"nbFeuFum\",interventionsJoueur['nbFeuFum']-1)\n        updateActions(\"action\",\"FeuFum\",actionsJoueur['FeuFum']-1)\n      }\n      if(valeurAvant==4 && valeurApres==0){ // Fumée\n        updateActions(\"intervention\",\"nbFum\",interventionsJoueur['nbFum']-1)\n        updateActions(\"action\",\"Fum\",actionsJoueur['Fum']-1)\n      } \n\n      if(valeurAvant==2 && valeurApres==0){ // Habitant\n        updateActions(\"action\",\"Habitant\",actionsJoueur['Habitant']-1)\n      } \n    } catch (error) {}\n  }\n\n  const handleClicMur=(num,valeurAvant,coordX,coordY)=>{ // marqueur dégat\n    if(propositionMursDetruire[0].length>0 || propositionMursDetruire[1].length>0){\n\n      const checkInCoords=(index)=>{\n        // console.log(\"coordx\",coordX,\"coordy\",coordY,\"position\",position)\n    \n        let numClic=null\n\n        if(coordX == position[1] && (coordY<position[0] || (coordY==position[0] && num==0  ))) { // top\n          numClic= 0  // case en question\n          // console.log(\"top\",numClic)\n        }\n        if(coordX == position[1] && (coordY>position[0] || (coordY==position[0] && num==2  ))) { // bottom\n          numClic= 2  // case en question\n          // console.log(\"bottom\",numClic)\n        }\n        if(coordY==position[0] && (coordX < position[1] || (coordX==position[1] && num==3  ))) { // left\n          numClic= 3  // case en question\n          // console.log(\"left\",numClic)\n        }\n        if(coordY==position[0] && (coordX > position[1] || (coordX==position[1] && num==1  ))) { // right\n          numClic= 1  // case en question\n          // console.log(\"right\",numClic)\n        }\n\n        return numClic\n      }\n\n      var cote = checkInCoords(num%2)\n      let valeurApres =4\n      if(valeurAvant==1) valeurApres = 3\n\n      if(cote!=null){\n        try {\n          switch (cote) {\n            case 0:\n              updateMurH([position[0],position[1]], valeurApres)\n              break;\n            case 1:\n              updateMurV([position[0],position[1]+1], valeurApres)\n              break;\n            case 2:\n              updateMurH([position[0]+1,position[1]], valeurApres)\n              break;\n            case 3:\n              updateMurV([position[0],position[1]], valeurApres)\n              break;\n          }\n          \n          updateActions(\"intervention\",\"nbMarqueur\",interventionsJoueur['nbMarqueur']-1)\n          updateActions(\"action\",\"Marqueur\",actionsJoueur['Marqueur']-1)\n          \n         \n        } catch (error) {\n        }\n        setPropositionMursDetruire([[],[]])\n        setBtnClickedBottom(null)\n      }\n      \n    }\n    \n  }\n\n\n\n  // HANDLER CLICS BOUTONS\n\n\n  const handleClicFleche = (num) => {\n    // Position y x\n    let deplacement\n    switch (num) {\n      case 0: // haut\n        console.log(\"haut\")\n        deplacement = [-1, 0]\n        break;\n\n      case 1: // droite\n        console.log(\"droite\")\n        deplacement = [0, 1]\n        break;\n\n      case 2: // bas\n        console.log(\"bas\")\n        deplacement = [1, 0]\n        break;\n\n      case 3: // gauche\n        console.log(\"gauche\")\n        deplacement = [0, -1]\n\n        break;\n    }\n    if (deplacementAutorise(deplacement)) {\n      updateCarte([position[0] + deplacement[0], position[1] + deplacement[1]], carte[position[0]][position[1]])\n\n      setPosition(position => [position[0] + deplacement[0], position[1] + deplacement[1]])\n      updateCarte(position, 0)\n    }\n  }\n\n  const handleClicDoor = ( ouvrir) => { // position, ouvert/fermé\n      setBtnClickedBottom(ouvrir ? 4 : 5)\n      let valueAvant\n      let valueApres \n\n      if(ouvrir){\n        valueAvant=5\n        valueApres=6\n        updateActions(\"action\",\"OuvrirPorte\",actionsJoueur['OuvrirPorte']-1)\n      }else{\n        valueAvant=6\n        valueApres=5\n        updateActions(\"action\",\"FermerPorte\",actionsJoueur['FermerPorte']-1)\n      }\n      try {\n        if (mursH[position[0]][position[1]] == valueAvant) updateMurH([position[0], position[1]], valueApres)\n        if (mursH[position[0] + 1][position[1]] == valueAvant) updateMurH([position[0] + 1, position[1]], valueApres)\n        if (mursV[position[0]][position[1]] == valueAvant) updateMurV([position[0], position[1]], valueApres)\n        if (mursV[position[0]][position[1] + 1] == valueAvant) updateMurV([position[0], position[1] + 1], valueApres)\n      } catch (error) {\n      \n      }\n  }\n\n  const handleClicExtincteur=(num)=>{\n    // 0 FEU, 1 FEUFUM, 2 FUM\n    if( btnClickedBottom !=num){\n      var listeCasesAction=[]\n      let valeurAvant = 5\n      let valeurApres= 0\n      setBtnClickedBottom(num)\n      switch (num) {\n        case 0: // ETEINDRE FEU\n          break;\n      \n        case 1: // FEU FUM\n          valeurApres=4\n          break;\n        case 2: // ETEINDRE FUMEE\n          valeurAvant=4\n          break;\n      }\n  \n      try {\n        if(carte[position[0]-1][position[1]]==valeurAvant) listeCasesAction.push([position[0]-1,position[1],valeurAvant,valeurApres]) // TOP\n      } catch (error) {}\n      try {\n        if(carte[position[0]][position[1]+1]==valeurAvant) listeCasesAction.push([position[0],position[1]+1,valeurAvant,valeurApres]) // RIGHT\n      } catch (error) {}\n      try {\n        if(carte[position[0]+1][position[1]]==valeurAvant) listeCasesAction.push([position[0]+1,position[1],valeurAvant,valeurApres]) // BOTTOM\n      } catch (error) {}\n      try {\n        if(carte[position[0]][position[1]-1]==valeurAvant) listeCasesAction.push([position[0],position[1]-1,valeurAvant,valeurApres]) // LEFT\n      } catch (error) {}\n  \n      setPropositionsCase(listeCasesAction)\n    }else{\n      setBtnClickedBottom(null)\n    }\n    \n  }\n\n  const handleClicMarqueur=()=>{\n    if(btnClickedBottom!=3){\n      setBtnClickedBottom(3)\n      if(propositionMursDetruire[0].length>0 || propositionMursDetruire[1].length>0){\n        setPropositionMursDetruire([[],[]])\n      }else{\n        const mursADetruire=[1,3,5,6]\n        var propositions=[\n          [],\n          []\n        ]\n        const mursAutour = getMursAutour()\n    \n        try {\n          if(mursADetruire.includes(mursAutour[0])) propositions[0].push([position[1], position[0]]) // top\n          if(mursADetruire.includes(mursAutour[1])) propositions[1].push([position[1]+1, position[0]]) // right\n          if(mursADetruire.includes(mursAutour[2])) propositions[0].push([position[1], position[0]+1]) // bottom\n          if(mursADetruire.includes(mursAutour[3])) propositions[1].push([position[1], position[0]]) // left\n  \n        } catch (error) {\n        \n        }\n        setPropositionMursDetruire(propositions)\n        \n      }\n    }else{\n      setBtnClickedBottom(null)\n    }\n    \n    \n  }\n\n  const handleClicValidated = (bool) => {\n    for (let i = 0; i < mursH.length; i++) {\n      for (let j = 0; j < mursH[0].length; j++) {\n        if(mursH[i][j]==5) {\n          updateMurH([i, j], 6)\n        }else{\n          if(mursH[i][j]==6) updateMurH([i, j], 5)\n        }\n        \n      }\n    }\n    for (let i = 0; i < mursV.length; i++) {\n      for (let j = 0; j < mursV[0].length; j++) {\n        if(mursV[i][j]==5) {\n           updateMurV([i, j], 6)\n        }else{\n          if(mursV[i][j]==6) updateMurV([i, j], 5)\n        }\n        \n      }\n    }\n\n  }\n\n  const handleNoClicked=()=>{\n    setPropositionMursDetruire([[],[]])\n    setPropositionsCase([])\n  }\n\n  const handleClicHabitant=()=>{\n    if(btnClickedBottom!=6){\n      setBtnClickedBottom(6)\n      const valeurAvant = 2\n      const valeurApres = 0\n      var listeCasesAction=[]\n      try {\n        if(carte[position[0]-1][position[1]]==valeurAvant) listeCasesAction.push([position[0]-1,position[1],valeurAvant,valeurApres]) // TOP\n      } catch (error) {}\n      try {\n        if(carte[position[0]][position[1]+1]==valeurAvant) listeCasesAction.push([position[0],position[1]+1,valeurAvant,valeurApres]) // RIGHT\n      } catch (error) {}\n      try {\n        if(carte[position[0]+1][position[1]]==valeurAvant) listeCasesAction.push([position[0]+1,position[1],valeurAvant,valeurApres]) // BOTTOM\n      } catch (error) {}\n      try {\n        if(carte[position[0]][position[1]-1]==valeurAvant) listeCasesAction.push([position[0],position[1]-1,valeurAvant,valeurApres]) // LEFT\n      } catch (error) {}\n  \n      setPropositionsCase(listeCasesAction)\n      \n\n      console.log(\"handle clic habitant\")\n    }else{\n      setBtnClickedBottom(null)\n    }\n    \n  }\n\n \n\n \n \n  return (\n    <div>\n      <Grille\n        nbColonnesGrille={nbColonnesGrille}\n        nbLignesGrille={nbLignesGrille}\n        carte={carte}\n        position={position}\n        mursH={mursH}\n        mursV={mursV}\n        propositionMursDetruire={propositionMursDetruire}\n        propositionsCase={propositionsCase}\n        handleClicMur={handleClicMur}\n        handleClicCase={handleClicCase}\n        \n      />\n      {/* {renderTests()} */}\n\n      <BandeauTop\n        interventions={interventionsJoueur}\n        resultats={resultats}\n        numeroPompier={numPompier}\n        cycle={currentCycle}\n        tour={currentTour}\n        configuration={configuration}\n        budget={budget}\n      />\n\n      <BandeauBottom\n        nbActions={actionsJoueur}\n        nbInterventions={interventionsJoueur}\n        numeroPompier={numPompier}\n        tour={currentTour}\n        handleClicFleche={handleClicFleche}\n        handleClicValidated={handleClicValidated}\n        handleClicDoor={handleClicDoor}\n        handleClicMarqueur={handleClicMarqueur}\n        handleClicExt={handleClicExtincteur}\n        handleNoClicked={handleNoClicked}\n        handleClicHabitant={handleClicHabitant}\n        btnClickedBottom={btnClickedBottom}\n        mursAutour={getMursAutour()}\n        casesAutour={getCasesAutour()}\n        currentCase={carte[position[0]][position[1]]}\n      />\n      {/* <div>\n    <Transition\n      transitionName=\"example\"\n      transitionAppear={true}\n      transitionAppearTimeout={500}\n      transitionEnter={false}\n      transitionLeave={false}>\n      <h1>Fading at Initial Mount</h1>\n    </Transition>\n    </div> */}\n    </div>\n  );\n\n}\n\nexport default InterfaceTact;\n\n"]},"metadata":{},"sourceType":"module"}