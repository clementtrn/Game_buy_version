{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hugod\\\\d\\xE9citude\\\\client\\\\src\\\\routes\\\\InterInterface.js\",\n    _s = $RefreshSig$();\n\nimport \"../styles/App.css\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport PlayAPI from \"../API/PlayAPI\";\nimport InterBandeauTop from \"../components/interfaceJoueur/InterBandeauTop\";\nimport InterBandeauBottom from \"../components/interfaceJoueur/InterBandeauBottom\";\nimport Grille from \"../components/interfaceJoueur/Grille\";\nimport InterInterventions from \"../components/interfaceJoueur/InterInterventions\";\nimport { useHistory } from 'react-router-dom';\nimport cookie from 'react-cookies';\nimport InterBandeauDroite from \"../components/interfaceJoueur/InterBandeauDroite\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst InterInterface = () => {\n  _s();\n\n  const history = useHistory();\n  const user = cookie.load(\"user\"); // console.log(user)\n\n  if (user == null || user == undefined) history.push(\"/login\");\n  const [numPompier, setNumPompier] = useState(0);\n  const [currentTour, setCurrentTour] = useState(null);\n  const [currentCycle, setCurrentCycle] = useState(null);\n  const [currentSequence, setCurrentSequence] = useState(null); // const [currentCycle, setCurrentCycle] = useState(1)\n  // const [currentTour, setCurrentTour] = useState(0)\n\n  const [session, setSession] = useState(user.session);\n  const [equipe, setEquipe] = useState(user.equipe); // const [session, setSession] = useState(1)\n  // const [equipe, setEquipe] = useState(1)\n\n  const [chrono, setChrono] = useState(null);\n  useEffect(() => {// console.log(chrono)\n    // if (currentTour == numPompier) {\n    //   if (chrono > 0) {\n    //     var chronoTimer = setInterval(() => {\n    //       setChrono(chrono => chrono - 1)\n    //     }, 1000)\n    //   }\n    //   return () => {\n    //     clearInterval(chronoTimer)\n    //   }\n    // }\n  }, [chrono]);\n  const [configuration, setConfiguration] = useState(null); // const [configuration, setConfiguration] = useState({\n  //   chronoTour: { valeur: 40 },\n  //   nbSequences: { valeur: 4 },\n  //   nbCyclesParSequence: { valeur: 2 },\n  //   nbPompEquipe: { valeur: 6 }\n  // })\n  // const nbCycleParSeq = 2\n\n  const couts = {\n    interventions: {\n      coutInterDeplacement: 100,\n      coutInterFeu: 200,\n      coutInterFeuFum: 100,\n      coutInterFum: 100,\n      coutInterMarqueur: 100,\n      coutInterPorte: 100,\n      coutInterHab: 100\n    },\n    equipements: {\n      coutEqFeu: 200,\n      coutEqFeuFum: 100,\n      coutEqFum: 100,\n      coutEqMarqueur: 100\n    }\n  };\n  useEffect(() => {\n    console.log(configuration);\n\n    if (configuration != null) {\n      setChrono(configuration.chronoTour.valeur);\n    }\n  }, [configuration]); // const [stocks, setStocks] = useState({\n  //   Interventions: 10,\n  //   Feu: 1,\n  //   FeuFum: 10,\n  //   Fum: 10,\n  //   Marqueur: 10,\n  // })\n\n  const [resultats, setResultats] = useState({\n    Decedes: 1,\n    Sauves: 2,\n    Marqueur: 3\n  }); // const [interventions, setInterventions] = useState({\n  //   Deplacement: 0,\n  //   Feu: 0,\n  //   FeuFum: 0,\n  //   Fum: 0,\n  //   Marqueur: 0,\n  //   Porte: 0,\n  //   Habitant: 0\n  // })\n\n  const [budget, setBudget] = useState({\n    interventions: {\n      sequence: {\n        total: 500,\n        depense: 100\n      },\n      cycle: {\n        total: 100,\n        depense: 50\n      }\n    },\n    equipements: {\n      sequence: {\n        total: 300,\n        depense: 200\n      },\n      cycle: {\n        total: 200,\n        depense: 100\n      }\n    }\n  });\n  const [cycles, setCycles] = useState({\n    interventions: [{\n      numSeq: 1,\n      numCycle: 1,\n      pomp1: 100,\n      pomp2: 100,\n      pomp3: 100,\n      pomp4: 100,\n      pomp5: 100,\n      pomp6: 100\n    }, {\n      numSeq: 1,\n      numCycle: 2,\n      pomp1: 300,\n      pomp2: 300,\n      pomp3: 300,\n      pomp4: 300,\n      pomp5: 300,\n      pomp6: 300\n    } // {\n    //   numSeq: 2,\n    //   numCycle: 1,\n    //   pomp1: 400,\n    //   pomp2: 400,\n    //   pomp3: 400,\n    //   pomp4: 400,\n    //   pomp5: 400,\n    //   pomp6: 400,\n    // },\n    // {\n    //   numSeq: 2,\n    //   numCycle: 2,\n    //   pomp1: 500,\n    //   pomp2: 500,\n    //   pomp3: 500,\n    //   pomp4: 500,\n    //   pomp5: 500,\n    //   pomp6: 500,\n    // },\n    // {\n    //   numSeq: 3,\n    //   numCycle: 1,\n    //   pomp1: 600,\n    //   pomp2: 600,\n    //   pomp3: 600,\n    //   pomp4: 600,\n    //   pomp5: 600,\n    //   pomp6: 600,\n    // },\n    // {\n    //   numSeq: 3,\n    //   numCycle: 2,\n    //   pomp1: 700,\n    //   pomp2: 700,\n    //   pomp3: 700,\n    //   pomp4: 700,\n    //   pomp5: 700,\n    //   pomp6: 700,\n    // },\n    ],\n    equipements: [{\n      numSeq: 1,\n      numCycle: 1,\n      Feu: {\n        pomp1: 1,\n        pomp2: 2,\n        pomp3: 3,\n        pomp4: 4,\n        pomp5: 5,\n        pomp6: 6\n      },\n      FeuFum: {\n        pomp1: 7,\n        pomp2: 8,\n        pomp3: 9,\n        pomp4: 10,\n        pomp5: 11,\n        pomp6: 12\n      },\n      Fum: {\n        pomp1: 13,\n        pomp2: 14,\n        pomp3: 15,\n        pomp4: 16,\n        pomp5: 17,\n        pomp6: 18\n      },\n      Marqueur: {\n        pomp1: 19,\n        pomp2: 20,\n        pomp3: 21,\n        pomp4: 22,\n        pomp5: 23,\n        pomp6: 24\n      }\n    }, {\n      numSeq: 1,\n      numCycle: 2,\n      Feu: {\n        pomp1: 0,\n        pomp2: 0,\n        pomp3: 0,\n        pomp4: 0,\n        pomp5: 0,\n        pomp6: 0\n      },\n      FeuFum: {\n        pomp1: 0,\n        pomp2: 0,\n        pomp3: 0,\n        pomp4: 0,\n        pomp5: 0,\n        pomp6: 0\n      },\n      Fum: {\n        pomp1: 0,\n        pomp2: 0,\n        pomp3: 0,\n        pomp4: 0,\n        pomp5: 0,\n        pomp6: 0\n      },\n      Marqueur: {\n        pomp1: 0,\n        pomp2: 0,\n        pomp3: 0,\n        pomp4: 0,\n        pomp5: 0,\n        pomp6: 0\n      }\n    }]\n  });\n  const [budgetSim, setBudgetSim] = useState({});\n  useEffect(() => {\n    // const c = cycles.interventions.sort((a,b)=>a.numSeq-b.numSeq)\n    // console.log(c)\n    // console.log(\"last cycle\",{\n    //   numSeq:cycles.interventions.length>1 ? cycles.interventions.length%2 == 0  ? cycles.interventions[cycles.interventions.length -1].numSeq +1 : cycles.interventions[cycles.interventions.length -1].numSeq : 1 ,\n    //   numCycle: (cycles.interventions.length)%2+1})\n    setBudgetSim({\n      interventions: {\n        numSeq: cycles.interventions.length > 1 ? cycles.interventions.length % 2 == 0 ? cycles.interventions[cycles.interventions.length - 1].numSeq + 1 : cycles.interventions[cycles.interventions.length - 1].numSeq : 1,\n        numCycle: cycles.interventions.length % 2 + 1,\n        pomp1: 0,\n        pomp2: 0,\n        pomp3: 0,\n        pomp4: 0,\n        pomp5: 0,\n        pomp6: 0\n      },\n      equipements: {\n        numSeq: cycles.equipements.length > 1 ? cycles.equipements.length % 2 == 0 ? cycles.equipements[cycles.equipements.length - 1].numSeq + 1 : cycles.equipements[cycles.equipements.length - 1].numSeq : 1,\n        numCycle: cycles.equipements.length % 2 + 1,\n        Feu: {\n          pomp1: 0,\n          pomp2: 0,\n          pomp3: 0,\n          pomp4: 0,\n          pomp5: 0,\n          pomp6: 0\n        },\n        FeuFum: {\n          pomp1: 0,\n          pomp2: 0,\n          pomp3: 0,\n          pomp4: 0,\n          pomp5: 0,\n          pomp6: 0\n        },\n        Fum: {\n          pomp1: 0,\n          pomp2: 0,\n          pomp3: 0,\n          pomp4: 0,\n          pomp5: 0,\n          pomp6: 0\n        },\n        Marqueur: {\n          pomp1: 0,\n          pomp2: 0,\n          pomp3: 0,\n          pomp4: 0,\n          pomp5: 0,\n          pomp6: 0\n        }\n      }\n    }); // console.log(cycles.equipements)\n  }, [cycles]);\n  const [validated, setValidated] = useState({\n    interventions: false,\n    equipements: false\n  });\n  const [page, setPage] = useState({\n    interventions: 0,\n    equipements: 0\n  });\n  const isLoading = useRef(false); // INITIALISATION DE LA CARTE\n\n  const [carte, setCarte] = useState([[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]); // const [carte, setCarte] = useState([])\n\n  const [nbLignesGrille, setNbLignesGrille] = useState(0);\n  const [nbColonnesGrille, setNbColonnesGrille] = useState(0);\n  const [position, setPosition] = useState(null);\n  const [mursH, setMursH] = useState([[1, 1, 1, 1, 1, 1, 2, 6, 1, 1, 1, 1, 2, 5, 1, 1], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 2, 6, 1, 6, 2, 1, 1, 1, 5, 2, 1, 1], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 1, 1, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1]]);\n  const [mursV, setMursV] = useState([[1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], [2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], [5, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 2], [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 5]]);\n\n  const getNombreMarqueur = (mursH, mursV) => {\n    let nbMarqueur = 0;\n    mursH.forEach(ligne => {\n      ligne.forEach(valeur => {\n        if (valeur == 3) nbMarqueur = nbMarqueur + 1;\n        if (valeur == 4) nbMarqueur = nbMarqueur + 2;\n      });\n    });\n    mursV.forEach(ligne => {\n      ligne.forEach(valeur => {\n        if (valeur == 3) nbMarqueur = nbMarqueur + 1;\n        if (valeur == 4) nbMarqueur = nbMarqueur + 2;\n      });\n    });\n    return nbMarqueur;\n  }; // GET PLAY PARAMETERS \n\n\n  const getPlayState = async (session, equipe) => {\n    if (!isLoading.current) {\n      isLoading.current = true;\n      const currentPlayState = await PlayAPI.getPlayState(session, equipe);\n\n      if (Object.keys(currentPlayState).length > 0) {\n        // console.log(\"Get play state 2\")\n        console.log(parseInt(JSON.parse(currentPlayState)));\n        setCurrentTour(parseInt(JSON.parse(currentPlayState.currentTour.valeur)));\n        setCurrentCycle(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)));\n        setCurrentSequence(parseInt(JSON.parse(currentPlayState.currentSequence.valeur)));\n        const mursH = JSON.parse(currentPlayState.mursH.valeur);\n        const mursV = JSON.parse(currentPlayState.mursV.valeur);\n        setMursH(mursH);\n        setMursV(mursV);\n        setCarte(JSON.parse(currentPlayState.carte.valeur));\n        setResultats({\n          Decedes: parseInt(JSON.parse(currentPlayState.resultatsDecedes.valeur)),\n          Sauves: parseInt(JSON.parse(currentPlayState.resultatsSauves.valeur)),\n          Marqueur: getNombreMarqueur(mursH, mursV)\n        });\n      } // getPositionFromCarte(JSON.parse(currentPlayState.carte.valeur))\n\n\n      isLoading.current = false;\n    }\n  };\n\n  useEffect(() => {\n    // console.log(carte)\n    if (carte.length > 0) {\n      setNbLignesGrille(carte.length);\n      setNbColonnesGrille(carte[0].length);\n      setPosition([carte.length + 1, carte[0].length + 1]);\n    }\n  }, [carte]); // useEffect(() => {\n  //   console.log(currentTour)\n  // }, [currentTour])\n\n  useEffect(() => {\n    if (session != null && equipe != null && currentTour == null) {\n      if (!isLoading.current) getPlayState(session, equipe);\n      getPlayParameters(); // getPositionFromCarte()\n    }\n  }, [session, equipe, numPompier]);\n\n  const getPlayParameters = async () => {\n    const param = await PlayAPI.getConfiguration(session);\n    setConfiguration(param);\n    console.log(param);\n  };\n\n  const getBudgetTot = cycle => {\n    let sum = 0;\n\n    if (vue == \"interventions\") {\n      Object.keys(cycle).forEach(key => {\n        if (key != \"numCycle\" && key != \"numSeq\") {\n          sum += cycle[key];\n        }\n      });\n    } else {\n      Object.keys(cycle).forEach(key => {\n        if (key != \"numCycle\" && key != \"numSeq\") {\n          Object.values(cycle[key]).forEach(value => {\n            // console.log(couts.equipements[\"coutEq\"+key],\"coutEq\"+key,couts)\n            sum += value * couts.equipements[\"coutEq\" + key];\n          });\n        }\n      });\n    }\n\n    return sum;\n  };\n\n  const handleBudgetChange = (type, newBudget) => {\n    var bSim = { ...budgetSim\n    };\n    bSim[type] = newBudget;\n    setBudgetSim(bSim); // console.log(bSim)\n  };\n\n  const handleClicValidated = type => {\n    var v = { ...validated\n    };\n    validated[type] = true;\n    setValidated(validated);\n    var p = { ...page\n    };\n    if (type == \"interventions\") p[type] += 1;\n    if (type == \"equipements\") p[type] += 1;\n    setPage(p);\n    var c = { ...cycles\n    };\n    c[type].push(budgetSim[type]);\n    setCycles(c); // console.log(c[type])\n\n    var b = { ...budget\n    };\n    b[type].sequence.depense += getBudgetTot(budgetSim[type]);\n    setBudget(b);\n  }; // useEffect(() => {\n  //   console.log(budgetSim)\n  // }, [budgetSim])\n\n\n  const handleDisconnect = () => {\n    cookie.save('user', \"disconnected\", {\n      path: '/',\n      maxAge: 60 * 60 * 1.5 //sec\n\n    });\n    history.push('/login');\n  };\n\n  const [vue, setVue] = useState(\"interventions\");\n\n  const handleViewChange = (event, newValue) => {\n    if (newValue != null) {\n      setVue(newValue);\n    }\n  }; // useEffect(() => {\n  //   console.log(vue)\n  // }, [vue])\n\n\n  return carte.length > 0 && position != null ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(InterBandeauTop // stocks={stocks}\n    , {\n      numeroPompier: numPompier,\n      numEquipe: equipe,\n      sequence: currentSequence,\n      cycle: currentCycle,\n      tour: currentTour,\n      configuration: configuration // budget={budget}\n      ,\n      chrono: chrono,\n      handleViewChange: handleViewChange,\n      vue: vue,\n      interventionsValidated: validated.interventions,\n      equipementsValidated: validated.equipements\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 9\n    }, this), vue == \"operations\" ? /*#__PURE__*/_jsxDEV(Grille, {\n      nbColonnesGrille: nbColonnesGrille,\n      nbLignesGrille: nbLignesGrille,\n      carte: carte,\n      position: position,\n      mursH: mursH,\n      mursV: mursV\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 13\n    }, this) : null, vue == \"interventions\" ? /*#__PURE__*/_jsxDEV(InterInterventions, {\n      budget: budget.interventions,\n      cycles: [...cycles.interventions],\n      handleBudgetChange: handleBudgetChange,\n      type: \"interventions\",\n      currentCycle: currentCycle,\n      currentSequence: currentSequence,\n      budgetSim: budgetSim.interventions,\n      couts: couts,\n      nbCycleParSeq: configuration !== null ? configuration.nbCyclesParSequence.valeur : 0 // page={page.interventions}\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 13\n    }, this) : null, vue == \"equipements\" ? /*#__PURE__*/_jsxDEV(InterInterventions, {\n      budget: budget.equipements,\n      cycles: [...cycles.equipements],\n      handleBudgetChange: handleBudgetChange,\n      type: \"equipements\",\n      currentCycle: currentCycle,\n      currentSequence: currentSequence,\n      budgetSim: budgetSim.equipements,\n      couts: couts,\n      nbCycleParSeq: configuration !== null ? configuration.nbCyclesParSequence.valeur : 0 // page={page.equipements}\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 13\n    }, this) : null, /*#__PURE__*/_jsxDEV(InterBandeauBottom, {\n      numeroPompier: numPompier,\n      tour: currentTour,\n      resultats: resultats,\n      vue: vue,\n      couts: couts,\n      budget: vue === \"interventions\" ? budget.interventions : budget.equipements,\n      validated: vue === \"interventions\" ? validated.interventions : validated.equipements,\n      handleClicValidated: handleClicValidated,\n      equipe: equipe\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(InterBandeauDroite, {\n      handleDisconnect: handleDisconnect,\n      configuration: configuration\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 563,\n    columnNumber: 7\n  }, this) : null;\n};\n\n_s(InterInterface, \"eoc+dvMQeYi7bDT+GWiRV5ClJTg=\", false, function () {\n  return [useHistory];\n});\n\n_c = InterInterface;\nexport default InterInterface;\n\nvar _c;\n\n$RefreshReg$(_c, \"InterInterface\");","map":{"version":3,"sources":["C:/Users/hugod/dÃ©citude/client/src/routes/InterInterface.js"],"names":["React","useState","useEffect","useRef","PlayAPI","InterBandeauTop","InterBandeauBottom","Grille","InterInterventions","useHistory","cookie","InterBandeauDroite","InterInterface","history","user","load","undefined","push","numPompier","setNumPompier","currentTour","setCurrentTour","currentCycle","setCurrentCycle","currentSequence","setCurrentSequence","session","setSession","equipe","setEquipe","chrono","setChrono","configuration","setConfiguration","couts","interventions","coutInterDeplacement","coutInterFeu","coutInterFeuFum","coutInterFum","coutInterMarqueur","coutInterPorte","coutInterHab","equipements","coutEqFeu","coutEqFeuFum","coutEqFum","coutEqMarqueur","console","log","chronoTour","valeur","resultats","setResultats","Decedes","Sauves","Marqueur","budget","setBudget","sequence","total","depense","cycle","cycles","setCycles","numSeq","numCycle","pomp1","pomp2","pomp3","pomp4","pomp5","pomp6","Feu","FeuFum","Fum","budgetSim","setBudgetSim","length","validated","setValidated","page","setPage","isLoading","carte","setCarte","nbLignesGrille","setNbLignesGrille","nbColonnesGrille","setNbColonnesGrille","position","setPosition","mursH","setMursH","mursV","setMursV","getNombreMarqueur","nbMarqueur","forEach","ligne","getPlayState","current","currentPlayState","Object","keys","parseInt","JSON","parse","resultatsDecedes","resultatsSauves","getPlayParameters","param","getConfiguration","getBudgetTot","sum","vue","key","values","value","handleBudgetChange","type","newBudget","bSim","handleClicValidated","v","p","c","b","handleDisconnect","save","path","maxAge","setVue","handleViewChange","event","newValue","nbCyclesParSequence"],"mappings":"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","sourcesContent":["import \"../styles/App.css\"\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport PlayAPI from \"../API/PlayAPI\"\r\nimport InterBandeauTop from \"../components/interfaceJoueur/InterBandeauTop\"\r\nimport InterBandeauBottom from \"../components/interfaceJoueur/InterBandeauBottom\"\r\nimport Grille from \"../components/interfaceJoueur/Grille\"\r\nimport InterInterventions from \"../components/interfaceJoueur/InterInterventions\"\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nimport cookie from 'react-cookies'\r\nimport InterBandeauDroite from \"../components/interfaceJoueur/InterBandeauDroite\"\r\n\r\n\r\nconst InterInterface = () => {\r\n\r\n  const history = useHistory()\r\n\r\n  const user = cookie.load(\"user\")\r\n  // console.log(user)\r\n  if(user==null || user==undefined) history.push(\"/login\");\r\n\r\n\r\n\r\n  const [numPompier, setNumPompier] = useState(0)\r\n  const [currentTour, setCurrentTour] = useState(null)\r\n  const [currentCycle, setCurrentCycle] = useState(null)\r\n  const [currentSequence,setCurrentSequence]=useState(null)\r\n  // const [currentCycle, setCurrentCycle] = useState(1)\r\n  // const [currentTour, setCurrentTour] = useState(0)\r\n  const [session,setSession]=useState(user.session)\r\n  const [equipe,setEquipe]=useState(user.equipe)\r\n  // const [session, setSession] = useState(1)\r\n  // const [equipe, setEquipe] = useState(1)\r\n  const [chrono, setChrono] = useState(null)\r\n\r\n  useEffect(() => {\r\n    // console.log(chrono)\r\n    // if (currentTour == numPompier) {\r\n    //   if (chrono > 0) {\r\n\r\n    //     var chronoTimer = setInterval(() => {\r\n    //       setChrono(chrono => chrono - 1)\r\n\r\n    //     }, 1000)\r\n\r\n    //   }\r\n    //   return () => {\r\n    //     clearInterval(chronoTimer)\r\n    //   }\r\n    // }\r\n  }, [chrono])\r\n\r\n\r\n\r\n  const [configuration, setConfiguration] = useState(null)\r\n  // const [configuration, setConfiguration] = useState({\r\n  //   chronoTour: { valeur: 40 },\r\n  //   nbSequences: { valeur: 4 },\r\n  //   nbCyclesParSequence: { valeur: 2 },\r\n  //   nbPompEquipe: { valeur: 6 }\r\n  // })\r\n  // const nbCycleParSeq = 2\r\n\r\n\r\n  const couts = {\r\n    interventions: {\r\n      coutInterDeplacement: 100,\r\n      coutInterFeu: 200,\r\n      coutInterFeuFum: 100,\r\n      coutInterFum: 100,\r\n      coutInterMarqueur: 100,\r\n      coutInterPorte: 100,\r\n      coutInterHab: 100,\r\n    },\r\n    equipements: {\r\n\r\n      coutEqFeu: 200,\r\n      coutEqFeuFum: 100,\r\n      coutEqFum: 100,\r\n      coutEqMarqueur: 100,\r\n\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(configuration)\r\n    if (configuration != null) {\r\n      setChrono(configuration.chronoTour.valeur)\r\n    }\r\n  }, [configuration])\r\n\r\n  // const [stocks, setStocks] = useState({\r\n  //   Interventions: 10,\r\n  //   Feu: 1,\r\n  //   FeuFum: 10,\r\n  //   Fum: 10,\r\n  //   Marqueur: 10,\r\n  // })\r\n\r\n  const [resultats, setResultats] = useState({\r\n    Decedes: 1,\r\n    Sauves: 2,\r\n    Marqueur: 3\r\n  })\r\n\r\n  // const [interventions, setInterventions] = useState({\r\n  //   Deplacement: 0,\r\n  //   Feu: 0,\r\n  //   FeuFum: 0,\r\n  //   Fum: 0,\r\n  //   Marqueur: 0,\r\n  //   Porte: 0,\r\n  //   Habitant: 0\r\n  // })\r\n\r\n  const [budget, setBudget] = useState({\r\n    interventions: {\r\n      sequence: {\r\n        total: 500,\r\n        depense: 100\r\n      },\r\n      cycle: {\r\n        total: 100,\r\n        depense: 50\r\n      }\r\n    },\r\n    equipements: {\r\n      sequence: {\r\n        total: 300,\r\n        depense: 200\r\n      },\r\n      cycle: {\r\n        total: 200,\r\n        depense: 100\r\n      }\r\n    }\r\n  })\r\n  const [cycles, setCycles] = useState({\r\n    interventions: [\r\n      {\r\n        numSeq: 1,\r\n        numCycle: 1,\r\n        pomp1: 100,\r\n        pomp2: 100,\r\n        pomp3: 100,\r\n        pomp4: 100,\r\n        pomp5: 100,\r\n        pomp6: 100,\r\n      },\r\n      {\r\n        numSeq: 1,\r\n        numCycle: 2,\r\n        pomp1: 300,\r\n        pomp2: 300,\r\n        pomp3: 300,\r\n        pomp4: 300,\r\n        pomp5: 300,\r\n        pomp6: 300\r\n      },\r\n      // {\r\n      //   numSeq: 2,\r\n      //   numCycle: 1,\r\n      //   pomp1: 400,\r\n      //   pomp2: 400,\r\n      //   pomp3: 400,\r\n      //   pomp4: 400,\r\n      //   pomp5: 400,\r\n      //   pomp6: 400,\r\n      // },\r\n      // {\r\n      //   numSeq: 2,\r\n      //   numCycle: 2,\r\n      //   pomp1: 500,\r\n      //   pomp2: 500,\r\n      //   pomp3: 500,\r\n      //   pomp4: 500,\r\n      //   pomp5: 500,\r\n      //   pomp6: 500,\r\n      // },\r\n      // {\r\n      //   numSeq: 3,\r\n      //   numCycle: 1,\r\n      //   pomp1: 600,\r\n      //   pomp2: 600,\r\n      //   pomp3: 600,\r\n      //   pomp4: 600,\r\n      //   pomp5: 600,\r\n      //   pomp6: 600,\r\n      // },\r\n      // {\r\n      //   numSeq: 3,\r\n      //   numCycle: 2,\r\n      //   pomp1: 700,\r\n      //   pomp2: 700,\r\n      //   pomp3: 700,\r\n      //   pomp4: 700,\r\n      //   pomp5: 700,\r\n      //   pomp6: 700,\r\n      // },\r\n\r\n    ]\r\n    ,\r\n    equipements: [\r\n      {\r\n        numSeq: 1,\r\n        numCycle: 1,\r\n        Feu: {\r\n          pomp1: 1,\r\n          pomp2: 2,\r\n          pomp3: 3,\r\n          pomp4: 4,\r\n          pomp5: 5,\r\n          pomp6: 6,\r\n        },\r\n        FeuFum: {\r\n          pomp1: 7,\r\n          pomp2: 8,\r\n          pomp3: 9,\r\n          pomp4: 10,\r\n          pomp5: 11,\r\n          pomp6: 12,\r\n        },\r\n        Fum: {\r\n          pomp1: 13,\r\n          pomp2: 14,\r\n          pomp3: 15,\r\n          pomp4: 16,\r\n          pomp5: 17,\r\n          pomp6: 18,\r\n        },\r\n        Marqueur: {\r\n          pomp1: 19,\r\n          pomp2: 20,\r\n          pomp3: 21,\r\n          pomp4: 22,\r\n          pomp5: 23,\r\n          pomp6: 24,\r\n        },\r\n      },\r\n      {\r\n        numSeq: 1,\r\n        numCycle: 2,\r\n        Feu: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0,\r\n        },\r\n        FeuFum: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0,\r\n        },\r\n        Fum: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0,\r\n        },\r\n        Marqueur: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0,\r\n        },\r\n      }\r\n\r\n    ]\r\n  }\r\n  )\r\n\r\n  const [budgetSim, setBudgetSim] = useState({\r\n  })\r\n\r\n\r\n  useEffect(() => {\r\n    // const c = cycles.interventions.sort((a,b)=>a.numSeq-b.numSeq)\r\n    // console.log(c)\r\n\r\n    // console.log(\"last cycle\",{\r\n    //   numSeq:cycles.interventions.length>1 ? cycles.interventions.length%2 == 0  ? cycles.interventions[cycles.interventions.length -1].numSeq +1 : cycles.interventions[cycles.interventions.length -1].numSeq : 1 ,\r\n    //   numCycle: (cycles.interventions.length)%2+1})\r\n\r\n    setBudgetSim({\r\n      interventions: {\r\n        numSeq:cycles.interventions.length>1 ? cycles.interventions.length%2 == 0  ? cycles.interventions[cycles.interventions.length -1].numSeq +1 : cycles.interventions[cycles.interventions.length -1].numSeq : 1 ,\r\n        numCycle: (cycles.interventions.length)%2+1,\r\n        pomp1: 0,\r\n        pomp2: 0,\r\n        pomp3: 0,\r\n        pomp4: 0,\r\n        pomp5: 0,\r\n        pomp6: 0,\r\n      },\r\n      equipements: {\r\n        numSeq:cycles.equipements.length>1 ? cycles.equipements.length%2 == 0  ? cycles.equipements[cycles.equipements.length -1].numSeq +1 : cycles.equipements[cycles.equipements.length -1].numSeq : 1 ,\r\n        numCycle: (cycles.equipements.length)%2+1,\r\n        Feu: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0,\r\n        },\r\n        FeuFum: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0,\r\n        },\r\n        Fum: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0\r\n        },\r\n        Marqueur: {\r\n          pomp1: 0,\r\n          pomp2: 0,\r\n          pomp3: 0,\r\n          pomp4: 0,\r\n          pomp5: 0,\r\n          pomp6: 0,\r\n        },\r\n      },\r\n    })\r\n\r\n    // console.log(cycles.equipements)\r\n  }, [cycles])\r\n\r\n  const [validated, setValidated] = useState({\r\n    interventions: false,\r\n    equipements: false\r\n  })\r\n  const [page, setPage] = useState({\r\n    interventions: 0,\r\n    equipements: 0\r\n  })\r\n\r\n\r\n\r\n\r\n  const isLoading = useRef(false)\r\n\r\n  // INITIALISATION DE LA CARTE\r\n\r\n  const [carte, setCarte] = useState([\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n  ])\r\n\r\n  // const [carte, setCarte] = useState([])\r\n\r\n  const [nbLignesGrille, setNbLignesGrille] = useState(0)\r\n  const [nbColonnesGrille, setNbColonnesGrille] = useState(0)\r\n  const [position, setPosition] = useState(null)\r\n\r\n\r\n  const [mursH, setMursH] = useState([\r\n    [1, 1, 1, 1, 1, 1, 2, 6, 1, 1, 1, 1, 2, 5, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 2, 6, 1, 6, 2, 1, 1, 1, 5, 2, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1]\r\n  ])\r\n\r\n  const [mursV, setMursV] = useState([\r\n    [1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [5, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 2],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 5]\r\n  ])\r\n\r\n\r\n  const getNombreMarqueur = (mursH, mursV) => {\r\n    let nbMarqueur = 0\r\n    mursH.forEach(ligne => {\r\n      ligne.forEach(valeur => {\r\n        if (valeur == 3) nbMarqueur = nbMarqueur + 1\r\n        if (valeur == 4) nbMarqueur = nbMarqueur + 2\r\n      })\r\n    })\r\n    mursV.forEach(ligne => {\r\n      ligne.forEach(valeur => {\r\n        if (valeur == 3) nbMarqueur = nbMarqueur + 1\r\n        if (valeur == 4) nbMarqueur = nbMarqueur + 2\r\n      })\r\n    })\r\n    return nbMarqueur\r\n  }\r\n\r\n  // GET PLAY PARAMETERS \r\n  const getPlayState=async(session,equipe)=>{\r\n    if(!isLoading.current){\r\n      isLoading.current=true\r\n      const currentPlayState = await PlayAPI.getPlayState(session,equipe)\r\n\r\n      if(Object.keys(currentPlayState).length>0 ){\r\n        // console.log(\"Get play state 2\")\r\n        console.log(parseInt(JSON.parse(currentPlayState)))\r\n\r\n        setCurrentTour(parseInt(JSON.parse(currentPlayState.currentTour.valeur)))\r\n        setCurrentCycle(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)))\r\n        setCurrentSequence(parseInt(JSON.parse(currentPlayState.currentSequence.valeur)))\r\n        const mursH=JSON.parse(currentPlayState.mursH.valeur)\r\n        const mursV=JSON.parse(currentPlayState.mursV.valeur)\r\n        setMursH(mursH)\r\n        setMursV(mursV)\r\n        setCarte(JSON.parse(currentPlayState.carte.valeur))\r\n        setResultats({\r\n          Decedes:parseInt(JSON.parse(currentPlayState.resultatsDecedes.valeur)),\r\n          Sauves:parseInt(JSON.parse(currentPlayState.resultatsSauves.valeur)),\r\n          Marqueur:getNombreMarqueur(mursH,mursV)\r\n        })\r\n      }\r\n      // getPositionFromCarte(JSON.parse(currentPlayState.carte.valeur))\r\n      isLoading.current=false\r\n    }\r\n\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    // console.log(carte)\r\n    if (carte.length > 0) {\r\n      setNbLignesGrille(carte.length)\r\n      setNbColonnesGrille(carte[0].length)\r\n      setPosition([carte.length + 1, carte[0].length + 1])\r\n    }\r\n\r\n  }, [carte])\r\n\r\n  // useEffect(() => {\r\n  //   console.log(currentTour)\r\n  // }, [currentTour])\r\n\r\n\r\n  useEffect(()=>{\r\n    if(session!=null && equipe!=null && currentTour==null){\r\n      if(!isLoading.current) getPlayState(session,equipe)\r\n      getPlayParameters()\r\n      // getPositionFromCarte()\r\n    }\r\n  },[session,equipe,numPompier])\r\n\r\n  const getPlayParameters = async () => {\r\n    const param = await PlayAPI.getConfiguration(session)\r\n    setConfiguration(param)\r\n    console.log(param)\r\n  }\r\n\r\n\r\n\r\n\r\n  const getBudgetTot = (cycle) => {\r\n    let sum = 0\r\n    if(vue==\"interventions\"){\r\n      Object.keys(cycle).forEach((key) => {\r\n        if (key != \"numCycle\" && key != \"numSeq\") {\r\n          sum += cycle[key]\r\n        }\r\n      })\r\n    }else{\r\n      Object.keys(cycle).forEach((key) => {\r\n        if (key != \"numCycle\" && key != \"numSeq\") {\r\n          Object.values(cycle[key]).forEach(value => {\r\n            // console.log(couts.equipements[\"coutEq\"+key],\"coutEq\"+key,couts)\r\n            sum += value*couts.equipements[\"coutEq\"+key]\r\n          });\r\n        }\r\n      })\r\n    }\r\n    return sum\r\n  }\r\n\r\n\r\n  const handleBudgetChange = (type, newBudget) => {\r\n    var bSim = { ...budgetSim }\r\n    bSim[type] = newBudget\r\n    setBudgetSim(bSim)\r\n    // console.log(bSim)\r\n  }\r\n\r\n  const handleClicValidated = (type) => {\r\n    var v = { ...validated }\r\n    validated[type] = true\r\n    setValidated(validated)\r\n\r\n    var p = {...page}\r\n    if(type==\"interventions\") p[type]+=1\r\n    if(type==\"equipements\")  p[type]+=1\r\n    setPage(p)\r\n\r\n    var c = { ...cycles }\r\n    c[type].push(budgetSim[type])\r\n    setCycles(c)\r\n\r\n    // console.log(c[type])\r\n    var b = { ...budget }\r\n    b[type].sequence.depense += getBudgetTot(budgetSim[type])\r\n    setBudget(b)\r\n\r\n  }\r\n\r\n  // useEffect(() => {\r\n  //   console.log(budgetSim)\r\n  // }, [budgetSim])\r\n\r\n  const handleDisconnect=()=>{\r\n    cookie.save('user', \"disconnected\", { \r\n      path: '/',\r\n      maxAge: 60*60*1.5, //sec\r\n    })\r\n    history.push('/login');\r\n  }\r\n\r\n\r\n  const [vue, setVue] = useState(\"interventions\")\r\n\r\n  const handleViewChange = (event, newValue) => {\r\n    if (newValue != null) {\r\n      setVue(newValue)\r\n    }\r\n  }\r\n  // useEffect(() => {\r\n  //   console.log(vue)\r\n  // }, [vue])\r\n\r\n\r\n  return (\r\n\r\n    carte.length > 0 && position != null ?\r\n\r\n      <div>\r\n        <InterBandeauTop\r\n          // stocks={stocks}\r\n          numeroPompier={numPompier}\r\n          numEquipe={equipe}\r\n          sequence={currentSequence}\r\n          cycle={currentCycle}\r\n          tour={currentTour}\r\n          configuration={configuration}\r\n          // budget={budget}\r\n          chrono={chrono}\r\n          handleViewChange={handleViewChange}\r\n          vue={vue}\r\n          interventionsValidated={validated.interventions}\r\n          equipementsValidated={validated.equipements}\r\n        />\r\n        {\r\n          vue == \"operations\" ?\r\n            <Grille\r\n              nbColonnesGrille={nbColonnesGrille}\r\n              nbLignesGrille={nbLignesGrille}\r\n              carte={carte}\r\n              position={position}\r\n              mursH={mursH}\r\n              mursV={mursV}\r\n            />\r\n            : null\r\n        }\r\n\r\n\r\n        {\r\n          vue == \"interventions\" ?\r\n\r\n            <InterInterventions\r\n              budget={budget.interventions}\r\n              cycles={[...cycles.interventions]}\r\n              handleBudgetChange={handleBudgetChange}\r\n              type=\"interventions\"\r\n              currentCycle={currentCycle}\r\n              currentSequence={currentSequence}\r\n              budgetSim={budgetSim.interventions}\r\n              couts={couts}\r\n              nbCycleParSeq={configuration!==null ? configuration.nbCyclesParSequence.valeur : 0}\r\n              // page={page.interventions}\r\n            />\r\n            : null\r\n        }\r\n\r\n        {\r\n          vue == \"equipements\" ?\r\n\r\n            <InterInterventions\r\n              budget={budget.equipements}\r\n              cycles={[...cycles.equipements]}\r\n              handleBudgetChange={handleBudgetChange}\r\n              type=\"equipements\"\r\n              currentCycle={currentCycle}\r\n              currentSequence={currentSequence}\r\n              budgetSim={budgetSim.equipements}\r\n              couts={couts}\r\n              nbCycleParSeq={configuration!==null ? configuration.nbCyclesParSequence.valeur : 0}\r\n              // page={page.equipements}\r\n            />\r\n            : null\r\n        }\r\n\r\n\r\n        \r\n\r\n        <InterBandeauBottom\r\n          numeroPompier={numPompier}\r\n          tour={currentTour}\r\n          resultats={resultats}\r\n          vue={vue}\r\n          couts={couts}\r\n          budget={vue === \"interventions\" ? budget.interventions : budget.equipements}\r\n          validated={vue === \"interventions\" ? validated.interventions : validated.equipements}\r\n          handleClicValidated={handleClicValidated}\r\n          equipe={equipe}\r\n        />\r\n        <InterBandeauDroite\r\n            handleDisconnect={handleDisconnect}\r\n            configuration={configuration}\r\n          />\r\n      </div>\r\n      : null\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default InterInterface;\r\n\r\n"]},"metadata":{},"sourceType":"module"}