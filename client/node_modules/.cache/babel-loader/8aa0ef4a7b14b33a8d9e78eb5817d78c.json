{"ast":null,"code":"import io from 'socket.io-client';\nimport { getPlayState } from '../../../server/controllers/libs';\nconst urlBack = \"http://localhost:4000\";\nconst socket = io.connect(urlBack);\nexport default {\n  nouveauTour: async (currentPomp, carte, mursH, mursV, currentSequence, currentCycle, currentTour, resultatsDecedes, resultatsSauves, session, equipe) => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        carte: carte,\n        mursH: mursH,\n        mursV: mursV,\n        currentPomp: currentPomp,\n        currentSequence: currentSequence,\n        currentCycle: currentCycle,\n        currentTour: currentTour,\n        resultatsDecedes: resultatsDecedes,\n        resultatsSauves: resultatsSauves,\n        session: session,\n        equipe: equipe\n      })\n    };\n    socket.emit('changementTour', {\n      currentSequence: parseInt(currentSequence),\n      currentPomp: parseInt(currentPomp),\n      currentTour: parseInt(currentTour),\n      currentCycle: parseInt(currentCycle)\n    });\n    const response = await fetch(urlBack + \"/nouveauTour\", requestOptions);\n    return await response.json();\n  },\n  getSocket: () => {\n    return socket;\n  },\n  getConfiguration: async session => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        session: session\n      })\n    };\n    const response = await fetch(urlBack + \"/configuration\", requestOptions);\n    return await response.json();\n  },\n  getPlayState: async (session, equipe) => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        session: session,\n        equipe: equipe\n      })\n    };\n    const response = await fetch(urlBack + \"/playstate\", requestOptions);\n    return await response.json();\n  },\n  revealHabitant: async (position, type) => {\n    // console.log(position[0])\n    socket.emit('revealHabitant', {\n      y: parseInt(position[0]),\n      x: parseInt(position[1]),\n      type: parseInt(type)\n    });\n    console.log(\"socket emit\");\n  },\n  saveBudgetsInit: async (cycles, session, equipe) => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        cycles: cycles,\n        session: session,\n        equipe: equipe\n      })\n    };\n    const response = await fetch(urlBack + \"/saveBudgetsInit\", requestOptions);\n    return await response.json();\n  },\n  saveBudgetFin: async (budget, stocks, numPompier, session, equipe) => {\n    const playState = await getPlayState(session, equipe);\n    console.log(JSON.parse(playState.budgetsFin.valeur));\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        budget: budget,\n        stocks: stocks,\n        numPompier: numPompier,\n        session: session,\n        equipe: equipe\n      })\n    };\n    const response = await fetch(urlBack + \"/saveBudgetFin\", requestOptions);\n    return await response.json();\n  },\n  getBudgetInit: async (session, equipe, numPompier, currentCycle, currentSequence) => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        session: session,\n        equipe: equipe,\n        numPompier: numPompier,\n        cycle: currentCycle,\n        sequence: currentSequence\n      })\n    };\n    const response = await fetch(urlBack + \"/budgetInit\", requestOptions);\n    return await response.json();\n  },\n  getBudgetFin: async (session, equipe, numPompier, currentCycle, currentSequence) => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        session: session,\n        equipe: equipe,\n        numPompier: numPompier,\n        cycle: currentCycle,\n        sequence: currentSequence\n      })\n    };\n    const response = await fetch(urlBack + \"/budgetFin\", requestOptions);\n    return await response.json();\n  }\n};","map":{"version":3,"sources":["C:/Users/hugod/decitude/client/src/API/PlayAPI.js"],"names":["io","getPlayState","urlBack","socket","connect","nouveauTour","currentPomp","carte","mursH","mursV","currentSequence","currentCycle","currentTour","resultatsDecedes","resultatsSauves","session","equipe","requestOptions","method","headers","body","JSON","stringify","emit","parseInt","response","fetch","json","getSocket","getConfiguration","revealHabitant","position","type","y","x","console","log","saveBudgetsInit","cycles","saveBudgetFin","budget","stocks","numPompier","playState","parse","budgetsFin","valeur","getBudgetInit","cycle","sequence","getBudgetFin"],"mappings":"AACA,OAAOA,EAAP,MAAe,kBAAf;AACA,SAASC,YAAT,QAA6B,kCAA7B;AAEA,MAAMC,OAAO,GAAG,uBAAhB;AACA,MAAMC,MAAM,GAAGH,EAAE,CAACI,OAAH,CAAWF,OAAX,CAAf;AAEA,eAAe;AAEXG,EAAAA,WAAW,EAAC,OAAMC,WAAN,EAAkBC,KAAlB,EAAwBC,KAAxB,EAA8BC,KAA9B,EAAoCC,eAApC,EAAoDC,YAApD,EAAiEC,WAAjE,EAA6EC,gBAA7E,EAA8FC,eAA9F,EAA8GC,OAA9G,EAAsHC,MAAtH,KAA+H;AAEvI,UAAMC,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBf,QAAAA,KAAK,EAACA,KADW;AAEjBC,QAAAA,KAAK,EAACA,KAFW;AAGjBC,QAAAA,KAAK,EAACA,KAHW;AAIjBH,QAAAA,WAAW,EAACA,WAJK;AAKjBI,QAAAA,eAAe,EAACA,eALC;AAMjBC,QAAAA,YAAY,EAACA,YANI;AAOjBC,QAAAA,WAAW,EAACA,WAPK;AAQjBC,QAAAA,gBAAgB,EAACA,gBARA;AASjBC,QAAAA,eAAe,EAACA,eATC;AAUjBC,QAAAA,OAAO,EAACA,OAVS;AAWjBC,QAAAA,MAAM,EAACA;AAXU,OAAf;AAHa,KAAvB;AAiBAb,IAAAA,MAAM,CAACoB,IAAP,CACI,gBADJ,EAEI;AACIb,MAAAA,eAAe,EAACc,QAAQ,CAACd,eAAD,CAD5B;AAEIJ,MAAAA,WAAW,EAAEkB,QAAQ,CAAClB,WAAD,CAFzB;AAGIM,MAAAA,WAAW,EAAEY,QAAQ,CAACZ,WAAD,CAHzB;AAIID,MAAAA,YAAY,EAAEa,QAAQ,CAACb,YAAD;AAJ1B,KAFJ;AAUA,UAAMc,QAAQ,GAAG,MAAOC,KAAK,CAACxB,OAAO,GAAC,cAAT,EAAyBe,cAAzB,CAA7B;AAGA,WAAO,MAAMQ,QAAQ,CAACE,IAAT,EAAb;AAEH,GApCU;AAqCXC,EAAAA,SAAS,EAAC,MAAI;AACV,WAAOzB,MAAP;AACH,GAvCU;AAwCX0B,EAAAA,gBAAgB,EAAC,MAAMd,OAAN,IAAgB;AAC7B,UAAME,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACP,QAAAA,OAAO,EAACA;AAAT,OAAf;AAHa,KAAvB;AAKA,UAAMU,QAAQ,GAAG,MAAOC,KAAK,CAACxB,OAAO,GAAC,gBAAT,EAA2Be,cAA3B,CAA7B;AACA,WAAQ,MAAMQ,QAAQ,CAACE,IAAT,EAAd;AACH,GAhDU;AAiDX1B,EAAAA,YAAY,EAAC,OAAMc,OAAN,EAAcC,MAAd,KAAuB;AAChC,UAAMC,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBP,QAAAA,OAAO,EAACA,OADS;AAEjBC,QAAAA,MAAM,EAACA;AAFU,OAAf;AAHa,KAAvB;AAQA,UAAMS,QAAQ,GAAG,MAAOC,KAAK,CAACxB,OAAO,GAAC,YAAT,EAAuBe,cAAvB,CAA7B;AACA,WAAQ,MAAMQ,QAAQ,CAACE,IAAT,EAAd;AACH,GA5DU;AA6DXG,EAAAA,cAAc,EAAC,OAAMC,QAAN,EAAeC,IAAf,KAAsB;AACjC;AACA7B,IAAAA,MAAM,CAACoB,IAAP,CACI,gBADJ,EAEI;AACIU,MAAAA,CAAC,EAACT,QAAQ,CAACO,QAAQ,CAAC,CAAD,CAAT,CADd;AAEIG,MAAAA,CAAC,EAACV,QAAQ,CAACO,QAAQ,CAAC,CAAD,CAAT,CAFd;AAGIC,MAAAA,IAAI,EAACR,QAAQ,CAACQ,IAAD;AAHjB,KAFJ;AAQAG,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACH,GAxEU;AAyEXC,EAAAA,eAAe,EAAC,OAAMC,MAAN,EAAavB,OAAb,EAAqBC,MAArB,KAA8B;AAC1C,UAAMC,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBgB,QAAAA,MAAM,EAACA,MADU;AAEjBvB,QAAAA,OAAO,EAACA,OAFS;AAGjBC,QAAAA,MAAM,EAACA;AAHU,OAAf;AAHa,KAAvB;AAUA,UAAMS,QAAQ,GAAG,MAAOC,KAAK,CAACxB,OAAO,GAAC,kBAAT,EAA6Be,cAA7B,CAA7B;AAGA,WAAO,MAAMQ,QAAQ,CAACE,IAAT,EAAb;AACH,GAxFU;AAyFXY,EAAAA,aAAa,EAAC,OAAMC,MAAN,EAAaC,MAAb,EAAoBC,UAApB,EAAgC3B,OAAhC,EAAwCC,MAAxC,KAAiD;AAC3D,UAAM2B,SAAS,GAAG,MAAM1C,YAAY,CAACc,OAAD,EAASC,MAAT,CAApC;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAYf,IAAI,CAACuB,KAAL,CAAWD,SAAS,CAACE,UAAV,CAAqBC,MAAhC,CAAZ;AACA,UAAM7B,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBkB,QAAAA,MAAM,EAACA,MADU;AAEjBC,QAAAA,MAAM,EAACA,MAFU;AAGjBC,QAAAA,UAAU,EAACA,UAHM;AAIjB3B,QAAAA,OAAO,EAACA,OAJS;AAKjBC,QAAAA,MAAM,EAACA;AALU,OAAf;AAHa,KAAvB;AAaA,UAAMS,QAAQ,GAAG,MAAOC,KAAK,CAACxB,OAAO,GAAC,gBAAT,EAA2Be,cAA3B,CAA7B;AAGA,WAAO,MAAMQ,QAAQ,CAACE,IAAT,EAAb;AACH,GA7GU;AA8GXoB,EAAAA,aAAa,EAAC,OAAMhC,OAAN,EAAcC,MAAd,EAAqB0B,UAArB,EAAgC/B,YAAhC,EAA6CD,eAA7C,KAA+D;AACzE,UAAMO,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBP,QAAAA,OAAO,EAACA,OADS;AAEjBC,QAAAA,MAAM,EAACA,MAFU;AAGjB0B,QAAAA,UAAU,EAACA,UAHM;AAIjBM,QAAAA,KAAK,EAACrC,YAJW;AAKjBsC,QAAAA,QAAQ,EAACvC;AALQ,OAAf;AAHa,KAAvB;AAYA,UAAMe,QAAQ,GAAG,MAAOC,KAAK,CAACxB,OAAO,GAAC,aAAT,EAAwBe,cAAxB,CAA7B;AAGA,WAAO,MAAMQ,QAAQ,CAACE,IAAT,EAAb;AACH,GA/HU;AAgIXuB,EAAAA,YAAY,EAAC,OAAMnC,OAAN,EAAcC,MAAd,EAAqB0B,UAArB,EAAgC/B,YAAhC,EAA6CD,eAA7C,KAA+D;AACxE,UAAMO,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBP,QAAAA,OAAO,EAACA,OADS;AAEjBC,QAAAA,MAAM,EAACA,MAFU;AAGjB0B,QAAAA,UAAU,EAACA,UAHM;AAIjBM,QAAAA,KAAK,EAACrC,YAJW;AAKjBsC,QAAAA,QAAQ,EAACvC;AALQ,OAAf;AAHa,KAAvB;AAYA,UAAMe,QAAQ,GAAG,MAAOC,KAAK,CAACxB,OAAO,GAAC,YAAT,EAAuBe,cAAvB,CAA7B;AAGA,WAAO,MAAMQ,QAAQ,CAACE,IAAT,EAAb;AACH;AAjJU,CAAf","sourcesContent":["\nimport io from 'socket.io-client'\nimport { getPlayState } from '../../../server/controllers/libs';\n\nconst urlBack = \"http://localhost:4000\";\nconst socket = io.connect(urlBack)\n\nexport default {\n   \n    nouveauTour:async(currentPomp,carte,mursH,mursV,currentSequence,currentCycle,currentTour,resultatsDecedes,resultatsSauves,session,equipe)=>{\n        \n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                carte:carte,\n                mursH:mursH,\n                mursV:mursV,\n                currentPomp:currentPomp,\n                currentSequence:currentSequence,\n                currentCycle:currentCycle,\n                currentTour:currentTour,\n                resultatsDecedes:resultatsDecedes,\n                resultatsSauves:resultatsSauves,\n                session:session,\n                equipe:equipe\n            })\n        };\n        socket.emit(\n            'changementTour',\n            {\n                currentSequence:parseInt(currentSequence),\n                currentPomp :parseInt(currentPomp),\n                currentTour :parseInt(currentTour),\n                currentCycle :parseInt(currentCycle),\n            }\n        )\n        \n        const response = await  fetch(urlBack+\"/nouveauTour\", requestOptions)\n\n      \n        return await response.json()\n        \n    },\n    getSocket:()=>{\n        return socket\n    },\n    getConfiguration:async(session)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({session:session})\n        };\n        const response = await  fetch(urlBack+\"/configuration\", requestOptions)\n        return  await response.json()\n    },\n    getPlayState:async(session,equipe)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session,\n                equipe:equipe\n            })\n        };\n        const response = await  fetch(urlBack+\"/playstate\", requestOptions)\n        return  await response.json()\n    },\n    revealHabitant:async(position,type)=>{\n        // console.log(position[0])\n        socket.emit(\n            'revealHabitant',\n            {\n                y:parseInt(position[0]),\n                x:parseInt(position[1]),\n                type:parseInt(type)\n            }\n        )\n        console.log(\"socket emit\")\n    },\n    saveBudgetsInit:async(cycles,session,equipe)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                cycles:cycles,\n                session:session,\n                equipe:equipe\n            })\n        };\n        \n        const response = await  fetch(urlBack+\"/saveBudgetsInit\", requestOptions)\n\n      \n        return await response.json()\n    },\n    saveBudgetFin:async(budget,stocks,numPompier, session,equipe)=>{\n        const playState = await getPlayState(session,equipe)\n        console.log(JSON.parse(playState.budgetsFin.valeur))\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                budget:budget,\n                stocks:stocks,\n                numPompier:numPompier,\n                session:session,\n                equipe:equipe\n            })\n        };\n        \n\n        const response = await  fetch(urlBack+\"/saveBudgetFin\", requestOptions)\n\n      \n        return await response.json()\n    },\n    getBudgetInit:async(session,equipe,numPompier,currentCycle,currentSequence)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session,\n                equipe:equipe,\n                numPompier:numPompier,\n                cycle:currentCycle,\n                sequence:currentSequence\n            })\n        };\n        \n        const response = await  fetch(urlBack+\"/budgetInit\", requestOptions)\n\n      \n        return await response.json()\n    },\n    getBudgetFin:async(session,equipe,numPompier,currentCycle,currentSequence)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session,\n                equipe:equipe,\n                numPompier:numPompier,\n                cycle:currentCycle,\n                sequence:currentSequence\n            })\n        };\n        \n        const response = await  fetch(urlBack+\"/budgetFin\", requestOptions)\n\n      \n        return await response.json()\n    },\n    \n};\n"]},"metadata":{},"sourceType":"module"}