{"ast":null,"code":"import _slicedToArray from\"C:/Users/hugod/decitude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{makeStyles}from'@material-ui/core/styles';import CasePiece from\"./CasePiece\";import{useScrollTrigger}from'@material-ui/core';import{jsx as _jsx}from\"react/jsx-runtime\";var Piece=function Piece(_ref){var carte=_ref.carte,position=_ref.position,nbLignesGrille=_ref.nbLignesGrille,nbColonnesGrille=_ref.nbColonnesGrille,nbLignesPiece=_ref.nbLignesPiece,nbColonnesPiece=_ref.nbColonnesPiece,mursV=_ref.mursV,mursH=_ref.mursH,anchor=_ref.anchor,maxLignesPiece=_ref.maxLignesPiece,maxColonnesPiece=_ref.maxColonnesPiece,propositionMursDetruire=_ref.propositionMursDetruire,handleClicMur=_ref.handleClicMur,handleClicCase=_ref.handleClicCase,propositionsCase=_ref.propositionsCase,anchors=_ref.anchors,deplacementEnCours=_ref.deplacementEnCours,getAnchor=_ref.getAnchor;// console.log(\"Grille nb lignes : \"+nbLignesGrille+\", colonnes : \"+nbColonnesGrille+\" | piece lignes : \"+nbLignesPiece+\",  colonnes \"+nbColonnesPiece+\" => anchor i : \"+anchor[0]+\", j : \"+anchor[1])\n// console.log()\nvar mursInterdits=[1,2,3,5];var _useState=useState(position[0]>=nbLignesGrille&&position[1]>=nbColonnesGrille),_useState2=_slicedToArray(_useState,2),intermediaire=_useState2[0],setIntermediaire=_useState2[1];var getTypeExt=function getTypeExt(anchori,anchorj){if(!intermediaire){if(anchori<0||anchorj<0)return-1;var mursCote=[mursH[position[0]][position[1]],mursV[position[0]][position[1]+1],mursH[position[0]+1][position[1]],mursV[position[0]][position[1]]];// console.log(mursCote)\nif(anchori<carte.length&&anchorj<carte[0].length){if(anchori==position[0]+1&&anchorj==position[1]&&!mursInterdits.includes(mursCote[2]))return carte[anchori][anchorj];// juste dessous\nif(anchori==position[0]-1&&anchorj==position[1]&&!mursInterdits.includes(mursCote[0]))return carte[anchori][anchorj];// juste dessus\nif(anchori==position[0]&&anchorj==position[1]-1&&!mursInterdits.includes(mursCote[3]))return carte[anchori][anchorj];// juste gauche\nif(anchori==position[0]&&anchorj==position[1]+1&&!mursInterdits.includes(mursCote[1]))return carte[anchori][anchorj];// juste droite\n}}return-1;};var pompierDansPiece=function pompierDansPiece(anchori,anchorj){var present=false;anchors.forEach(function(_ref2,index){var _ref3=_slicedToArray(_ref2,2),min=_ref3[0],max=_ref3[1];if(anchori>=min[0]&&anchori<=max[0]&&anchorj>=min[1]&&anchorj<=max[1]){for(var i=min[0];i<=max[0];i++){for(var j=min[1];j<=max[1];j++){if(carte[i][j]>=100){present=true;}}}}});return present;};var renderRow=function renderRow(i){var row=[];for(var j=0;j<nbColonnesPiece+2;j++){var anchori=i+anchor[0]-1;var anchorj=j+anchor[1]-1;if(anchori<nbLignesPiece+anchor[0]&&anchori>=anchor[0]&&anchorj<nbColonnesPiece+anchor[1]&&anchorj>=anchor[1]){row.push(/*#__PURE__*/_jsx(CasePiece,{coordX:anchorj,coordY:anchori,anchor:anchor,nbColonnesGrille:nbColonnesGrille,nbLignesGrille:nbLignesGrille,nbColonnesPiece:nbColonnesPiece,nbLignesPiece:nbLignesPiece,murs:[mursH[anchori][anchorj],mursV[anchori][anchorj+1],mursH[anchori+1][anchorj],mursV[anchori][anchorj]],type:j>nbColonnesGrille||i>nbLignesGrille||!pompierDansPiece(anchori,anchorj)?-1:carte[anchori][anchorj],propositionMursDetruire:propositionMursDetruire,propositionsCase:propositionsCase,handleClicMur:handleClicMur,handleClicCase:handleClicCase,mursH:mursH,mursV:mursV,position:position,idPiece:getAnchor(anchors,[anchori,anchorj])[1],deplacementEnCours:deplacementEnCours},i+\",\"+j));}else{var newI=anchori;var newJ=anchorj;var murs=[0,0,0,0];if(anchori<anchor[0]){// haut\nnewI=anchori-1;newJ=anchorj;// console.log(\"new \",newI,newJ,mursV[newI][newJ+1])\ntry{murs[1]=mursV[anchori][anchorj+1]>0?mursV[anchori][anchorj+1]:0;}catch(error){}try{murs[3]=mursV[anchori][anchorj]>0?mursV[anchori][anchorj]:0;}catch(error){}try{murs[2]=mursH[anchori+1][anchorj]>0?mursH[anchori+1][anchorj]:0;}catch(error){}}if(anchori>=nbLignesPiece+anchor[0]){// bas\nnewI=anchori+1;newJ=anchorj;try{murs[0]=mursH[anchori][anchorj]>0?mursH[anchori][anchorj]:0;}catch(error){}try{murs[1]=mursV[anchori][anchorj+1]>0?mursV[anchori][anchorj+1]:0;}catch(error){}try{murs[3]=mursV[anchori][anchorj]>0?mursV[anchori][anchorj]:0;}catch(error){}}if(anchorj<anchor[1]){// gauche\nnewI=anchori;newJ=anchorj-1;try{murs[0]=mursH[anchori][anchorj]>0?mursH[anchori][anchorj]:0;}catch(error){}try{murs[2]=mursH[anchori+1][anchorj]>0?mursH[anchori+1][anchorj]:0;}catch(error){}try{murs[1]=mursV[anchori][anchorj+1]>0?mursV[anchori][anchorj+1]:0;}catch(error){}}if(anchorj>=nbColonnesPiece+anchor[1]){// droite\nnewI=anchori;newJ=anchorj+1;try{murs[0]=mursH[anchori][anchorj]>0?mursH[anchori][anchorj]:0;}catch(error){}try{murs[2]=mursH[anchori+1][anchorj]>0?mursH[anchori+1][anchorj]:0;}catch(error){}try{murs[3]=mursV[anchori][anchorj]>0?mursV[anchori][anchorj]:0;}catch(error){}}var typeExt=getTypeExt(anchori,anchorj);row.push(/*#__PURE__*/_jsx(CasePiece,{coordX:anchorj,coordY:anchori,anchor:anchor,nbColonnesGrille:nbColonnesGrille,nbLignesGrille:nbLignesGrille,nbColonnesPiece:nbColonnesPiece,nbLignesPiece:nbLignesPiece,murs:murs,propositionMursDetruire:propositionMursDetruire,propositionsCase:propositionsCase,handleClicMur:handleClicMur,handleClicCase:handleClicCase,type:typeExt,mursH:mursH,mursV:mursV,position:position,idPiece:typeExt>=0?getAnchor(anchors,[anchori,anchorj])[1]:null,deplacementEnCours:deplacementEnCours},i+\",\"+j));}}return row;};var renderGrille=function renderGrille(){var grille=[];for(var i=0;i<nbLignesPiece+2;i++){grille.push(/*#__PURE__*/_jsx(\"div\",{className:\"row-piece\",children:renderRow(i)},\"row\"+i));}return grille;};return/*#__PURE__*/_jsx(\"div\",{className:\"piece\",style:{position:\"absolute\",width:(nbColonnesPiece+2)/((nbColonnesPiece!=nbColonnesGrille?maxColonnesPiece:nbColonnesGrille)+2)*80+\"%\",height:(nbLignesPiece+2)/((nbLignesPiece!=nbLignesGrille?maxLignesPiece:nbLignesGrille)+2)*100+\"%\"},children:renderGrille()});};export default Piece;","map":{"version":3,"sources":["C:/Users/hugod/decitude/client/src/components/interfaceJoueur/pieces/Piece.js"],"names":["React","useState","makeStyles","CasePiece","useScrollTrigger","Piece","carte","position","nbLignesGrille","nbColonnesGrille","nbLignesPiece","nbColonnesPiece","mursV","mursH","anchor","maxLignesPiece","maxColonnesPiece","propositionMursDetruire","handleClicMur","handleClicCase","propositionsCase","anchors","deplacementEnCours","getAnchor","mursInterdits","intermediaire","setIntermediaire","getTypeExt","anchori","anchorj","mursCote","length","includes","pompierDansPiece","present","forEach","index","min","max","i","j","renderRow","row","push","newI","newJ","murs","error","typeExt","renderGrille","grille","width","height"],"mappings":"qJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,OAASC,gBAAT,KAAiC,mBAAjC,C,2CAIA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAoBR,IAnBFC,CAAAA,KAmBE,MAnBFA,KAmBE,CAlBFC,QAkBE,MAlBFA,QAkBE,CAjBFC,cAiBE,MAjBFA,cAiBE,CAhBFC,gBAgBE,MAhBFA,gBAgBE,CAfFC,aAeE,MAfFA,aAeE,CAdFC,eAcE,MAdFA,eAcE,CAbFC,KAaE,MAbFA,KAaE,CAZFC,KAYE,MAZFA,KAYE,CAXFC,MAWE,MAXFA,MAWE,CAVFC,cAUE,MAVFA,cAUE,CATFC,gBASE,MATFA,gBASE,CARFC,uBAQE,MARFA,uBAQE,CAPFC,aAOE,MAPFA,aAOE,CANFC,cAME,MANFA,cAME,CALFC,gBAKE,MALFA,gBAKE,CAJFC,OAIE,MAJFA,OAIE,CAHFC,kBAGE,MAHFA,kBAGE,CAFFC,SAEE,MAFFA,SAEE,CACF;AACA;AACA,GAAMC,CAAAA,aAAa,CAAG,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAtB,CAEA,cAAuCvB,QAAQ,CAACM,QAAQ,CAAC,CAAD,CAAR,EAAaC,cAAb,EAA+BD,QAAQ,CAAC,CAAD,CAAR,EAAaE,gBAA7C,CAA/C,wCAAOgB,aAAP,eAAqBC,gBAArB,eAEA,GAAMC,CAAAA,UAAU,CAAC,QAAXA,CAAAA,UAAW,CAACC,OAAD,CAASC,OAAT,CAAmB,CAChC,GAAG,CAACJ,aAAJ,CAAkB,CACd,GAAGG,OAAO,CAAC,CAAR,EAAaC,OAAO,CAAC,CAAxB,CAA2B,MAAO,CAAC,CAAR,CAC3B,GAAMC,CAAAA,QAAQ,CAAG,CAACjB,KAAK,CAACN,QAAQ,CAAC,CAAD,CAAT,CAAL,CAAmBA,QAAQ,CAAC,CAAD,CAA3B,CAAD,CAAiCK,KAAK,CAACL,QAAQ,CAAC,CAAD,CAAT,CAAL,CAAmBA,QAAQ,CAAC,CAAD,CAAR,CAAY,CAA/B,CAAjC,CAAmEM,KAAK,CAACN,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAb,CAAL,CAAqBA,QAAQ,CAAC,CAAD,CAA7B,CAAnE,CAAqGK,KAAK,CAACL,QAAQ,CAAC,CAAD,CAAT,CAAL,CAAmBA,QAAQ,CAAC,CAAD,CAA3B,CAArG,CAAjB,CACA;AACA,GAAGqB,OAAO,CAACtB,KAAK,CAACyB,MAAd,EAAwBF,OAAO,CAACvB,KAAK,CAAC,CAAD,CAAL,CAASyB,MAA5C,CAAmD,CAC/C,GAAGH,OAAO,EAAErB,QAAQ,CAAC,CAAD,CAAR,CAAY,CAArB,EAA0BsB,OAAO,EAAEtB,QAAQ,CAAC,CAAD,CAA3C,EAAkD,CAACiB,aAAa,CAACQ,QAAd,CAAuBF,QAAQ,CAAC,CAAD,CAA/B,CAAtD,CAA2F,MAAOxB,CAAAA,KAAK,CAACsB,OAAD,CAAL,CAAeC,OAAf,CAAP,CAA+B;AAC1H,GAAGD,OAAO,EAAErB,QAAQ,CAAC,CAAD,CAAR,CAAY,CAArB,EAA0BsB,OAAO,EAAEtB,QAAQ,CAAC,CAAD,CAA3C,EAAkD,CAACiB,aAAa,CAACQ,QAAd,CAAuBF,QAAQ,CAAC,CAAD,CAA/B,CAAtD,CAA2F,MAAOxB,CAAAA,KAAK,CAACsB,OAAD,CAAL,CAAeC,OAAf,CAAP,CAA+B;AAC1H,GAAGD,OAAO,EAAErB,QAAQ,CAAC,CAAD,CAAjB,EAAwBsB,OAAO,EAAEtB,QAAQ,CAAC,CAAD,CAAR,CAAY,CAA7C,EAAkD,CAACiB,aAAa,CAACQ,QAAd,CAAuBF,QAAQ,CAAC,CAAD,CAA/B,CAAtD,CAA2F,MAAOxB,CAAAA,KAAK,CAACsB,OAAD,CAAL,CAAeC,OAAf,CAAP,CAA+B;AAC1H,GAAGD,OAAO,EAAErB,QAAQ,CAAC,CAAD,CAAjB,EAAwBsB,OAAO,EAAEtB,QAAQ,CAAC,CAAD,CAAR,CAAY,CAA7C,EAAkD,CAACiB,aAAa,CAACQ,QAAd,CAAuBF,QAAQ,CAAC,CAAD,CAA/B,CAAtD,CAA2F,MAAOxB,CAAAA,KAAK,CAACsB,OAAD,CAAL,CAAeC,OAAf,CAAP,CAA+B;AAE7H,CAEJ,CAED,MAAO,CAAC,CAAR,CACH,CAhBD,CAoBA,GAAMI,CAAAA,gBAAgB,CAAC,QAAjBA,CAAAA,gBAAiB,CAACL,OAAD,CAASC,OAAT,CAAmB,CACtC,GAAIK,CAAAA,OAAO,CAAG,KAAd,CACAb,OAAO,CAACc,OAAR,CAAgB,eAAWC,KAAX,CAAqB,mCAAnBC,GAAmB,UAAfC,GAAe,UACjC,GAAGV,OAAO,EAAES,GAAG,CAAC,CAAD,CAAZ,EAAmBT,OAAO,EAAEU,GAAG,CAAC,CAAD,CAA/B,EAAsCT,OAAO,EAAEQ,GAAG,CAAC,CAAD,CAAlD,EAAyDR,OAAO,EAAES,GAAG,CAAC,CAAD,CAAxE,CAA4E,CACxE,IAAI,GAAIC,CAAAA,CAAC,CAACF,GAAG,CAAC,CAAD,CAAb,CAAiBE,CAAC,EAAED,GAAG,CAAC,CAAD,CAAvB,CAA2BC,CAAC,EAA5B,CAA+B,CAC3B,IAAI,GAAIC,CAAAA,CAAC,CAACH,GAAG,CAAC,CAAD,CAAb,CAAiBG,CAAC,EAAEF,GAAG,CAAC,CAAD,CAAvB,CAA2BE,CAAC,EAA5B,CAA+B,CAE3B,GAAGlC,KAAK,CAACiC,CAAD,CAAL,CAASC,CAAT,GAAa,GAAhB,CAAoB,CAChBN,OAAO,CAAC,IAAR,CACH,CAEJ,CACJ,CACJ,CACJ,CAZD,EAaA,MAAOA,CAAAA,OAAP,CAEH,CAjBD,CAmBA,GAAMO,CAAAA,SAAS,CAAC,QAAVA,CAAAA,SAAU,CAACF,CAAD,CAAK,CACjB,GAAIG,CAAAA,GAAG,CAAC,EAAR,CACA,IAAI,GAAIF,CAAAA,CAAC,CAAC,CAAV,CAAYA,CAAC,CAAC7B,eAAe,CAAC,CAA9B,CAAgC6B,CAAC,EAAjC,CAAoC,CAChC,GAAMZ,CAAAA,OAAO,CAAGW,CAAC,CAACzB,MAAM,CAAC,CAAD,CAAR,CAAY,CAA5B,CACA,GAAMe,CAAAA,OAAO,CAAGW,CAAC,CAAC1B,MAAM,CAAC,CAAD,CAAR,CAAY,CAA5B,CAEA,GAAIc,OAAO,CAAClB,aAAa,CAACI,MAAM,CAAC,CAAD,CAA5B,EAAoCc,OAAO,EAAEd,MAAM,CAAC,CAAD,CAAnD,EAA0De,OAAO,CAAClB,eAAe,CAACG,MAAM,CAAC,CAAD,CAAxF,EAAgGe,OAAO,EAAEf,MAAM,CAAC,CAAD,CAAnH,CAAwH,CAEpH4B,GAAG,CAACC,IAAJ,cACI,KAAC,SAAD,EAEI,MAAM,CAAEd,OAFZ,CAGI,MAAM,CAAED,OAHZ,CAII,MAAM,CAAEd,MAJZ,CAKI,gBAAgB,CAAEL,gBALtB,CAMI,cAAc,CAAED,cANpB,CAOI,eAAe,CAAEG,eAPrB,CAQI,aAAa,CAAED,aARnB,CASI,IAAI,CAAE,CAACG,KAAK,CAACe,OAAD,CAAL,CAAeC,OAAf,CAAD,CAAyBjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAO,CAAC,CAAvB,CAAzB,CAAmDhB,KAAK,CAACe,OAAO,CAAC,CAAT,CAAL,CAAiBC,OAAjB,CAAnD,CAA6EjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAf,CAA7E,CATV,CAUI,IAAI,CAAGW,CAAC,CAAC/B,gBAAF,EAAsB8B,CAAC,CAAC/B,cAAxB,EAA0C,CAACyB,gBAAgB,CAACL,OAAD,CAASC,OAAT,CAA3D,CAA+E,CAAC,CAAhF,CAAoFvB,KAAK,CAACsB,OAAD,CAAL,CAAeC,OAAf,CAV/F,CAWI,uBAAuB,CAAEZ,uBAX7B,CAYI,gBAAgB,CAAEG,gBAZtB,CAaI,aAAa,CAAEF,aAbnB,CAcI,cAAc,CAAEC,cAdpB,CAeI,KAAK,CAAEN,KAfX,CAgBI,KAAK,CAAED,KAhBX,CAiBI,QAAQ,CAAEL,QAjBd,CAkBI,OAAO,CAAEgB,SAAS,CAACF,OAAD,CAAS,CAACO,OAAD,CAASC,OAAT,CAAT,CAAT,CAAqC,CAArC,CAlBb,CAmBI,kBAAkB,CAAEP,kBAnBxB,EACSiB,CAAC,CAAC,GAAF,CAAMC,CADf,CADJ,EAuBH,CAzBD,IAyBK,CAED,GAAII,CAAAA,IAAI,CAAGhB,OAAX,CACA,GAAIiB,CAAAA,IAAI,CAAGhB,OAAX,CACA,GAAIiB,CAAAA,IAAI,CAAE,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,CAAO,CAAP,CAAV,CAEA,GAAGlB,OAAO,CAACd,MAAM,CAAC,CAAD,CAAjB,CAAqB,CAAE;AACnB8B,IAAI,CAAGhB,OAAO,CAAC,CAAf,CACAiB,IAAI,CAAGhB,OAAP,CACA;AACA,GAAG,CACCiB,IAAI,CAAC,CAAD,CAAJ,CAAQlC,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAO,CAAC,CAAvB,EAA0B,CAA1B,CAA8BjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAO,CAAC,CAAvB,CAA9B,CAA0D,CAAlE,CACH,OAAMkB,KAAN,CAAY,CACZ,CACD,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQlC,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAf,EAAwB,CAAxB,CAA4BjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAf,CAA5B,CAAsD,CAA9D,CACH,OAAMkB,KAAN,CAAY,CAEZ,CACD,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQjC,KAAK,CAACe,OAAO,CAAC,CAAT,CAAL,CAAiBC,OAAjB,EAA0B,CAA1B,CAA8BhB,KAAK,CAACe,OAAO,CAAC,CAAT,CAAL,CAAiBC,OAAjB,CAA9B,CAA0D,CAAlE,CACH,OAAMkB,KAAN,CAAY,CACZ,CAGJ,CACD,GAAGnB,OAAO,EAAElB,aAAa,CAACI,MAAM,CAAC,CAAD,CAAhC,CAAoC,CAAE;AAClC8B,IAAI,CAAGhB,OAAO,CAAC,CAAf,CACAiB,IAAI,CAAGhB,OAAP,CACA,GAAG,CACCiB,IAAI,CAAC,CAAD,CAAJ,CAAQjC,KAAK,CAACe,OAAD,CAAL,CAAeC,OAAf,EAAwB,CAAxB,CAA4BhB,KAAK,CAACe,OAAD,CAAL,CAAeC,OAAf,CAA5B,CAAsD,CAA9D,CACH,OAAMkB,KAAN,CAAY,CACZ,CAED,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQlC,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAO,CAAC,CAAvB,EAA0B,CAA1B,CAA8BjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAO,CAAC,CAAvB,CAA9B,CAA0D,CAAlE,CACH,OAAMkB,KAAN,CAAY,CACZ,CACD,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQlC,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAf,EAAwB,CAAxB,CAA4BjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAf,CAA5B,CAAsD,CAA9D,CACH,OAAMkB,KAAN,CAAY,CAEZ,CAGJ,CACD,GAAGlB,OAAO,CAACf,MAAM,CAAC,CAAD,CAAjB,CAAqB,CAAE;AACnB8B,IAAI,CAAGhB,OAAP,CACAiB,IAAI,CAAGhB,OAAO,CAAC,CAAf,CACA,GAAG,CACCiB,IAAI,CAAC,CAAD,CAAJ,CAAQjC,KAAK,CAACe,OAAD,CAAL,CAAeC,OAAf,EAAwB,CAAxB,CAA4BhB,KAAK,CAACe,OAAD,CAAL,CAAeC,OAAf,CAA5B,CAAsD,CAA9D,CACH,OAAMkB,KAAN,CAAY,CACZ,CACD,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQjC,KAAK,CAACe,OAAO,CAAC,CAAT,CAAL,CAAiBC,OAAjB,EAA0B,CAA1B,CAA8BhB,KAAK,CAACe,OAAO,CAAC,CAAT,CAAL,CAAiBC,OAAjB,CAA9B,CAA0D,CAAlE,CACH,OAAMkB,KAAN,CAAY,CACZ,CAED,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQlC,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAO,CAAC,CAAvB,EAA0B,CAA1B,CAA8BjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAO,CAAC,CAAvB,CAA9B,CAA0D,CAAlE,CACH,OAAMkB,KAAN,CAAY,CACZ,CAEJ,CACD,GAAGlB,OAAO,EAAElB,eAAe,CAACG,MAAM,CAAC,CAAD,CAAlC,CAAsC,CAAE;AACpC8B,IAAI,CAAGhB,OAAP,CACAiB,IAAI,CAAGhB,OAAO,CAAC,CAAf,CACA,GAAG,CACCiB,IAAI,CAAC,CAAD,CAAJ,CAAQjC,KAAK,CAACe,OAAD,CAAL,CAAeC,OAAf,EAAwB,CAAxB,CAA4BhB,KAAK,CAACe,OAAD,CAAL,CAAeC,OAAf,CAA5B,CAAsD,CAA9D,CACH,OAAMkB,KAAN,CAAY,CACZ,CACD,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQjC,KAAK,CAACe,OAAO,CAAC,CAAT,CAAL,CAAiBC,OAAjB,EAA0B,CAA1B,CAA8BhB,KAAK,CAACe,OAAO,CAAC,CAAT,CAAL,CAAiBC,OAAjB,CAA9B,CAA0D,CAAlE,CACH,OAAMkB,KAAN,CAAY,CACZ,CAED,GAAG,CACCD,IAAI,CAAC,CAAD,CAAJ,CAAQlC,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAf,EAAwB,CAAxB,CAA4BjB,KAAK,CAACgB,OAAD,CAAL,CAAeC,OAAf,CAA5B,CAAsD,CAA9D,CACH,OAAMkB,KAAN,CAAY,CACZ,CACJ,CAED,GAAMC,CAAAA,OAAO,CAAGrB,UAAU,CAACC,OAAD,CAASC,OAAT,CAA1B,CAGAa,GAAG,CAACC,IAAJ,cACI,KAAC,SAAD,EAEI,MAAM,CAAEd,OAFZ,CAGI,MAAM,CAAED,OAHZ,CAII,MAAM,CAAEd,MAJZ,CAKI,gBAAgB,CAAEL,gBALtB,CAMI,cAAc,CAAED,cANpB,CAOI,eAAe,CAAEG,eAPrB,CAQI,aAAa,CAAED,aARnB,CASI,IAAI,CAAEoC,IATV,CAUI,uBAAuB,CAAE7B,uBAV7B,CAWI,gBAAgB,CAAEG,gBAXtB,CAYI,aAAa,CAAEF,aAZnB,CAaI,cAAc,CAAEC,cAbpB,CAcI,IAAI,CAAE6B,OAdV,CAeI,KAAK,CAAEnC,KAfX,CAgBI,KAAK,CAAED,KAhBX,CAiBI,QAAQ,CAAEL,QAjBd,CAkBI,OAAO,CAAEyC,OAAO,EAAE,CAAT,CAAazB,SAAS,CAACF,OAAD,CAAS,CAACO,OAAD,CAASC,OAAT,CAAT,CAAT,CAAqC,CAArC,CAAb,CAAuD,IAlBpE,CAmBI,kBAAkB,CAAEP,kBAnBxB,EACSiB,CAAC,CAAC,GAAF,CAAMC,CADf,CADJ,EAyBH,CAEJ,CACD,MAAOE,CAAAA,GAAP,CACH,CAjJD,CAoJA,GAAMO,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,EAAI,CACnB,GAAIC,CAAAA,MAAM,CAAC,EAAX,CACA,IAAK,GAAIX,CAAAA,CAAC,CAAC,CAAX,CAAaA,CAAC,CAAC7B,aAAa,CAAC,CAA7B,CAA+B6B,CAAC,EAAhC,CAAmC,CAC/BW,MAAM,CAACP,IAAP,cACI,YAAmB,SAAS,CAAC,WAA7B,UACKF,SAAS,CAACF,CAAD,CADd,EAAU,MAAMA,CAAhB,CADJ,EAMH,CACD,MAAOW,CAAAA,MAAP,CACH,CAXD,CAaA,mBAEA,YACI,SAAS,CAAC,OADd,CAEI,KAAK,CAAE,CACH3C,QAAQ,CAAC,UADN,CAEH4C,KAAK,CAAC,CAACxC,eAAe,CAAC,CAAjB,GAAsB,CAACA,eAAe,EAAEF,gBAAjB,CAAoCO,gBAApC,CAAwDP,gBAAzD,EAA4E,CAAlG,EAAqG,EAArG,CAAwG,GAF3G,CAGH2C,MAAM,CAAC,CAAC1C,aAAa,CAAC,CAAf,GAAqB,CAACA,aAAa,EAAEF,cAAf,CAAiCO,cAAjC,CAAkDP,cAAnD,EAAsE,CAA3F,EAA+F,GAA/F,CAAmG,GAHvG,CAFX,UAUIyC,YAAY,EAVhB,EAFA,CAiBH,CApPD,CAsPA,cAAe5C,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CasePiece from \"./CasePiece\"\nimport { useScrollTrigger } from '@material-ui/core';\n\n\n\nconst Piece = ({\n    carte,\n    position,\n    nbLignesGrille,\n    nbColonnesGrille,\n    nbLignesPiece,\n    nbColonnesPiece,\n    mursV,\n    mursH,\n    anchor,\n    maxLignesPiece,\n    maxColonnesPiece,\n    propositionMursDetruire,\n    handleClicMur,\n    handleClicCase,\n    propositionsCase,\n    anchors,\n    deplacementEnCours,\n    getAnchor\n\n}) => {\n    // console.log(\"Grille nb lignes : \"+nbLignesGrille+\", colonnes : \"+nbColonnesGrille+\" | piece lignes : \"+nbLignesPiece+\",  colonnes \"+nbColonnesPiece+\" => anchor i : \"+anchor[0]+\", j : \"+anchor[1])\n    // console.log()\n    const mursInterdits = [1, 2, 3, 5]\n\n    const [intermediaire,setIntermediaire]=useState(position[0]>=nbLignesGrille && position[1]>=nbColonnesGrille)\n\n    const getTypeExt=(anchori,anchorj)=>{\n        if(!intermediaire){\n            if(anchori<0 || anchorj<0) return -1\n            const mursCote = [mursH[position[0]][position[1]],mursV[position[0]][position[1]+1],mursH[position[0]+1][position[1]],mursV[position[0]][position[1]]]\n            // console.log(mursCote)\n            if(anchori<carte.length && anchorj<carte[0].length){\n                if(anchori==position[0]+1 && anchorj==position[1] && !mursInterdits.includes(mursCote[2])) return carte[anchori][anchorj] // juste dessous\n                if(anchori==position[0]-1 && anchorj==position[1] && !mursInterdits.includes(mursCote[0])) return carte[anchori][anchorj] // juste dessus\n                if(anchori==position[0] && anchorj==position[1]-1 && !mursInterdits.includes(mursCote[3])) return carte[anchori][anchorj] // juste gauche\n                if(anchori==position[0] && anchorj==position[1]+1 && !mursInterdits.includes(mursCote[1])) return carte[anchori][anchorj] // juste droite\n        \n            }\n     \n        }\n     \n        return -1   \n    }\n\n\n\n    const pompierDansPiece=(anchori,anchorj)=>{\n        var present = false\n        anchors.forEach(([min,max],index) => {\n            if(anchori>=min[0] && anchori<=max[0] && anchorj>=min[1] && anchorj<=max[1]){\n                for(let i=min[0];i<=max[0];i++){\n                    for(let j=min[1];j<=max[1];j++){\n                       \n                        if(carte[i][j]>=100){\n                            present=true\n                        }\n                        \n                    }\n                }\n            }\n        });\n        return present \n\n    }\n\n    const renderRow=(i)=>{\n        var row=[]\n        for(let j=0;j<nbColonnesPiece+2;j++){\n            const anchori = i+anchor[0]-1\n            const anchorj = j+anchor[1]-1\n            \n            if (anchori<nbLignesPiece+anchor[0] &&  anchori>=anchor[0] && anchorj<nbColonnesPiece+anchor[1] &&  anchorj>=anchor[1] ){\n\n                row.push( \n                    <CasePiece \n                        key={i+\",\"+j}\n                        coordX={anchorj}\n                        coordY={anchori}\n                        anchor={anchor}\n                        nbColonnesGrille={nbColonnesGrille}\n                        nbLignesGrille={nbLignesGrille}\n                        nbColonnesPiece={nbColonnesPiece}\n                        nbLignesPiece={nbLignesPiece}\n                        murs={[mursH[anchori][anchorj],mursV[anchori][anchorj+1],mursH[anchori+1][anchorj],mursV[anchori][anchorj]]}\n                        type={ j>nbColonnesGrille || i>nbLignesGrille || !pompierDansPiece(anchori,anchorj) ? -1 : carte[anchori][anchorj] }\n                        propositionMursDetruire={propositionMursDetruire}\n                        propositionsCase={propositionsCase}\n                        handleClicMur={handleClicMur}\n                        handleClicCase={handleClicCase}\n                        mursH={mursH}\n                        mursV={mursV}\n                        position={position}\n                        idPiece={getAnchor(anchors,[anchori,anchorj])[1]}\n                        deplacementEnCours={deplacementEnCours}\n                    />\n                )\n            }else{\n               \n                let newI = anchori\n                let newJ = anchorj\n                var murs =[0,0,0,0]\n                \n                if(anchori<anchor[0]){ // haut\n                    newI = anchori-1\n                    newJ = anchorj\n                    // console.log(\"new \",newI,newJ,mursV[newI][newJ+1])\n                    try{\n                        murs[1]=mursV[anchori][anchorj+1]>0 ? mursV[anchori][anchorj+1] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[3]=mursV[anchori][anchorj]>0 ? mursV[anchori][anchorj] : 0\n                    }catch(error){\n\n                    }\n                    try{\n                        murs[2]=mursH[anchori+1][anchorj]>0 ? mursH[anchori+1][anchorj] : 0\n                    }catch(error){\n                    }\n                    \n                    \n                }\n                if(anchori>=nbLignesPiece+anchor[0]){ // bas\n                    newI = anchori+1\n                    newJ = anchorj\n                    try{\n                        murs[0]=mursH[anchori][anchorj]>0 ? mursH[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                   \n                    try{\n                        murs[1]=mursV[anchori][anchorj+1]>0 ? mursV[anchori][anchorj+1] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[3]=mursV[anchori][anchorj]>0 ? mursV[anchori][anchorj] : 0\n                    }catch(error){\n\n                    }\n                   \n                   \n                }\n                if(anchorj<anchor[1]){ // gauche\n                    newI = anchori\n                    newJ = anchorj-1\n                    try{\n                        murs[0]=mursH[anchori][anchorj]>0 ? mursH[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[2]=mursH[anchori+1][anchorj]>0 ? mursH[anchori+1][anchorj] : 0\n                    }catch(error){\n                    }\n\n                    try{\n                        murs[1]=mursV[anchori][anchorj+1]>0 ? mursV[anchori][anchorj+1] : 0\n                    }catch(error){\n                    }\n                    \n                }\n                if(anchorj>=nbColonnesPiece+anchor[1]){ // droite\n                    newI = anchori\n                    newJ = anchorj+1\n                    try{\n                        murs[0]=mursH[anchori][anchorj]>0 ? mursH[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[2]=mursH[anchori+1][anchorj]>0 ? mursH[anchori+1][anchorj] : 0\n                    }catch(error){\n                    }\n\n                    try{\n                        murs[3]=mursV[anchori][anchorj]>0 ? mursV[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                }\n\n                const typeExt = getTypeExt(anchori,anchorj)\n\n                \n                row.push( \n                    <CasePiece \n                        key={i+\",\"+j}\n                        coordX={anchorj}\n                        coordY={anchori}\n                        anchor={anchor}\n                        nbColonnesGrille={nbColonnesGrille}\n                        nbLignesGrille={nbLignesGrille}\n                        nbColonnesPiece={nbColonnesPiece}\n                        nbLignesPiece={nbLignesPiece}\n                        murs={murs}\n                        propositionMursDetruire={propositionMursDetruire}\n                        propositionsCase={propositionsCase}\n                        handleClicMur={handleClicMur}\n                        handleClicCase={handleClicCase}\n                        type={typeExt}\n                        mursH={mursH}\n                        mursV={mursV}\n                        position={position}\n                        idPiece={typeExt>=0 ? getAnchor(anchors,[anchori,anchorj])[1] : null}\n                        deplacementEnCours={deplacementEnCours}\n                    /> \n                )\n                \n\n            }\n            \n        }\n        return row\n    }\n\n\n    const renderGrille=()=>{\n        var grille=[]\n        for (let i=0;i<nbLignesPiece+2;i++){\n            grille.push(\n                <div key={\"row\"+i} className=\"row-piece\" >\n                    {renderRow(i)}\n                </div>\n            )  \n            \n        }\n        return grille\n    }\n    \n    return (  \n\n    <div\n        className=\"piece\"  \n        style={{\n            position:\"absolute\",\n            width:(nbColonnesPiece+2) /((nbColonnesPiece!=nbColonnesGrille ? maxColonnesPiece :  nbColonnesGrille )+2)*80+\"%\",\n            height:(nbLignesPiece+2) / ((nbLignesPiece!=nbLignesGrille ?  maxLignesPiece : nbLignesGrille   )+2) *100+\"%\",\n            \n        }} \n       \n    >\n       {renderGrille()}\n    </div>\n        \n        \n    );\n}\n \nexport default Piece;"]},"metadata":{},"sourceType":"module"}