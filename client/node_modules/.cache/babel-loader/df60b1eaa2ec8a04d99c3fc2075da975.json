{"ast":null,"code":"import _objectSpread from\"C:/Users/hugod/decitude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/hugod/decitude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/hugod/decitude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/hugod/decitude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/hugod/decitude/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"../styles/App.css\";import React,{useState,useEffect,useRef}from'react';import PlayAPI from\"../API/PlayAPI\";import TactBandeauTop from\"../components/interfaceJoueur/TactBandeauTop\";import TactBandeauBottom from\"../components/interfaceJoueur/TactBandeauBottom\";import Grille from\"../components/interfaceJoueur/Grille\";import{useHistory}from'react-router-dom';import{Typography}from\"@material-ui/core\";import cookie from'react-cookies';import TactBandeauDroite from\"../components/interfaceJoueur/TactBandeauDroite\";import ContentsAPI from\"../API/ContentsAPI\";import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TactInterface=function TactInterface(){var history=useHistory();var user=cookie.load(\"user\");var handleDisconnect=function handleDisconnect(){cookie.save('user',\"disconnected\",{path:'/',maxAge:60*60*1.5//sec\n});history.push('/login');};if(user===null||user===undefined||user==\"disconnected\")history.push(\"/login\");if(user!==null&&user!==undefined&&user.role!==undefined&&!user.role.includes(\"TACT\"))handleDisconnect();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),play=_useState2[0],setPlay=_useState2[1];var _useState3=useState(user!==null&&user!==undefined&&user.role!==undefined?user.role.replace(\"TACT\",\"\"):null),_useState4=_slicedToArray(_useState3,2),numPompier=_useState4[0],setNumPompier=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),currentPomp=_useState6[0],setCurrentPomp=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),currentTour=_useState8[0],setCurrentTour=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),currentCycle=_useState10[0],setCurrentCycle=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),currentSequence=_useState12[0],setCurrentSequence=_useState12[1];var _useState13=useState(user!=null?user.session:null),_useState14=_slicedToArray(_useState13,2),session=_useState14[0],setSession=_useState14[1];var _useState15=useState(user!=null?user.equipe:null),_useState16=_slicedToArray(_useState15,2),equipe=_useState16[0],setEquipe=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),position=_useState18[0],setPosition=_useState18[1];var _useState19=useState({type:0,rotation:1}),_useState20=_slicedToArray(_useState19,2),deplacementEnCours=_useState20[0],setDeplacementEnCours=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),histActions=_useState22[0],setHistActions=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),chrono=_useState24[0],setChrono=_useState24[1];useEffect(function(){if(numPompier==null)handleDisconnect();},[numPompier]);var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),configuration=_useState26[0],setConfiguration=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),stocks=_useState28[0],setStocks=_useState28[1];var _useState29=useState({Decedes:0,Sauves:0}),_useState30=_slicedToArray(_useState29,2),resultats=_useState30[0],setResultats=_useState30[1];var _useState31=useState({Deplacement:0,Feu:0,FeuFum:0,Fum:0,Marqueur:0,Porte:0,Habitant:0}),_useState32=_slicedToArray(_useState31,2),interventions=_useState32[0],setInterventions=_useState32[1];var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),budget=_useState34[0],setBudget=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),budgetDepense=_useState36[0],setBudgetDepense=_useState36[1];var isLoading=useRef(false);// INITIALISATION DE LA CARTE\n// const [carte, setCarte] = useState([\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n//   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\n// ])\nvar _useState37=useState([]),_useState38=_slicedToArray(_useState37,2),carte=_useState38[0],setCarte=_useState38[1];var _useState39=useState(0),_useState40=_slicedToArray(_useState39,2),nbLignesGrille=_useState40[0],setNbLignesGrille=_useState40[1];var _useState41=useState(0),_useState42=_slicedToArray(_useState41,2),nbColonnesGrille=_useState42[0],setNbColonnesGrille=_useState42[1];var _useState43=useState([[1,1,1,1,1,1,2,6,1,1,1,1,2,5,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,2,6,1,6,2,1,1,1,5,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,6,2,1,1,1,1,1,1,1,1]]),_useState44=_slicedToArray(_useState43,2),mursH=_useState44[0],setMursH=_useState44[1];var _useState45=useState([[1,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1],[2,0,0,5,0,0,0,0,0,0,0,1,0,0,0,0,1],[5,0,0,2,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,1],[1,0,0,0,0,0,2,0,0,0,5,0,0,0,0,0,1],[1,0,0,0,0,0,5,0,0,0,5,0,0,0,0,0,2],[1,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,5]]),_useState46=_slicedToArray(_useState45,2),mursV=_useState46[0],setMursV=_useState46[1];// GET PLAY PARAMETERS \nvar getPlayState=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(session,equipe){var currentPlayState,c;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"get play state\");if(isLoading.current){_context.next=10;break;}isLoading.current=true;_context.next=5;return PlayAPI.getPlayState(session,equipe);case 5:currentPlayState=_context.sent;console.log(currentPlayState);if(Object.keys(currentPlayState).length>0){// console.log(parseInt(JSON.parse(currentPlayState.currentTour.valeur)))\nsetCurrentPomp(parseInt(JSON.parse(currentPlayState.currentPomp.valeur)));setCurrentTour(parseInt(JSON.parse(currentPlayState.currentTour.valeur)));setCurrentCycle(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)));setCurrentSequence(parseInt(JSON.parse(currentPlayState.currentSequence.valeur)));setMursH(JSON.parse(currentPlayState.mursH.valeur));setMursV(JSON.parse(currentPlayState.mursV.valeur));setCarte(JSON.parse(currentPlayState.carte.valeur));setResultats({Decedes:parseInt(JSON.parse(currentPlayState.resultatsDecedes.valeur)),Sauves:parseInt(JSON.parse(currentPlayState.resultatsSauves.valeur))});setPlay(JSON.parse(currentPlayState.play.valeur));// if(parseInt(JSON.parse(currentPlayState.currentPomp.valeur))==1 && parseInt(JSON.parse(currentPlayState.currentTour.valeur))==1){\ngetBudget(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)),parseInt(JSON.parse(currentPlayState.currentSequence.valeur)));//  }\nc=parseInt(JSON.parse(currentPlayState.currrentChrono.valeur));if(configuration!==null&&c<=configuration.chronoTour.valeur&&parseInt(JSON.parse(currentPlayState.currentPomp.valeur))==numPompier){setChrono(c);}else{setChrono(null);// console.log(\"chrono\")\n}}getPositionFromCarte(JSON.parse(currentPlayState.carte.valeur));isLoading.current=false;case 10:case\"end\":return _context.stop();}}},_callee);}));return function getPlayState(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){// console.log(carte)\nif(carte.length>0){setNbLignesGrille(carte.length);setNbColonnesGrille(carte[0].length);getPositionFromCarte(carte);}},[carte]);// useEffect(()=>{\n//   console.log(currentTour)\n// },[currentTour])\nuseEffect(function(){if(session!=null&&equipe!=null&&currentTour==null){if(!isLoading.current&&configuration!==null)getPlayState(session,equipe);getPlayParameters();getPositionFromCarte(carte);}},[session,equipe,numPompier,configuration]);var getPlayParameters=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var param;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return PlayAPI.getConfiguration(session);case 2:param=_context2.sent;setConfiguration(param);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getPlayParameters(){return _ref2.apply(this,arguments);};}();var getPositionFromCarte=function getPositionFromCarte(carte){if(carte!=null&&carte.length>0){carte.forEach(function(ligne,indexI){ligne.forEach(function(valeur,indexJ){if(Math.floor(valeur/1000)==1&&Math.floor(valeur%1000/100)==numPompier){setPosition([indexI,indexJ]);setDeplacementEnCours({type:0,rotation:valeur%10});}});});}};// const onTextChange = (e) => {\n//   setNumPompier(e.target.value)\n//   console.log(typeof (e.target.value))\n// }\n// const onXChange = (e) => {\n//   e.preventDefault()\n//   if (e.target.value.length > 0) {\n//     updateCarte(position, 0)\n//     setPosition(position => [position[0], parseInt(e.target.value)])\n//   } else {\n//     updateCarte(position, 0)\n//     setPosition(position => [position[0], 0])\n//   }\n// }\n// const onYChange = (e) => {\n//   e.preventDefault()\n//   if (e.target.value.length > 0) {\n//     updateCarte(position, 0)\n//     setPosition(position => [parseInt(e.target.value), position[1]])\n//   } else {\n//     updateCarte(position, 0)\n//     setPosition(position => [0, position[1]])\n//   }\n// }\n// UPDATES\nvar updateCarte=function updateCarte(coords,value){if(coords[0]<nbLignesGrille&&coords[1]<nbColonnesGrille){try{var c=_toConsumableArray(carte);c[coords[0]][coords[1]]=value;setCarte(c);}catch(error){console.log(error);}}};var updateMurH=function updateMurH(coords,value){if(coords[0]<mursH.length&&coords[1]<mursH[0].length){try{var m=_toConsumableArray(mursH);m[coords[0]][coords[1]]=value;setMursH(m);}catch(error){console.log(error);}}};var updateMurV=function updateMurV(coords,value){if(coords[0]<mursV.length&&coords[1]<mursV[0].length){try{var m=_toConsumableArray(mursV);m[coords[0]][coords[1]]=value;setMursV(m);}catch(error){console.log(error);}}};// ACTIONS\nvar updateBudget=function updateBudget(action){var depenses=0;if(configuration[\"coutEq\"+action]!=null)depenses+=configuration[\"coutEq\"+action].valeur;if(configuration[\"coutInter\"+action]!=null)depenses+=configuration[\"coutInter\"+action].valeur;setBudget(function(budget){return budget-depenses;});setBudgetDepense(function(bd){return bd+depenses;});};var addHistAction=function addHistAction(budget,budgetDepense){var h=[].concat(_toConsumableArray(histActions),[{carte:JSON.stringify(carte),budget:JSON.stringify(budget),budgetDepense:JSON.stringify(budgetDepense),mursH:JSON.stringify(mursH),mursV:JSON.stringify(mursV),stocks:JSON.stringify(stocks),resultats:JSON.stringify(resultats),interventions:JSON.stringify(interventions),deplacementEnCours:JSON.stringify({type:0,rotation:deplacementEnCours.rotation})}]);setHistActions(h);};var retourAction=function retourAction(){isLoading.current=true;var h=_toConsumableArray(histActions);h.pop();var state=h[h.length-1];setCarte(JSON.parse(state.carte));setMursH(JSON.parse(state.mursH));setMursV(JSON.parse(state.mursV));setStocks(JSON.parse(state.stocks));setInterventions(JSON.parse(state.interventions));setResultats(JSON.parse(state.resultats));setBudget(JSON.parse(state.budget));setBudgetDepense(JSON.parse(state.budgetDepense));setDeplacementEnCours(JSON.parse(state.deplacementEnCours));setHistActions(h);isLoading.current=false;};useEffect(function(){if(position!==null&&stocks!==null&&budget>0&&deplacementEnCours.type==0&&(histActions[histActions.length-1]==undefined||budget<histActions[histActions.length-1].budget)){addHistAction(budget,budgetDepense);}},[deplacementEnCours,budgetDepense,stocks]);useEffect(function(){console.log(\"hist Actions\");console.log(histActions);},[histActions]);// useEffect(()=>{\n//   if( position!==null && budget>0){\n//     if(histActions[histActions.length-1]!==undefined && budget<histActions[histActions.length-1].budget ){\n//       addHistAction(budget)\n//     }\n//   }\n// },[budget])\nvar doAction=function doAction(action){try{if(Object.keys(stocks).includes(action)){var s=stocks;s[action]=s[action]-1;setStocks(s);}}catch(error){}try{if(Object.keys(interventions).includes(action)){var i=interventions;i[action]=i[action]-1;setInterventions(i);}}catch(error){}// setTimeout(() => {\nupdateBudget(action);// }, 1000);\n};var updateResultats=function updateResultats(sauve){var res=_objectSpread({},resultats);if(sauve){res.Sauves+=1;}else{res.Decedes+=1;}console.log(res);setResultats(res);};useEffect(function(){setBtnClickedBottom(null);revealHabitant();},[position]);useEffect(function(){if(carte.length>0)relacherHabitant();},[position,mursH,mursV]);// useEffect(() => {\n//   console.log(\"Stocks\")\n//   console.log(stocks)\n// }, [stocks])\nuseEffect(function(){if(configuration!=null){var inter=interventions;var interKeys=Object.keys(inter);interKeys.forEach(function(action){try{if(configuration[\"coutInter\"+action].valeur>0){inter[action]=Math.min(configuration[\"coutEq\"+action]!=null&&configuration[\"coutEq\"+action]!=undefined?Math.floor(budget/(configuration[\"coutInter\"+action].valeur+configuration[\"coutEq\"+action].valeur)):Math.floor(budget/configuration[\"coutInter\"+action].valeur),stocks!==null&&stocks[action]!=null&&stocks[action]!=undefined&&stocks[action]!=\"NaN\"?stocks[action]:1000);}}catch(error){console.log(error,action);}});setInterventions(inter);}else{// getPlayParameters()\n}},[budget,configuration,numPompier,stocks]);// SOCKETS\n// SOCKETS \nvar onTourChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();console.log(\"nouveau tour todo\");case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function onTourChange(_x3){return _ref3.apply(this,arguments);};}();var modifyBudgetsFin=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(cycle,sequence){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// console.log(\"budgets modified 0\")\nPlayAPI.getBudgetsPompFin(session,equipe).then(function(res){console.log(res);var budgetsFin=JSON.parse(res.valeur);try{budgetsFin.interventions.forEach(function(b,index){if(b.numCycle==cycle&&b.numSeq==sequence){budgetsFin[\"interventions\"][index][\"pomp\"+numPompier]=budget;}});}catch(error){}try{budgetsFin.equipements.forEach(function(e,index){if(e.numCycle==cycle&&e.numSeq==sequence){budgetsFin[\"equipements\"][index][\"Feu\"][\"pomp\"+numPompier]=stocks.Feu;budgetsFin[\"equipements\"][index][\"FeuFum\"][\"pomp\"+numPompier]=stocks.FeuFum;budgetsFin[\"equipements\"][index][\"Fum\"][\"pomp\"+numPompier]=stocks.Fum;budgetsFin[\"equipements\"][index][\"Marqueur\"][\"pomp\"+numPompier]=stocks.Marqueur;}});}catch(error){}// console.log(\"budgets modified 1\")\nreturn PlayAPI.saveBudgetsPompFin(budgetsFin,session,equipe).then(function(budgetsFin){// console.log(\"budgets modified\")\nreturn budgetsFin;});});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function modifyBudgetsFin(_x4,_x5){return _ref4.apply(this,arguments);};}();var getBudget=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(cycle,sequence){var nouveauBudget,budgetInter,stocksEq;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return PlayAPI.getBudgetsPompFin(session,equipe);case 2:nouveauBudget=_context5.sent;nouveauBudget=nouveauBudget.valeur;nouveauBudget=JSON.parse(nouveauBudget);budgetInter=0;stocksEq=stocks!==null&&stocks!==undefined?_objectSpread({},stocks):{Feu:0,FeuFum:0,Fum:0,Marqueur:0};try{nouveauBudget.interventions.forEach(function(b){if(b.numCycle==cycle&&b.numSeq==sequence){budgetInter=b[\"pomp\"+numPompier];}});}catch(error){}try{nouveauBudget.equipements.forEach(function(e){if(e.numCycle==cycle&&e.numSeq==sequence){stocksEq.Feu+=e.Feu[\"pomp\"+numPompier];stocksEq.FeuFum+=e.FeuFum[\"pomp\"+numPompier];stocksEq.Fum+=e.Fum[\"pomp\"+numPompier];stocksEq.Marqueur+=e.Marqueur[\"pomp\"+numPompier];}});}catch(error){}// console.log(nouveauBudget)\nif(budgetInter!==budget){setBudget(budgetInter);setBudgetDepense(0);}setStocks(stocksEq);case 11:case\"end\":return _context5.stop();}}},_callee5);}));return function getBudget(_x6,_x7){return _ref5.apply(this,arguments);};}();var _useState47=useState(null),_useState48=_slicedToArray(_useState47,2),socket=_useState48[0],setSocket=_useState48[1];// console.log(socket)\nuseEffect(function(){if(socket===null&&configuration!==null){var s=io.connect(\"https://www.back.leaders-extreme.fr:4000\");setSocket(s);s.on('changementTour',function(data){if(currentPomp!=data.currentPomp||currentCycle!==data.currentCycle||currentTour!==data.currentTour||currentSequence!==data.currentSequence){console.log(\"changement tour\");getPlayState(session,equipe);}});s.on('revealHabitant',function(data){if(carte!==null&&carte.length>0){// console.log(carte[data.y][data.x])\n// console.log(carte[data.y])\nif(carte[data.y][data.x]==20){// console.log([data.y,data.x])\nupdateCarte([data.y,data.x],data.type);// console.log(\"socket hab\")\n// console.log(data)\n}}});s.on('startStopPartie',function(data){setPlay(data.start);});}},[socket,configuration]);// TESTS\nvar test=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(\"test function\");case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function test(){return _ref6.apply(this,arguments);};}();// AUTORISATIONS \nvar deplacementAutorise=function deplacementAutorise(deplacement){// return true\nvar dpl=_toConsumableArray(deplacement);if(dpl[0]==0&&dpl[1]==0)return false;if(position[0]+dpl[0]>carte.length-1||position[1]+dpl[1]>carte[0].length-1||position[0]+dpl[0]<0||position[1]+dpl[1]<0)return false;var dplInterditsCases=[1000,20,3,4];try{var valeurCaseDeplacement=carte[position[0]+dpl[0]][position[1]+dpl[1]];if(Math.floor(valeurCaseDeplacement/1000)==1)return false;if(Math.floor(valeurCaseDeplacement/10)==2)return false;if(dplInterditsCases.includes(valeurCaseDeplacement))return false;}catch(error){}var dplInterditsMurs=[1,2,3,5];try{if(dpl[0]!=0){// haut bas\nif(dpl[0]<0){dpl[0]=0;}if(typeof mursH[position[0]+dpl[0]][position[1]]==='undefined')return false;if(dplInterditsMurs.includes(mursH[position[0]+dpl[0]][position[1]]))return false;}else{// gauche droite\nif(dpl[1]<0){dpl[1]=0;}if(typeof mursV[position[0]][position[1]+dpl[1]]==='undefined')return false;if(dplInterditsMurs.includes(mursV[position[0]][position[1]+dpl[1]]))return false;}}catch(error){}return true;};var testRelacherHabitant=function testRelacherHabitant(){if(carte[position[0]][position[1]]%100<10)return false;// pas de transport d'habitant\nvar mursBloquants=[1,2,3,5];if(position[0]==0&&!mursBloquants.includes(mursH[position[0]][position[1]]))return true;// haut\nif(position[0]==nbLignesGrille-1&&!mursBloquants.includes(mursH[position[0]+1][position[1]]))return true;// bas\nif(position[1]==0&&!mursBloquants.includes(mursV[position[0]][position[1]]))return true;// gauche\nif(position[1]==nbColonnesGrille-1&&!mursBloquants.includes(mursV[position[0]][position[1]+1]))return true;// droite\nreturn false;};var relacherHabitant=function relacherHabitant(){if(testRelacherHabitant()){setTimeout(function(){updateResultats(true);updateCarte(position,carte[position[0]][position[1]]-(carte[position[0]][position[1]]%100-carte[position[0]][position[1]]%10));},1000);}};var revealHabitant=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var casesAutour,response,_response,_response2,_response3;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(configuration!=null)){_context7.next=46;break;}casesAutour=getCasesAutour();_context7.prev=2;if(!(casesAutour.dessus==20)){_context7.next=9;break;}updateCarte([position[0]-1,position[1]],0);resetHistAction();_context7.next=8;return PlayAPI.revealHabitant(socket,[position[0]-1,position[1]],0);case 8:response=_context7.sent;case 9:_context7.next=13;break;case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](2);case 13:_context7.prev=13;if(!(casesAutour.droite==20)){_context7.next=20;break;}updateCarte([position[0],position[1]+1],0);resetHistAction();_context7.next=19;return PlayAPI.revealHabitant(socket,[position[0],position[1]+1],0);case 19:_response=_context7.sent;case 20:_context7.next=24;break;case 22:_context7.prev=22;_context7.t1=_context7[\"catch\"](13);case 24:_context7.prev=24;if(!(casesAutour.dessous==20)){_context7.next=31;break;}updateCarte([position[0]+1,position[1]],0);resetHistAction();_context7.next=30;return PlayAPI.revealHabitant(socket,[position[0]+1,position[1]],0);case 30:_response2=_context7.sent;case 31:_context7.next=35;break;case 33:_context7.prev=33;_context7.t2=_context7[\"catch\"](24);case 35:_context7.prev=35;if(!(casesAutour.gauche==20)){_context7.next=42;break;}updateCarte([position[0],position[1]-1],0);resetHistAction();_context7.next=41;return PlayAPI.revealHabitant(socket,[position[0],position[1]-1],0);case 41:_response3=_context7.sent;case 42:_context7.next=46;break;case 44:_context7.prev=44;_context7.t3=_context7[\"catch\"](35);case 46:case\"end\":return _context7.stop();}}},_callee7,null,[[2,11],[13,22],[24,33],[35,44]]);}));return function revealHabitant(){return _ref7.apply(this,arguments);};}();var getCasesAutour=function getCasesAutour(){var cases={};try{cases[\"dessus\"]=carte[position[0]-1][position[1]];// dessus\n}catch(error){}try{cases[\"droite\"]=carte[position[0]][position[1]+1];// droite\n}catch(error){}try{cases[\"dessous\"]=carte[position[0]+1][position[1]];// dessous\n}catch(error){}try{cases[\"gauche\"]=carte[position[0]][position[1]-1];// gauche\n}catch(error){}return cases;};var getMursAutour=function getMursAutour(){var murs=[];try{if(mursH[position[0]][position[1]]!=4||mursH[position[0]][position[1]-1]<6&&mursH[position[0]][position[1]+1]<6){murs.push(mursH[position[0]][position[1]]);// dessus\n}else{murs.push(0);}}catch(error){}try{if(mursV[position[0]][position[1]+1]!=4||mursV[position[0]-1][position[1]+1]<6&&mursV[position[0]+1][position[1]+1]<6){murs.push(mursV[position[0]][position[1]+1]);// droite\n}else{murs.push(0);}}catch(error){}try{if(mursH[position[0]+1][position[1]]!=4||mursH[position[0]+1][position[1]-1]<6&&mursH[position[0]+1][position[1]+1]<6){murs.push(mursH[position[0]+1][position[1]]);// dessous\n}else{murs.push(0);}}catch(error){}try{if(mursV[position[0]][position[1]]!=4||mursV[position[0]-1][position[1]]<6&&mursV[position[0]+1][position[1]]<6){murs.push(mursV[position[0]][position[1]]);// gauche\n}else{murs.push(0);}}catch(error){}// console.log(murs)\nreturn murs;};var resetHistAction=function resetHistAction(){setTimeout(function(){setHistActions([{carte:JSON.stringify(carte),budget:JSON.stringify(budget),budgetDepense:JSON.stringify(budgetDepense),mursH:JSON.stringify(mursH),mursV:JSON.stringify(mursV),stocks:JSON.stringify(stocks),resultats:JSON.stringify(resultats),interventions:JSON.stringify(interventions)}]);},300);};var _useState49=useState(null),_useState50=_slicedToArray(_useState49,2),btnClickedBottom=_useState50[0],setBtnClickedBottom=_useState50[1];var _useState51=useState([]),_useState52=_slicedToArray(_useState51,2),propositionsCase=_useState52[0],setPropositionsCase=_useState52[1];// Extincteurs\nvar _useState53=useState([[],[]]),_useState54=_slicedToArray(_useState53,2),propositionMursDetruire=_useState54[0],setPropositionMursDetruire=_useState54[1];// Horizontaux  , Verticaux\nuseEffect(function(){if(btnClickedBottom!=3||btnClickedBottom==null){setPropositionMursDetruire([[],[]]);}if(btnClickedBottom>2&&btnClickedBottom<6||btnClickedBottom==null){setPropositionsCase([]);}},[btnClickedBottom]);// HANDLERS CLIC GRILLE\nvar handleClicCase=function handleClicCase(valeurAvant,valeurApres,coordX,coordY){console.log(valeurAvant,valeurApres,coordX,coordY);try{updateCarte([coordY,coordX],valeurApres);setPropositionsCase([]);setBtnClickedBottom(null);if(valeurAvant==4&&valeurApres==0){// Extincteur flamme\ndoAction(\"Feu\");}if(valeurAvant==4&&valeurApres==3){// Feu Fumée\ndoAction(\"FeuFum\");}if(valeurAvant==3&&valeurApres==0){// Fumée\ndoAction(\"Fum\");}if(Math.floor(valeurAvant/10)==2&&valeurApres==0){// Habitant\ndoAction(\"Habitant\");updateCarte(position,carte[position[0]][position[1]]+valeurAvant%10);}}catch(error){}};var handleClicMur=function handleClicMur(num,valeurAvant,coordX,coordY){// marqueur dégat\nif(propositionMursDetruire[0].length>0||propositionMursDetruire[1].length>0){var checkInCoords=function checkInCoords(index){// console.log(\"coordx\",coordX,\"coordy\",coordY,\"position\",position)\nvar numClic=null;if(coordX==position[1]&&(coordY<position[0]||coordY==position[0]&&num==0)){// top\nnumClic=0;// case en question\n// console.log(\"top\",numClic)\n}if(coordX==position[1]&&(coordY>position[0]||coordY==position[0]&&num==2)){// bottom\nnumClic=2;// case en question\n// console.log(\"bottom\",numClic)\n}if(coordY==position[0]&&(coordX<position[1]||coordX==position[1]&&num==3)){// left\nnumClic=3;// case en question\n// console.log(\"left\",numClic)\n}if(coordY==position[0]&&(coordX>position[1]||coordX==position[1]&&num==1)){// right\nnumClic=1;// case en question\n// console.log(\"right\",numClic)\n}return numClic;};var cote=checkInCoords(num%2);var valeurApres=4;if(valeurAvant==1)valeurApres=3;if(cote!=null){try{switch(cote){case 0:updateMurH([position[0],position[1]],valeurApres);// if(valeurAvant==5 ||)\nbreak;case 1:updateMurV([position[0],position[1]+1],valeurApres);break;case 2:updateMurH([position[0]+1,position[1]],valeurApres);break;case 3:updateMurV([position[0],position[1]],valeurApres);break;}doAction(\"Marqueur\");}catch(error){}setPropositionMursDetruire([[],[]]);setBtnClickedBottom(null);}}};// HANDLER CLICS BOUTONS\nvar handleClicFleche=function handleClicFleche(num){// Position y x\nvar deplacement;var rotation;switch(num){case 0:// haut\n// console.log(\"haut\")\ndeplacement=[-1,0];rotation=1;break;case 1:// droite\n// console.log(\"droite\")\ndeplacement=[0,1];rotation=2;break;case 2:// bas\n// console.log(\"bas\")\ndeplacement=[1,0];rotation=3;break;case 3:// gauche\n// console.log(\"gauche\")\ndeplacement=[0,-1];rotation=4;break;}if(deplacementAutorise(deplacement)){// ANIMATION MARCHE\nsetDeplacementEnCours({type:1,rotation:rotation});setTimeout(function(){updateCarte([position[0]+deplacement[0],position[1]+deplacement[1]],carte[position[0]][position[1]]-carte[position[0]][position[1]]%10+rotation);// setPosition(position => [position[0] + deplacement[0], position[1] + deplacement[1]])\ndoAction(\"Deplacement\");updateCarte(position,0);setDeplacementEnCours({type:2,rotation:rotation});setTimeout(function(){setDeplacementEnCours({type:0,rotation:rotation});},500);},500);}};var handleChangePiece=function handleChangePiece(){resetHistAction();};var handleClicDoor=function handleClicDoor(ouvrir){// position, ouvert/fermé\nsetBtnClickedBottom(ouvrir?4:5);var valueAvant;var valueApres;if(ouvrir){valueAvant=5;valueApres=6;}else{valueAvant=6;valueApres=5;}doAction(\"Porte\");try{if(mursH[position[0]][position[1]]==valueAvant)updateMurH([position[0],position[1]],valueApres);if(mursH[position[0]+1][position[1]]==valueAvant)updateMurH([position[0]+1,position[1]],valueApres);if(mursV[position[0]][position[1]]==valueAvant)updateMurV([position[0],position[1]],valueApres);if(mursV[position[0]][position[1]+1]==valueAvant)updateMurV([position[0],position[1]+1],valueApres);}catch(error){}};var handleClicExtincteur=function handleClicExtincteur(num){// 0 FEU, 1 FEUFUM, 2 FUM\nif(btnClickedBottom!=num){var listeCasesAction=[];var valeurAvant=4;var valeurApres=0;setBtnClickedBottom(num);switch(num){case 0:// ETEINDRE FEU\nbreak;case 1:// FEU FUM\nvaleurApres=3;break;case 2:// ETEINDRE FUMEE\nvaleurAvant=3;break;}try{if(carte[position[0]-1][position[1]]==valeurAvant)listeCasesAction.push([position[0]-1,position[1],valeurAvant,valeurApres]);// TOP\n}catch(error){}try{if(carte[position[0]][position[1]+1]==valeurAvant)listeCasesAction.push([position[0],position[1]+1,valeurAvant,valeurApres]);// RIGHT\n}catch(error){}try{if(carte[position[0]+1][position[1]]==valeurAvant)listeCasesAction.push([position[0]+1,position[1],valeurAvant,valeurApres]);// BOTTOM\n}catch(error){}try{if(carte[position[0]][position[1]-1]==valeurAvant)listeCasesAction.push([position[0],position[1]-1,valeurAvant,valeurApres]);// LEFT\n}catch(error){}setPropositionsCase(listeCasesAction);}else{setBtnClickedBottom(null);}};var handleClicMarqueur=function handleClicMarqueur(){if(btnClickedBottom!=3){setBtnClickedBottom(3);if(propositionMursDetruire[0].length>0||propositionMursDetruire[1].length>0){setPropositionMursDetruire([[],[]]);}else{var mursADetruire=[1,3,5,6];var propositions=[[],[]];var mursAutour=getMursAutour();try{if(mursADetruire.includes(mursAutour[0]))propositions[0].push([position[1],position[0]]);// top\nif(mursADetruire.includes(mursAutour[1]))propositions[1].push([position[1]+1,position[0]]);// right\nif(mursADetruire.includes(mursAutour[2]))propositions[0].push([position[1],position[0]+1]);// bottom\nif(mursADetruire.includes(mursAutour[3]))propositions[1].push([position[1],position[0]]);// left\n}catch(error){}setPropositionMursDetruire(propositions);}}else{setBtnClickedBottom(null);}};var handleClicValidated=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(bool){var prochainPomp,prochainTour,prochainCycle,prochaineSequence;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(\"handle Clic\");if(!(configuration!=null)){_context8.next=15;break;}if(!bool){_context8.next=13;break;}prochainPomp=currentPomp+1;prochainTour=currentTour;prochainCycle=currentCycle;prochaineSequence=currentSequence;if(numPompier==configuration.nbPompEquipe.valeur){// DERNIER POMP DU TOUR\nif(currentTour==configuration.nbToursParCycle.valeur){// SEND TO INTER\nprochainTour=1;prochainPomp=0;// A CHANGER AVEC STRATEGIQUE\nif(prochainCycle==configuration.nbCyclesParSequence.valeur){prochainCycle=1;prochaineSequence=prochaineSequence+1;}else{prochainCycle=prochainCycle+1;}}else{// PAS DERNIER TOUR DU CYCLE\nconsole.log(\"pas dernier tour\");prochainPomp=1;prochainTour=prochainTour+1;}}// console.log(prochainPomp,prochainTour,prochainCycle)\n// console.log(\"budgets fin 1\")\n// const res = modifyBudgetsFin(currentCycle, currentSequence).then(() => {\n_context8.next=10;return PlayAPI.nouveauTour(socket,prochainPomp,carte,mursH,mursV,prochaineSequence,prochainCycle,prochainTour,resultats.Decedes,resultats.Sauves,session,equipe,configuration.chronoTour.valeur);case 10:resetHistAction();// setChrono(null)\n_context8.next=15;break;case 13:retourAction();console.log(\"retour\");case 15:case\"end\":return _context8.stop();}}},_callee8);}));return function handleClicValidated(_x8){return _ref8.apply(this,arguments);};}();var handleNoClicked=function handleNoClicked(){setPropositionMursDetruire([[],[]]);setPropositionsCase([]);};var handleClicHabitant=function handleClicHabitant(){if(btnClickedBottom!=6){setBtnClickedBottom(6);var valeurApres=0;var listeCasesAction=[];try{var valeurDessus=carte[position[0]-1][position[1]];if(Math.floor(valeurDessus/10)==2)listeCasesAction.push([position[0]-1,position[1],valeurDessus,valeurApres]);// TOP\n}catch(error){}try{var valeurDroite=carte[position[0]][position[1]+1];if(Math.floor(valeurDroite/10)==2)listeCasesAction.push([position[0],position[1]+1,valeurDroite,valeurApres]);// RIGHT\n}catch(error){}try{var valeurDessous=carte[position[0]+1][position[1]];if(Math.floor(valeurDessous/10)==2)listeCasesAction.push([position[0]+1,position[1],valeurDessous,valeurApres]);// BOTTOM\n}catch(error){}try{var valeurGauche=carte[position[0]][position[1]-1];if(Math.floor(valeurGauche/10)==2)listeCasesAction.push([position[0],position[1]-1,valeurGauche,valeurApres]);// LEFT\n}catch(error){}setPropositionsCase(listeCasesAction);console.log(\"handle clic habitant\");}else{setBtnClickedBottom(null);}};var _useState55=useState(null),_useState56=_slicedToArray(_useState55,2),textes=_useState56[0],setTextes=_useState56[1];useEffect(function(){var getTextes=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var textes;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:textes=ContentsAPI.getTexts(\"jeuTactInterface\").then(function(res){setTextes(res);});case 1:case\"end\":return _context9.stop();}}},_callee9);}));return function getTextes(){return _ref9.apply(this,arguments);};}();if(textes==null){getTextes();}// console.log(textes)\n},[textes]);var getText=function getText(name){if(textes==null){return name;}else{try{return textes[name].contenu;}catch(error){console.log(textes);return name;}}};var renderAttenteLancement=function renderAttenteLancement(){return/*#__PURE__*/_jsxs(\"div\",{style:{color:\"gray\",textAlign:\"center\",fontSize:20},children:[/*#__PURE__*/_jsx(Typography,{children:getText('attenteLancement')}),/*#__PURE__*/_jsx(Typography,{children:getText('infoLancement')})]});};return/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",display:\"flex\",alignItems:\"center\",flexDirection:\"column\",justifyContent:\"center\",flex:1,width:\"100%\",height:\"100%\"},children:carte.length>0&&position!=null&&stocks!==null&&numPompier!==null&&play?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grille,{nbColonnesGrille:nbColonnesGrille,nbLignesGrille:nbLignesGrille,carte:carte,position:position,mursH:mursH,mursV:mursV,propositionMursDetruire:propositionMursDetruire,propositionsCase:propositionsCase,handleClicMur:handleClicMur,handleClicCase:handleClicCase,handleChangePiece:handleChangePiece,deplacementEnCours:deplacementEnCours}),/*#__PURE__*/_jsx(TactBandeauTop,{stocks:stocks,resultats:resultats,numeroPompier:numPompier,sequence:currentSequence,cycle:currentCycle,tour:currentTour,pomp:currentPomp,configuration:configuration,budget:budget,budgetDepense:budgetDepense,equipe:equipe,handleClicValidated:handleClicValidated,play:play,chronoInit:chrono,numEquipe:equipe,numSession:session}),/*#__PURE__*/_jsx(TactBandeauBottom,{interventions:interventions,stocks:stocks,numeroPompier:numPompier,tour:currentTour,pomp:currentPomp,handleClicFleche:handleClicFleche,handleClicValidated:handleClicValidated,handleClicDoor:handleClicDoor,handleClicMarqueur:handleClicMarqueur,handleClicExt:handleClicExtincteur,handleNoClicked:handleNoClicked,handleClicHabitant:handleClicHabitant,btnClickedBottom:btnClickedBottom,mursAutour:getMursAutour(),casesAutour:getCasesAutour(),currentCase:carte[position[0]][position[1]],histActions:histActions,configuration:configuration,deplacementEnCours:deplacementEnCours,budgetMaxAtteint:budgetDepense>=configuration.budgetTourMax.valeur,isLoading:isLoading.current}),/*#__PURE__*/_jsx(TactBandeauDroite,{handleDisconnect:handleDisconnect,configuration:configuration})]}):renderAttenteLancement()});};export default TactInterface;// export default React.memo(TactInterface)","map":{"version":3,"sources":["C:/Users/hugod/decitude/client/src/routes/TactInterface.js"],"names":["React","useState","useEffect","useRef","PlayAPI","TactBandeauTop","TactBandeauBottom","Grille","useHistory","Typography","cookie","TactBandeauDroite","ContentsAPI","io","TactInterface","history","user","load","handleDisconnect","save","path","maxAge","push","undefined","role","includes","play","setPlay","replace","numPompier","setNumPompier","currentPomp","setCurrentPomp","currentTour","setCurrentTour","currentCycle","setCurrentCycle","currentSequence","setCurrentSequence","session","setSession","equipe","setEquipe","position","setPosition","type","rotation","deplacementEnCours","setDeplacementEnCours","histActions","setHistActions","chrono","setChrono","configuration","setConfiguration","stocks","setStocks","Decedes","Sauves","resultats","setResultats","Deplacement","Feu","FeuFum","Fum","Marqueur","Porte","Habitant","interventions","setInterventions","budget","setBudget","budgetDepense","setBudgetDepense","isLoading","carte","setCarte","nbLignesGrille","setNbLignesGrille","nbColonnesGrille","setNbColonnesGrille","mursH","setMursH","mursV","setMursV","getPlayState","console","log","current","currentPlayState","Object","keys","length","parseInt","JSON","parse","valeur","resultatsDecedes","resultatsSauves","getBudget","c","currrentChrono","chronoTour","getPositionFromCarte","getPlayParameters","getConfiguration","param","forEach","ligne","indexI","indexJ","Math","floor","updateCarte","coords","value","error","updateMurH","m","updateMurV","updateBudget","action","depenses","bd","addHistAction","h","stringify","retourAction","pop","state","doAction","s","i","updateResultats","sauve","res","setBtnClickedBottom","revealHabitant","relacherHabitant","inter","interKeys","min","onTourChange","e","preventDefault","modifyBudgetsFin","cycle","sequence","getBudgetsPompFin","then","budgetsFin","b","index","numCycle","numSeq","equipements","saveBudgetsPompFin","nouveauBudget","budgetInter","stocksEq","socket","setSocket","connect","on","data","y","x","start","test","deplacementAutorise","deplacement","dpl","dplInterditsCases","valeurCaseDeplacement","dplInterditsMurs","testRelacherHabitant","mursBloquants","setTimeout","casesAutour","getCasesAutour","dessus","resetHistAction","response","droite","dessous","gauche","cases","getMursAutour","murs","btnClickedBottom","propositionsCase","setPropositionsCase","propositionMursDetruire","setPropositionMursDetruire","handleClicCase","valeurAvant","valeurApres","coordX","coordY","handleClicMur","num","checkInCoords","numClic","cote","handleClicFleche","handleChangePiece","handleClicDoor","ouvrir","valueAvant","valueApres","handleClicExtincteur","listeCasesAction","handleClicMarqueur","mursADetruire","propositions","mursAutour","handleClicValidated","bool","prochainPomp","prochainTour","prochainCycle","prochaineSequence","nbPompEquipe","nbToursParCycle","nbCyclesParSequence","nouveauTour","handleNoClicked","handleClicHabitant","valeurDessus","valeurDroite","valeurDessous","valeurGauche","textes","setTextes","getTextes","getTexts","getText","name","contenu","renderAttenteLancement","color","textAlign","fontSize","display","alignItems","flexDirection","justifyContent","flex","width","height","budgetTourMax"],"mappings":"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","sourcesContent":["import \"../styles/App.css\"\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport PlayAPI from \"../API/PlayAPI\"\r\nimport TactBandeauTop from \"../components/interfaceJoueur/TactBandeauTop\"\r\nimport TactBandeauBottom from \"../components/interfaceJoueur/TactBandeauBottom\"\r\nimport Grille from \"../components/interfaceJoueur/Grille\"\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Typography } from \"@material-ui/core\"\r\n\r\nimport cookie from 'react-cookies'\r\nimport TactBandeauDroite from \"../components/interfaceJoueur/TactBandeauDroite\"\r\nimport ContentsAPI from \"../API/ContentsAPI\"\r\nimport io from 'socket.io-client'\r\n\r\n\r\nconst TactInterface = () => {\r\n\r\n  const history = useHistory()\r\n  const user = cookie.load(\"user\")\r\n  const handleDisconnect = () => {\r\n    cookie.save('user', \"disconnected\", {\r\n      path: '/',\r\n      maxAge: 60 * 60 * 1.5, //sec\r\n    })\r\n    history.push('/login');\r\n  }\r\n\r\n  if (user === null || user === undefined || user == \"disconnected\") history.push(\"/login\");\r\n  if (user !== null && user !== undefined && user.role !== undefined && !user.role.includes(\"TACT\")) handleDisconnect()\r\n  const [play, setPlay] = useState(false)\r\n\r\n\r\n\r\n  const [numPompier, setNumPompier] = useState(user !== null && user !== undefined && user.role !== undefined ? user.role.replace(\"TACT\", \"\") : null)\r\n  const [currentPomp, setCurrentPomp] = useState(null)\r\n  const [currentTour, setCurrentTour] = useState(null)\r\n  const [currentCycle, setCurrentCycle] = useState(null)\r\n  const [currentSequence, setCurrentSequence] = useState(null)\r\n  const [session, setSession] = useState(user != null ? user.session : null)\r\n  const [equipe, setEquipe] = useState(user != null ? user.equipe : null)\r\n  const [position, setPosition] = useState(null)\r\n  const [deplacementEnCours, setDeplacementEnCours] = useState({\r\n    type: 0,\r\n    rotation: 1\r\n  })\r\n  const [histActions, setHistActions] = useState([])\r\n  const [chrono, setChrono] = useState(null)\r\n  useEffect(() => {\r\n    if (numPompier == null) handleDisconnect()\r\n  }, [numPompier])\r\n\r\n\r\n\r\n\r\n  const [configuration, setConfiguration] = useState(null)\r\n\r\n  const [stocks, setStocks] = useState(null)\r\n\r\n  const [resultats, setResultats] = useState({\r\n    Decedes: 0,\r\n    Sauves: 0\r\n  })\r\n\r\n  const [interventions, setInterventions] = useState({\r\n    Deplacement: 0,\r\n    Feu: 0,\r\n    FeuFum: 0,\r\n    Fum: 0,\r\n    Marqueur: 0,\r\n    Porte: 0,\r\n    Habitant: 0\r\n  })\r\n\r\n  const [budget, setBudget] = useState(0)\r\n  const [budgetDepense, setBudgetDepense] = useState(0)\r\n\r\n\r\n  const isLoading = useRef(false)\r\n\r\n  // INITIALISATION DE LA CARTE\r\n\r\n  // const [carte, setCarte] = useState([\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  // ])\r\n\r\n  const [carte, setCarte] = useState([])\r\n\r\n  const [nbLignesGrille, setNbLignesGrille] = useState(0)\r\n  const [nbColonnesGrille, setNbColonnesGrille] = useState(0)\r\n\r\n  const [mursH, setMursH] = useState([\r\n    [1, 1, 1, 1, 1, 1, 2, 6, 1, 1, 1, 1, 2, 5, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 2, 6, 1, 6, 2, 1, 1, 1, 5, 2, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1]\r\n  ])\r\n\r\n  const [mursV, setMursV] = useState([\r\n    [1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [5, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 2],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 5]\r\n  ])\r\n\r\n\r\n\r\n  // GET PLAY PARAMETERS \r\n  const getPlayState = async (session, equipe) => {\r\n    console.log(\"get play state\")\r\n    if (!isLoading.current) {\r\n      isLoading.current = true\r\n      const currentPlayState = await PlayAPI.getPlayState(session, equipe)\r\n      console.log(currentPlayState)\r\n      if (Object.keys(currentPlayState).length > 0) {\r\n        // console.log(parseInt(JSON.parse(currentPlayState.currentTour.valeur)))\r\n\r\n        setCurrentPomp(parseInt(JSON.parse(currentPlayState.currentPomp.valeur)))\r\n        setCurrentTour(parseInt(JSON.parse(currentPlayState.currentTour.valeur)))\r\n        setCurrentCycle(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)))\r\n        setCurrentSequence(parseInt(JSON.parse(currentPlayState.currentSequence.valeur)))\r\n\r\n        setMursH(JSON.parse(currentPlayState.mursH.valeur))\r\n        setMursV(JSON.parse(currentPlayState.mursV.valeur))\r\n        setCarte(JSON.parse(currentPlayState.carte.valeur))\r\n        setResultats({\r\n          Decedes: parseInt(JSON.parse(currentPlayState.resultatsDecedes.valeur)),\r\n          Sauves: parseInt(JSON.parse(currentPlayState.resultatsSauves.valeur)),\r\n        })\r\n        setPlay(JSON.parse(currentPlayState.play.valeur))\r\n        // if(parseInt(JSON.parse(currentPlayState.currentPomp.valeur))==1 && parseInt(JSON.parse(currentPlayState.currentTour.valeur))==1){\r\n        getBudget(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)), parseInt(JSON.parse(currentPlayState.currentSequence.valeur)))\r\n        //  }\r\n        const c = parseInt(JSON.parse(currentPlayState.currrentChrono.valeur))\r\n        if (configuration !== null && c <= configuration.chronoTour.valeur && parseInt(JSON.parse(currentPlayState.currentPomp.valeur)) == numPompier) {\r\n          setChrono(c)\r\n        } else {\r\n          setChrono(null)\r\n          // console.log(\"chrono\")\r\n        }\r\n      }\r\n      getPositionFromCarte(JSON.parse(currentPlayState.carte.valeur))\r\n      isLoading.current = false\r\n    }\r\n\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    // console.log(carte)\r\n    if (carte.length > 0) {\r\n      setNbLignesGrille(carte.length)\r\n      setNbColonnesGrille(carte[0].length)\r\n      getPositionFromCarte(carte)\r\n    }\r\n\r\n  }, [carte])\r\n\r\n  // useEffect(()=>{\r\n  //   console.log(currentTour)\r\n  // },[currentTour])\r\n\r\n\r\n  useEffect(() => {\r\n    if (session != null && equipe != null && currentTour == null) {\r\n      if (!isLoading.current && configuration !== null) getPlayState(session, equipe)\r\n      getPlayParameters()\r\n      getPositionFromCarte(carte)\r\n    }\r\n  }, [session, equipe, numPompier, configuration])\r\n\r\n  const getPlayParameters = async () => {\r\n    const param = await PlayAPI.getConfiguration(session)\r\n    setConfiguration(param)\r\n  }\r\n\r\n  const getPositionFromCarte = (carte) => {\r\n    if (carte != null && carte.length > 0) {\r\n      carte.forEach((ligne, indexI) => {\r\n        ligne.forEach((valeur, indexJ) => {\r\n\r\n          if (Math.floor(valeur / 1000) == 1 && Math.floor(valeur % 1000 / 100) == numPompier) {\r\n            setPosition([indexI, indexJ])\r\n            setDeplacementEnCours({\r\n              type: 0,\r\n              rotation: valeur % 10\r\n            })\r\n          }\r\n\r\n        })\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  // const onTextChange = (e) => {\r\n  //   setNumPompier(e.target.value)\r\n  //   console.log(typeof (e.target.value))\r\n  // }\r\n\r\n  // const onXChange = (e) => {\r\n  //   e.preventDefault()\r\n  //   if (e.target.value.length > 0) {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [position[0], parseInt(e.target.value)])\r\n  //   } else {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [position[0], 0])\r\n  //   }\r\n\r\n  // }\r\n  // const onYChange = (e) => {\r\n  //   e.preventDefault()\r\n  //   if (e.target.value.length > 0) {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [parseInt(e.target.value), position[1]])\r\n  //   } else {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [0, position[1]])\r\n  //   }\r\n  // }\r\n\r\n\r\n  // UPDATES\r\n  const updateCarte = (coords, value) => {\r\n    if (coords[0] < nbLignesGrille && coords[1] < nbColonnesGrille) {\r\n      try {\r\n        var c = [...carte]\r\n        c[coords[0]][coords[1]] = value\r\n        setCarte(c)\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n  const updateMurH = (coords, value) => {\r\n    if (coords[0] < mursH.length && coords[1] < mursH[0].length) {\r\n      try {\r\n        var m = [...mursH]\r\n        m[coords[0]][coords[1]] = value\r\n        setMursH(m)\r\n\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n  }\r\n  const updateMurV = (coords, value) => {\r\n    if (coords[0] < mursV.length && coords[1] < mursV[0].length) {\r\n      try {\r\n        var m = [...mursV]\r\n        m[coords[0]][coords[1]] = value\r\n        setMursV(m)\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // ACTIONS\r\n\r\n  const updateBudget = (action) => {\r\n    var depenses = 0\r\n    if (configuration[\"coutEq\" + action] != null) depenses += configuration[\"coutEq\" + action].valeur\r\n    if (configuration[\"coutInter\" + action] != null) depenses += configuration[\"coutInter\" + action].valeur\r\n    setBudget(budget => budget - depenses)\r\n    setBudgetDepense(bd => bd + depenses)\r\n  }\r\n\r\n\r\n\r\n\r\n  const addHistAction = (budget, budgetDepense) => {\r\n    const h = [...histActions, {\r\n      carte: JSON.stringify(carte),\r\n      budget: JSON.stringify(budget),\r\n      budgetDepense: JSON.stringify(budgetDepense),\r\n      mursH: JSON.stringify(mursH),\r\n      mursV: JSON.stringify(mursV),\r\n      stocks: JSON.stringify(stocks),\r\n      resultats: JSON.stringify(resultats),\r\n      interventions: JSON.stringify(interventions),\r\n      deplacementEnCours: JSON.stringify({\r\n        type: 0,\r\n        rotation: deplacementEnCours.rotation\r\n      })\r\n    }]\r\n\r\n\r\n    setHistActions(h)\r\n  }\r\n\r\n  const retourAction = () => {\r\n    isLoading.current = true\r\n    var h = [...histActions]\r\n    h.pop()\r\n    const state = h[h.length - 1]\r\n\r\n\r\n    setCarte(JSON.parse(state.carte))\r\n    setMursH(JSON.parse(state.mursH))\r\n    setMursV(JSON.parse(state.mursV))\r\n    setStocks(JSON.parse(state.stocks))\r\n    setInterventions(JSON.parse(state.interventions))\r\n    setResultats(JSON.parse(state.resultats))\r\n    setBudget(JSON.parse(state.budget))\r\n    setBudgetDepense(JSON.parse(state.budgetDepense))\r\n\r\n    setDeplacementEnCours(JSON.parse(state.deplacementEnCours))\r\n    setHistActions(h)\r\n\r\n    isLoading.current = false\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (position !== null && stocks !== null && budget > 0 && deplacementEnCours.type == 0 && (histActions[histActions.length - 1] == undefined || budget < histActions[histActions.length - 1].budget)) {\r\n      addHistAction(budget, budgetDepense)\r\n    }\r\n  }, [deplacementEnCours, budgetDepense, stocks])\r\n\r\n  useEffect(() => {\r\n    console.log(\"hist Actions\")\r\n    console.log(histActions)\r\n  }, [histActions])\r\n\r\n  // useEffect(()=>{\r\n  //   if( position!==null && budget>0){\r\n\r\n  //     if(histActions[histActions.length-1]!==undefined && budget<histActions[histActions.length-1].budget ){\r\n\r\n  //       addHistAction(budget)\r\n  //     }\r\n  //   }\r\n  // },[budget])\r\n\r\n  const doAction = (action) => {\r\n    try {\r\n      if (Object.keys(stocks).includes(action)) {\r\n        var s = stocks\r\n        s[action] = s[action] - 1\r\n        setStocks(s)\r\n      }\r\n\r\n    } catch (error) { }\r\n\r\n    try {\r\n      if (Object.keys(interventions).includes(action)) {\r\n        var i = interventions\r\n        i[action] = i[action] - 1\r\n        setInterventions(i)\r\n      }\r\n    } catch (error) { }\r\n\r\n    // setTimeout(() => {\r\n    updateBudget(action)\r\n    // }, 1000);\r\n\r\n  }\r\n\r\n  const updateResultats = (sauve) => {\r\n    var res = { ...resultats }\r\n    if (sauve) {\r\n      res.Sauves += 1\r\n    } else {\r\n      res.Decedes += 1\r\n    }\r\n    console.log(res)\r\n    setResultats(res)\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    setBtnClickedBottom(null)\r\n    revealHabitant()\r\n  }, [position])\r\n\r\n\r\n  useEffect(() => {\r\n    if (carte.length > 0) relacherHabitant()\r\n\r\n  }, [position, mursH, mursV])\r\n\r\n\r\n\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"Stocks\")\r\n  //   console.log(stocks)\r\n  // }, [stocks])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (configuration != null) {\r\n      var inter = interventions\r\n      const interKeys = Object.keys(inter)\r\n      interKeys.forEach(action => {\r\n        try {\r\n          if (configuration[\"coutInter\" + action].valeur > 0) {\r\n            inter[action] = Math.min(\r\n              configuration[\"coutEq\" + action] != null && configuration[\"coutEq\" + action] != undefined ? Math.floor(budget / (configuration[\"coutInter\" + action].valeur + configuration[\"coutEq\" + action].valeur)) : Math.floor(budget / configuration[\"coutInter\" + action].valeur),\r\n              stocks !== null && stocks[action] != null && stocks[action] != undefined && stocks[action] != \"NaN\" ? stocks[action] : 1000\r\n            )\r\n          }\r\n        } catch (error) {\r\n          console.log(error, action)\r\n        }\r\n\r\n      })\r\n      setInterventions(inter)\r\n\r\n    } else {\r\n      // getPlayParameters()\r\n    }\r\n  }, [budget, configuration, numPompier, stocks])\r\n\r\n  // SOCKETS\r\n\r\n  // SOCKETS \r\n  const onTourChange = async (e) => {\r\n    e.preventDefault()\r\n    console.log(\"nouveau tour todo\")\r\n  }\r\n\r\n  const modifyBudgetsFin = async (cycle, sequence) => {\r\n    // console.log(\"budgets modified 0\")\r\n    PlayAPI.getBudgetsPompFin(session, equipe).then(\r\n      (res) => {\r\n        console.log(res)\r\n        var budgetsFin = JSON.parse(res.valeur)\r\n\r\n        try {\r\n          budgetsFin.interventions.forEach((b, index) => {\r\n            if (b.numCycle == cycle && b.numSeq == sequence) {\r\n\r\n              budgetsFin[\"interventions\"][index][\"pomp\" + numPompier] = budget\r\n            }\r\n\r\n          })\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n        try {\r\n          budgetsFin.equipements.forEach((e, index) => {\r\n            if (e.numCycle == cycle && e.numSeq == sequence) {\r\n              budgetsFin[\"equipements\"][index][\"Feu\"][\"pomp\" + numPompier] = stocks.Feu\r\n              budgetsFin[\"equipements\"][index][\"FeuFum\"][\"pomp\" + numPompier] = stocks.FeuFum\r\n              budgetsFin[\"equipements\"][index][\"Fum\"][\"pomp\" + numPompier] = stocks.Fum\r\n              budgetsFin[\"equipements\"][index][\"Marqueur\"][\"pomp\" + numPompier] = stocks.Marqueur\r\n            }\r\n\r\n          })\r\n        } catch (error) {\r\n\r\n        }\r\n        // console.log(\"budgets modified 1\")\r\n        return  PlayAPI.saveBudgetsPompFin(budgetsFin, session, equipe).then((budgetsFin) => {\r\n          // console.log(\"budgets modified\")\r\n          return budgetsFin\r\n        }\r\n\r\n\r\n        )\r\n      })\r\n\r\n  }\r\n\r\n  const getBudget = async (cycle, sequence) => {\r\n    var nouveauBudget = await PlayAPI.getBudgetsPompFin(session, equipe)\r\n    nouveauBudget = nouveauBudget.valeur\r\n    nouveauBudget = JSON.parse(nouveauBudget)\r\n\r\n    let budgetInter = 0\r\n    let stocksEq = stocks !== null && stocks !== undefined ? { ...stocks } : { Feu: 0, FeuFum: 0, Fum: 0, Marqueur: 0 }\r\n\r\n    try {\r\n      nouveauBudget.interventions.forEach((b) => {\r\n        if (b.numCycle == cycle && b.numSeq == sequence) {\r\n\r\n          budgetInter = b[\"pomp\" + numPompier]\r\n        }\r\n\r\n      })\r\n    } catch (error) {\r\n\r\n    }\r\n\r\n    try {\r\n      nouveauBudget.equipements.forEach((e) => {\r\n        if (e.numCycle == cycle && e.numSeq == sequence) {\r\n          stocksEq.Feu += e.Feu[\"pomp\" + numPompier]\r\n          stocksEq.FeuFum += e.FeuFum[\"pomp\" + numPompier]\r\n          stocksEq.Fum += e.Fum[\"pomp\" + numPompier]\r\n          stocksEq.Marqueur += e.Marqueur[\"pomp\" + numPompier]\r\n        }\r\n\r\n      })\r\n    } catch (error) {\r\n\r\n    }\r\n\r\n    // console.log(nouveauBudget)\r\n    if (budgetInter !== budget) {\r\n      setBudget(budgetInter)\r\n      setBudgetDepense(0)\r\n\r\n    }\r\n    setStocks(stocksEq)\r\n\r\n\r\n  }\r\n\r\n  const [socket, setSocket] = useState(null)\r\n\r\n  // console.log(socket)\r\n  useEffect(() => {\r\n    if (socket === null && configuration!==null) {\r\n      const s = io.connect(\"https://www.back.leaders-extreme.fr:4000\")\r\n      setSocket(s)\r\n\r\n\r\n      s.on('changementTour', (data) => {\r\n        if (currentPomp != data.currentPomp || currentCycle !== data.currentCycle || currentTour !== data.currentTour || currentSequence !== data.currentSequence) {\r\n          console.log(\"changement tour\")\r\n          getPlayState(session, equipe)\r\n        }\r\n      })\r\n\r\n\r\n      s.on('revealHabitant', (data) => {\r\n        if (carte !== null && carte.length > 0) {\r\n          // console.log(carte[data.y][data.x])\r\n          // console.log(carte[data.y])\r\n          if (carte[data.y][data.x] == 20) {\r\n            // console.log([data.y,data.x])\r\n            updateCarte([data.y, data.x], data.type)\r\n            // console.log(\"socket hab\")\r\n            // console.log(data)\r\n          }\r\n        }\r\n      })\r\n\r\n      s.on('startStopPartie', (data) => {\r\n        setPlay(data.start)\r\n      });\r\n    }\r\n\r\n\r\n\r\n  },[socket,configuration]);\r\n\r\n\r\n\r\n  // TESTS\r\n\r\n  const test = async () => {\r\n\r\n    console.log(\"test function\")\r\n  }\r\n\r\n\r\n\r\n\r\n  // AUTORISATIONS \r\n  const deplacementAutorise = (deplacement) => {\r\n    // return true\r\n    var dpl = [...deplacement]\r\n    if (dpl[0] == 0 && dpl[1] == 0) return false\r\n    if (position[0] + dpl[0] > carte.length - 1 || position[1] + dpl[1] > carte[0].length - 1 || position[0] + dpl[0] < 0 || position[1] + dpl[1] < 0) return false\r\n\r\n\r\n    const dplInterditsCases = [1000, 20, 3, 4]\r\n\r\n    try {\r\n      const valeurCaseDeplacement = carte[position[0] + dpl[0]][position[1] + dpl[1]]\r\n      if (Math.floor(valeurCaseDeplacement / 1000) == 1) return false\r\n      if (Math.floor(valeurCaseDeplacement / 10) == 2) return false\r\n      if (dplInterditsCases.includes(valeurCaseDeplacement)) return false\r\n    } catch (error) { }\r\n\r\n    const dplInterditsMurs = [1, 2, 3, 5]\r\n    try {\r\n      if (dpl[0] != 0) { // haut bas\r\n        if (dpl[0] < 0) {\r\n          dpl[0] = 0\r\n        }\r\n        if (typeof (mursH[position[0] + dpl[0]][position[1]]) === 'undefined') return false\r\n        if (dplInterditsMurs.includes(mursH[position[0] + dpl[0]][position[1]])) return false\r\n      } else { // gauche droite\r\n        if (dpl[1] < 0) {\r\n          dpl[1] = 0\r\n        }\r\n        if (typeof (mursV[position[0]][position[1] + dpl[1]]) === 'undefined') return false\r\n        if (dplInterditsMurs.includes(mursV[position[0]][position[1] + dpl[1]])) return false\r\n      }\r\n    } catch (error) { }\r\n\r\n\r\n\r\n\r\n    return true\r\n  }\r\n  const testRelacherHabitant = () => {\r\n    if (carte[position[0]][position[1]] % 100 < 10) return false // pas de transport d'habitant\r\n\r\n    const mursBloquants = [1, 2, 3, 5]\r\n\r\n    if (position[0] == 0 && !mursBloquants.includes(mursH[position[0]][position[1]])) return true // haut\r\n    if (position[0] == nbLignesGrille - 1 && !mursBloquants.includes(mursH[position[0] + 1][position[1]])) return true // bas\r\n\r\n    if (position[1] == 0 && !mursBloquants.includes(mursV[position[0]][position[1]])) return true // gauche\r\n    if (position[1] == nbColonnesGrille - 1 && !mursBloquants.includes(mursV[position[0]][position[1] + 1])) return true // droite\r\n\r\n    return false\r\n  }\r\n  const relacherHabitant = () => {\r\n    if (testRelacherHabitant()) {\r\n      setTimeout(() => {\r\n        updateResultats(true)\r\n        updateCarte(position, carte[position[0]][position[1]] - (carte[position[0]][position[1]] % 100 - carte[position[0]][position[1]] % 10))\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  const revealHabitant = async () => {\r\n\r\n    if (configuration != null) {\r\n      const casesAutour = getCasesAutour()\r\n\r\n      try {\r\n        if (casesAutour.dessus == 20) {\r\n          updateCarte([position[0] - 1, position[1]], 0)\r\n          resetHistAction()\r\n          const response = await PlayAPI.revealHabitant(socket,[position[0] - 1, position[1]], 0)\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (casesAutour.droite == 20) {\r\n          updateCarte([position[0], position[1] + 1], 0)\r\n          resetHistAction()\r\n          const response = await PlayAPI.revealHabitant(socket,[position[0], position[1] + 1], 0)\r\n\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (casesAutour.dessous == 20) {\r\n          updateCarte([position[0] + 1, position[1]], 0)\r\n          resetHistAction()\r\n          const response = await PlayAPI.revealHabitant(socket,[position[0] + 1, position[1]], 0)\r\n\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (casesAutour.gauche == 20) {\r\n          updateCarte([position[0], position[1] - 1], 0)\r\n          resetHistAction()\r\n          const response = await PlayAPI.revealHabitant(socket,[position[0], position[1] - 1], 0)\r\n\r\n        }\r\n      } catch (error) { }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  const getCasesAutour = () => {\r\n    var cases = {}\r\n\r\n    try {\r\n      cases[\"dessus\"] = (carte[position[0] - 1][position[1]]) // dessus\r\n    } catch (error) { }\r\n    try {\r\n      cases[\"droite\"] = (carte[position[0]][position[1] + 1]) // droite\r\n    } catch (error) { }\r\n    try {\r\n      cases[\"dessous\"] = (carte[position[0] + 1][position[1]]) // dessous\r\n    } catch (error) { }\r\n    try {\r\n      cases[\"gauche\"] = (carte[position[0]][position[1] - 1]) // gauche\r\n    } catch (error) { }\r\n    return cases\r\n  }\r\n  const getMursAutour = () => {\r\n    var murs = []\r\n\r\n    try {\r\n      if (mursH[position[0]][position[1]] != 4 || (mursH[position[0]][position[1] - 1] < 6 && mursH[position[0]][position[1] + 1] < 6)) {\r\n        murs.push(mursH[position[0]][position[1]]) // dessus\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n    } catch (error) { }\r\n\r\n    try {\r\n      if (mursV[position[0]][position[1] + 1] != 4 || (mursV[position[0] - 1][position[1] + 1] < 6 && mursV[position[0] + 1][position[1] + 1] < 6)) {\r\n        murs.push(mursV[position[0]][position[1] + 1])  // droite\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n    } catch (error) { }\r\n\r\n    try {\r\n      if (mursH[position[0] + 1][position[1]] != 4 || (mursH[position[0] + 1][position[1] - 1] < 6 && mursH[position[0] + 1][position[1] + 1] < 6)) {\r\n        murs.push(mursH[position[0] + 1][position[1]]) // dessous\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n\r\n    } catch (error) { }\r\n    try {\r\n      if (mursV[position[0]][position[1]] != 4 || (mursV[position[0] - 1][position[1]] < 6 && mursV[position[0] + 1][position[1]] < 6)) {\r\n        murs.push(mursV[position[0]][position[1]])  // gauche\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n    } catch (error) { }\r\n    // console.log(murs)\r\n    return murs\r\n  }\r\n\r\n  const resetHistAction = () => {\r\n    setTimeout(() => {\r\n      setHistActions([{\r\n        carte: JSON.stringify(carte),\r\n        budget: JSON.stringify(budget),\r\n        budgetDepense: JSON.stringify(budgetDepense),\r\n        mursH: JSON.stringify(mursH),\r\n        mursV: JSON.stringify(mursV),\r\n        stocks: JSON.stringify(stocks),\r\n        resultats: JSON.stringify(resultats),\r\n        interventions: JSON.stringify(interventions)\r\n      }])\r\n    }, 300);\r\n  }\r\n\r\n\r\n  const [btnClickedBottom, setBtnClickedBottom] = useState(null)\r\n  const [propositionsCase, setPropositionsCase] = useState([]) // Extincteurs\r\n  const [propositionMursDetruire, setPropositionMursDetruire] = useState([[], []]) // Horizontaux  , Verticaux\r\n  useEffect(() => {\r\n    if (btnClickedBottom != 3 || btnClickedBottom == null) {\r\n      setPropositionMursDetruire([[], []])\r\n    }\r\n    if ((btnClickedBottom > 2 && btnClickedBottom < 6) || btnClickedBottom == null) {\r\n      setPropositionsCase([])\r\n    }\r\n  }, [btnClickedBottom])\r\n\r\n\r\n\r\n\r\n  // HANDLERS CLIC GRILLE\r\n\r\n  const handleClicCase = (valeurAvant, valeurApres, coordX, coordY) => {\r\n\r\n    console.log(valeurAvant, valeurApres, coordX, coordY)\r\n    try {\r\n      updateCarte([coordY, coordX], valeurApres)\r\n      setPropositionsCase([])\r\n      setBtnClickedBottom(null)\r\n\r\n      if (valeurAvant == 4 && valeurApres == 0) { // Extincteur flamme\r\n        doAction(\"Feu\")\r\n      }\r\n      if (valeurAvant == 4 && valeurApres == 3) { // Feu Fumée\r\n        doAction(\"FeuFum\")\r\n      }\r\n      if (valeurAvant == 3 && valeurApres == 0) { // Fumée\r\n        doAction(\"Fum\")\r\n      }\r\n      if (Math.floor(valeurAvant / 10) == 2 && valeurApres == 0) { // Habitant\r\n        doAction(\"Habitant\")\r\n        updateCarte(position, carte[position[0]][position[1]] + valeurAvant % 10)\r\n      }\r\n    } catch (error) { }\r\n  }\r\n\r\n  const handleClicMur = (num, valeurAvant, coordX, coordY) => { // marqueur dégat\r\n    if (propositionMursDetruire[0].length > 0 || propositionMursDetruire[1].length > 0) {\r\n\r\n      const checkInCoords = (index) => {\r\n        // console.log(\"coordx\",coordX,\"coordy\",coordY,\"position\",position)\r\n\r\n        let numClic = null\r\n\r\n        if (coordX == position[1] && (coordY < position[0] || (coordY == position[0] && num == 0))) { // top\r\n          numClic = 0  // case en question\r\n          // console.log(\"top\",numClic)\r\n        }\r\n        if (coordX == position[1] && (coordY > position[0] || (coordY == position[0] && num == 2))) { // bottom\r\n          numClic = 2  // case en question\r\n          // console.log(\"bottom\",numClic)\r\n        }\r\n        if (coordY == position[0] && (coordX < position[1] || (coordX == position[1] && num == 3))) { // left\r\n          numClic = 3  // case en question\r\n          // console.log(\"left\",numClic)\r\n        }\r\n        if (coordY == position[0] && (coordX > position[1] || (coordX == position[1] && num == 1))) { // right\r\n          numClic = 1  // case en question\r\n          // console.log(\"right\",numClic)\r\n        }\r\n\r\n        return numClic\r\n      }\r\n\r\n      var cote = checkInCoords(num % 2)\r\n      let valeurApres = 4\r\n      if (valeurAvant == 1) valeurApres = 3\r\n\r\n      if (cote != null) {\r\n        try {\r\n          switch (cote) {\r\n            case 0:\r\n              updateMurH([position[0], position[1]], valeurApres)\r\n              // if(valeurAvant==5 ||)\r\n              break;\r\n            case 1:\r\n              updateMurV([position[0], position[1] + 1], valeurApres)\r\n              break;\r\n            case 2:\r\n              updateMurH([position[0] + 1, position[1]], valeurApres)\r\n              break;\r\n            case 3:\r\n              updateMurV([position[0], position[1]], valeurApres)\r\n              break;\r\n          }\r\n\r\n          doAction(\"Marqueur\")\r\n\r\n\r\n        } catch (error) {\r\n        }\r\n\r\n\r\n\r\n        setPropositionMursDetruire([[], []])\r\n        setBtnClickedBottom(null)\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  // HANDLER CLICS BOUTONS\r\n\r\n  const handleClicFleche = (num) => {\r\n    // Position y x\r\n    let deplacement\r\n    let rotation\r\n    switch (num) {\r\n      case 0: // haut\r\n        // console.log(\"haut\")\r\n        deplacement = [-1, 0]\r\n        rotation = 1\r\n        break;\r\n\r\n      case 1: // droite\r\n        // console.log(\"droite\")\r\n        deplacement = [0, 1]\r\n        rotation = 2\r\n        break;\r\n\r\n      case 2: // bas\r\n        // console.log(\"bas\")\r\n        deplacement = [1, 0]\r\n        rotation = 3\r\n        break;\r\n\r\n      case 3: // gauche\r\n        // console.log(\"gauche\")\r\n        deplacement = [0, -1]\r\n        rotation = 4\r\n        break;\r\n    }\r\n    if (deplacementAutorise(deplacement)) {\r\n\r\n      // ANIMATION MARCHE\r\n\r\n      setDeplacementEnCours({\r\n        type: 1,\r\n        rotation: rotation\r\n      })\r\n      setTimeout(() => {\r\n        updateCarte([position[0] + deplacement[0], position[1] + deplacement[1]], carte[position[0]][position[1]] - carte[position[0]][position[1]] % 10 + rotation)\r\n        // setPosition(position => [position[0] + deplacement[0], position[1] + deplacement[1]])\r\n        doAction(\"Deplacement\")\r\n        updateCarte(position, 0)\r\n\r\n\r\n        setDeplacementEnCours({\r\n          type: 2,\r\n          rotation: rotation\r\n        })\r\n        setTimeout(() => {\r\n          setDeplacementEnCours({\r\n            type: 0,\r\n            rotation: rotation\r\n          })\r\n        }, 500);\r\n\r\n      }, 500);\r\n\r\n\r\n    }\r\n  }\r\n\r\n  const handleChangePiece = () => {\r\n    resetHistAction()\r\n  }\r\n\r\n  const handleClicDoor = (ouvrir) => { // position, ouvert/fermé\r\n    setBtnClickedBottom(ouvrir ? 4 : 5)\r\n    let valueAvant\r\n    let valueApres\r\n\r\n    if (ouvrir) {\r\n      valueAvant = 5\r\n      valueApres = 6\r\n\r\n    } else {\r\n      valueAvant = 6\r\n      valueApres = 5\r\n    }\r\n    doAction(\"Porte\")\r\n    try {\r\n      if (mursH[position[0]][position[1]] == valueAvant) updateMurH([position[0], position[1]], valueApres)\r\n      if (mursH[position[0] + 1][position[1]] == valueAvant) updateMurH([position[0] + 1, position[1]], valueApres)\r\n      if (mursV[position[0]][position[1]] == valueAvant) updateMurV([position[0], position[1]], valueApres)\r\n      if (mursV[position[0]][position[1] + 1] == valueAvant) updateMurV([position[0], position[1] + 1], valueApres)\r\n    } catch (error) {\r\n\r\n    }\r\n  }\r\n\r\n  const handleClicExtincteur = (num) => {\r\n    // 0 FEU, 1 FEUFUM, 2 FUM\r\n    if (btnClickedBottom != num) {\r\n      var listeCasesAction = []\r\n      let valeurAvant = 4\r\n      let valeurApres = 0\r\n      setBtnClickedBottom(num)\r\n      switch (num) {\r\n        case 0: // ETEINDRE FEU\r\n          break;\r\n\r\n        case 1: // FEU FUM\r\n          valeurApres = 3\r\n          break;\r\n        case 2: // ETEINDRE FUMEE\r\n          valeurAvant = 3\r\n          break;\r\n      }\r\n\r\n      try {\r\n        if (carte[position[0] - 1][position[1]] == valeurAvant) listeCasesAction.push([position[0] - 1, position[1], valeurAvant, valeurApres]) // TOP\r\n      } catch (error) { }\r\n      try {\r\n        if (carte[position[0]][position[1] + 1] == valeurAvant) listeCasesAction.push([position[0], position[1] + 1, valeurAvant, valeurApres]) // RIGHT\r\n      } catch (error) { }\r\n      try {\r\n        if (carte[position[0] + 1][position[1]] == valeurAvant) listeCasesAction.push([position[0] + 1, position[1], valeurAvant, valeurApres]) // BOTTOM\r\n      } catch (error) { }\r\n      try {\r\n        if (carte[position[0]][position[1] - 1] == valeurAvant) listeCasesAction.push([position[0], position[1] - 1, valeurAvant, valeurApres]) // LEFT\r\n      } catch (error) { }\r\n\r\n      setPropositionsCase(listeCasesAction)\r\n    } else {\r\n      setBtnClickedBottom(null)\r\n    }\r\n\r\n  }\r\n\r\n  const handleClicMarqueur = () => {\r\n    if (btnClickedBottom != 3) {\r\n      setBtnClickedBottom(3)\r\n      if (propositionMursDetruire[0].length > 0 || propositionMursDetruire[1].length > 0) {\r\n        setPropositionMursDetruire([[], []])\r\n      } else {\r\n        const mursADetruire = [1, 3, 5, 6]\r\n        var propositions = [\r\n          [],\r\n          []\r\n        ]\r\n        const mursAutour = getMursAutour()\r\n\r\n        try {\r\n          if (mursADetruire.includes(mursAutour[0])) propositions[0].push([position[1], position[0]]) // top\r\n          if (mursADetruire.includes(mursAutour[1])) propositions[1].push([position[1] + 1, position[0]]) // right\r\n          if (mursADetruire.includes(mursAutour[2])) propositions[0].push([position[1], position[0] + 1]) // bottom\r\n          if (mursADetruire.includes(mursAutour[3])) propositions[1].push([position[1], position[0]]) // left\r\n\r\n        } catch (error) {\r\n\r\n        }\r\n        setPropositionMursDetruire(propositions)\r\n\r\n      }\r\n    } else {\r\n      setBtnClickedBottom(null)\r\n    }\r\n\r\n\r\n  }\r\n\r\n  const handleClicValidated = async (bool) => {\r\n    console.log(\"handle Clic\")\r\n    if (configuration != null) {\r\n      if (bool) {\r\n\r\n\r\n        let prochainPomp = currentPomp + 1\r\n        let prochainTour = currentTour\r\n        let prochainCycle = currentCycle\r\n        let prochaineSequence = currentSequence\r\n\r\n\r\n\r\n        if (numPompier == configuration.nbPompEquipe.valeur) { // DERNIER POMP DU TOUR\r\n          if (currentTour == configuration.nbToursParCycle.valeur) { // SEND TO INTER\r\n            prochainTour = 1\r\n            prochainPomp = 0 // A CHANGER AVEC STRATEGIQUE\r\n\r\n            if (prochainCycle == configuration.nbCyclesParSequence.valeur) {\r\n              prochainCycle = 1\r\n              prochaineSequence = prochaineSequence + 1\r\n            } else {\r\n              prochainCycle = prochainCycle + 1\r\n            }\r\n\r\n\r\n\r\n          } else { // PAS DERNIER TOUR DU CYCLE\r\n            console.log(\"pas dernier tour\")\r\n            prochainPomp = 1\r\n            prochainTour = prochainTour + 1\r\n\r\n\r\n          }\r\n\r\n        }\r\n\r\n        // console.log(prochainPomp,prochainTour,prochainCycle)\r\n\r\n\r\n\r\n        // console.log(\"budgets fin 1\")\r\n        // const res = modifyBudgetsFin(currentCycle, currentSequence).then(() => {\r\n        await PlayAPI.nouveauTour(socket,prochainPomp, carte, mursH, mursV, prochaineSequence, prochainCycle, prochainTour, resultats.Decedes, resultats.Sauves, session, equipe, configuration.chronoTour.valeur)\r\n        resetHistAction()\r\n\r\n        // setChrono(null)\r\n      } else {\r\n        retourAction()\r\n        console.log(\"retour\")\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const handleNoClicked = () => {\r\n    setPropositionMursDetruire([[], []])\r\n    setPropositionsCase([])\r\n  }\r\n\r\n  const handleClicHabitant = () => {\r\n    if (btnClickedBottom != 6) {\r\n      setBtnClickedBottom(6)\r\n      const valeurApres = 0\r\n      var listeCasesAction = []\r\n      try {\r\n        const valeurDessus = carte[position[0] - 1][position[1]]\r\n        if (Math.floor(valeurDessus / 10) == 2) listeCasesAction.push([position[0] - 1, position[1], valeurDessus, valeurApres]) // TOP\r\n      } catch (error) { }\r\n      try {\r\n        const valeurDroite = carte[position[0]][position[1] + 1]\r\n        if (Math.floor(valeurDroite / 10) == 2) listeCasesAction.push([position[0], position[1] + 1, valeurDroite, valeurApres]) // RIGHT\r\n      } catch (error) { }\r\n      try {\r\n        const valeurDessous = carte[position[0] + 1][position[1]]\r\n        if (Math.floor(valeurDessous / 10) == 2) listeCasesAction.push([position[0] + 1, position[1], valeurDessous, valeurApres]) // BOTTOM\r\n      } catch (error) { }\r\n      try {\r\n        const valeurGauche = carte[position[0]][position[1] - 1]\r\n        if (Math.floor(valeurGauche / 10) == 2) listeCasesAction.push([position[0], position[1] - 1, valeurGauche, valeurApres]) // LEFT\r\n      } catch (error) { }\r\n\r\n      setPropositionsCase(listeCasesAction)\r\n\r\n\r\n      console.log(\"handle clic habitant\")\r\n    } else {\r\n      setBtnClickedBottom(null)\r\n    }\r\n\r\n  }\r\n\r\n\r\n  const [textes, setTextes] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const getTextes = async () => {\r\n      const textes = ContentsAPI.getTexts(\"jeuTactInterface\").then(\r\n        (res) => { setTextes(res) }\r\n      )\r\n    }\r\n    if (textes == null) {\r\n      getTextes()\r\n    }\r\n    // console.log(textes)\r\n  }, [textes])\r\n\r\n\r\n\r\n\r\n  const getText = (name) => {\r\n    if (textes == null) {\r\n      return name\r\n    } else {\r\n      try {\r\n        return textes[name].contenu\r\n      } catch (error) {\r\n        console.log(textes)\r\n        return name\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  const renderAttenteLancement = () => {\r\n\r\n    return (\r\n      <div style={{ color: \"gray\", textAlign: \"center\", fontSize: 20 }}>\r\n        <Typography >{getText('attenteLancement')}</Typography>\r\n        <Typography >{getText('infoLancement')}</Typography>\r\n      </div>\r\n    )\r\n  }\r\n  return (\r\n\r\n\r\n\r\n    <div style={{ position: \"absolute\", display: \"flex\", alignItems: \"center\", flexDirection: \"column\", justifyContent: \"center\", flex: 1, width: \"100%\", height: \"100%\" }}>\r\n\r\n      {\r\n        carte.length > 0 && position != null && stocks !== null && numPompier !== null && play ?\r\n          <>\r\n\r\n            <Grille\r\n              nbColonnesGrille={nbColonnesGrille}\r\n              nbLignesGrille={nbLignesGrille}\r\n              carte={carte}\r\n              position={position}\r\n              mursH={mursH}\r\n              mursV={mursV}\r\n              propositionMursDetruire={propositionMursDetruire}\r\n              propositionsCase={propositionsCase}\r\n              handleClicMur={handleClicMur}\r\n              handleClicCase={handleClicCase}\r\n              handleChangePiece={handleChangePiece}\r\n              deplacementEnCours={deplacementEnCours}\r\n\r\n            />\r\n\r\n            <TactBandeauTop\r\n              stocks={stocks}\r\n              resultats={resultats}\r\n              numeroPompier={numPompier}\r\n              sequence={currentSequence}\r\n              cycle={currentCycle}\r\n              tour={currentTour}\r\n              pomp={currentPomp}\r\n              configuration={configuration}\r\n              budget={budget}\r\n              budgetDepense={budgetDepense}\r\n              equipe={equipe}\r\n              handleClicValidated={handleClicValidated}\r\n              play={play}\r\n              chronoInit={chrono}\r\n              numEquipe={equipe}\r\n              numSession={session}\r\n            />\r\n\r\n            <TactBandeauBottom\r\n              interventions={interventions}\r\n              stocks={stocks}\r\n              numeroPompier={numPompier}\r\n              tour={currentTour}\r\n              pomp={currentPomp}\r\n              handleClicFleche={handleClicFleche}\r\n              handleClicValidated={handleClicValidated}\r\n              handleClicDoor={handleClicDoor}\r\n              handleClicMarqueur={handleClicMarqueur}\r\n              handleClicExt={handleClicExtincteur}\r\n              handleNoClicked={handleNoClicked}\r\n              handleClicHabitant={handleClicHabitant}\r\n              btnClickedBottom={btnClickedBottom}\r\n              mursAutour={getMursAutour()}\r\n              casesAutour={getCasesAutour()}\r\n              currentCase={carte[position[0]][position[1]]}\r\n              histActions={histActions}\r\n              configuration={configuration}\r\n              deplacementEnCours={deplacementEnCours}\r\n              budgetMaxAtteint={budgetDepense >= configuration.budgetTourMax.valeur}\r\n              isLoading={isLoading.current}\r\n            />\r\n            <TactBandeauDroite\r\n              handleDisconnect={handleDisconnect}\r\n              configuration={configuration}\r\n            />\r\n          </>\r\n          :\r\n          renderAttenteLancement()\r\n\r\n      }\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default TactInterface;\r\n\r\n\r\n// export default React.memo(TactInterface)"]},"metadata":{},"sourceType":"module"}