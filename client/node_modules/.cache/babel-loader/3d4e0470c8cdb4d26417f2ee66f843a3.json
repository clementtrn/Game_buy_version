{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hugod\\\\decitude\\\\client\\\\src\\\\routes\\\\AdminInterface.js\",\n    _s = $RefreshSig$();\n\nimport \"../styles/AdminInterface.css\";\nimport \"../styles/App.css\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport PlayAPI from \"../API/PlayAPI\";\nimport { useHistory } from 'react-router-dom';\nimport { TextField, Button, Divider, Typography } from \"@material-ui/core\";\nimport io from 'socket.io-client';\nimport cookie from 'react-cookies';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminInterface = () => {\n  _s();\n\n  const history = useHistory();\n  const user = cookie.load(\"user\");\n\n  const handleDisconnect = () => {\n    cookie.save('user', \"disconnected\", {\n      path: '/',\n      maxAge: 60 * 60 * 1.5 //sec\n\n    });\n    history.push('/login');\n  };\n\n  if (user === null || user === undefined || user == \"disconnected\") history.push(\"/login\");\n  if (user !== null && user !== undefined && user.role !== undefined && !user.role.includes(\"ADMIN\")) handleDisconnect();\n  const [session, setSession] = useState(user !== null && user !== undefined ? user.session : null);\n  const [configuration, setConfiguration] = useState(null);\n  const [lancement, setLancement] = useState(true);\n  const [socket, setSocket] = useState(null);\n  useEffect(() => {\n    if (socket == null && configuration !== null) {\n      const s = io.connect(\"https://www.back.leaders-extreme.fr\");\n      setSocket(s);\n      s.on('startStopPartie', data => {\n        setLancement(!data.start);\n        console.log(data);\n      });\n    }\n  }, [socket, configuration]);\n\n  const getPlayParameters = async () => {\n    if (configuration === null) {\n      setConfiguration(await PlayAPI.getConfiguration(session));\n    }\n  };\n\n  useEffect(() => {\n    getPlayParameters();\n  }, [configuration]);\n\n  const handleClicLancement = async () => {\n    if (socket !== null && configuration !== null && session !== null) {\n      PlayAPI.startStopPartie(socket, session, lancement);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-admin\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h1\",\n      color: \"primary\",\n      children: \"Espace administrateur\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-buttons-container\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        className: \"admin-button\",\n        color: lancement ? \"default\" : \"primary\",\n        onClick: handleClicLancement // disabled={lancement}\n        ,\n        children: lancement ? \"Lancer la partie\" : \"Arrêter la partie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 3\n  }, this);\n};\n\n_s(AdminInterface, \"PQDN7PkLE91adOrL12wP0mvcy0E=\", false, function () {\n  return [useHistory];\n});\n\n_c = AdminInterface;\nexport default AdminInterface;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminInterface\");","map":{"version":3,"sources":["C:/Users/hugod/decitude/client/src/routes/AdminInterface.js"],"names":["React","useState","useEffect","useRef","PlayAPI","useHistory","TextField","Button","Divider","Typography","io","cookie","AdminInterface","history","user","load","handleDisconnect","save","path","maxAge","push","undefined","role","includes","session","setSession","configuration","setConfiguration","lancement","setLancement","socket","setSocket","s","connect","on","data","start","console","log","getPlayParameters","getConfiguration","handleClicLancement","startStopPartie"],"mappings":"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","sourcesContent":["import \"../styles/AdminInterface.css\"\r\nimport \"../styles/App.css\"\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport PlayAPI from \"../API/PlayAPI\"\r\nimport { useHistory } from 'react-router-dom';\r\nimport { TextField, Button, Divider, Typography } from \"@material-ui/core\"\r\nimport io from 'socket.io-client'\r\nimport cookie from 'react-cookies'\r\n\r\nconst AdminInterface = () => {\r\n\r\n  const history = useHistory()\r\n\r\n\r\n  const user = cookie.load(\"user\")\r\n  \r\n  const handleDisconnect = () => {\r\n    cookie.save('user', \"disconnected\", {\r\n      path: '/',\r\n      maxAge: 60 * 60 * 1.5, //sec\r\n    })\r\n    history.push('/login');\r\n  }\r\n\r\n\r\n  if (user === null || user === undefined || user==\"disconnected\") history.push(\"/login\");\r\n  if(user !== null && user !== undefined && user.role!==undefined && !user.role.includes(\"ADMIN\")) handleDisconnect()\r\n\r\n  const [session, setSession] = useState(user !== null && user !== undefined ? user.session : null)\r\n \r\n  const [configuration, setConfiguration] = useState(null)\r\n\r\n\r\n  const [lancement,setLancement]=useState(true)\r\n  \r\n  const [socket, setSocket] = useState(null)\r\n  useEffect(() => {\r\n    if (socket == null && configuration!==null) {\r\n      const s = io.connect(\"https://www.back.leaders-extreme.fr\")\r\n      setSocket(s)\r\n      s.on('startStopPartie', (data) => {\r\n        setLancement(!data.start)\r\n        console.log(data)\r\n    });  \r\n    \r\n}\r\n  },[socket,configuration])\r\n\r\nconst getPlayParameters=async()=>{\r\n  if(configuration===null){\r\n    setConfiguration(await PlayAPI.getConfiguration(session))\r\n  }\r\n}\r\n\r\nuseEffect(()=>{ \r\n  getPlayParameters()\r\n},[configuration])\r\n\r\nconst handleClicLancement=async()=>{\r\n  if(socket!==null && configuration!==null && session!==null){\r\n    PlayAPI.startStopPartie(socket,session,lancement)\r\n  }\r\n  }\r\n \r\n\r\n  return (\r\n  <div\r\n        className=\"body-admin\"\r\n      >\r\n\r\n        <Typography variant=\"h1\" color=\"primary\">Espace administrateur</Typography>\r\n\r\n    <div className=\"admin-buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n          \r\n          className=\"admin-button\"\r\n          color={lancement ?   \"default\" : \"primary\"}\r\n          onClick={handleClicLancement}\r\n          // disabled={lancement}\r\n        >\r\n          {lancement ? \"Lancer la partie\" : \"Arrêter la partie\"}\r\n        </Button>\r\n       \r\n      </div>\r\n \r\n</div>\r\n );\r\n}\r\n\r\nexport default AdminInterface;\r\n\r\n"]},"metadata":{},"sourceType":"module"}