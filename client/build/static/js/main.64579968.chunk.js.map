{"version":3,"sources":["styles/fonts/Agency FB.ttf","styles/MyTheme.js","API/PlayAPI.js","components/interfaceJoueur/panels/CaseDonnee.js","API/ContentsAPI.js","components/interfaceJoueur/TactBandeauTop.js","components/interfaceJoueur/panels/Bulle.js","components/interfaceJoueur/panels/BoutonAction.js","components/interfaceJoueur/TactBandeauBottom.js","components/interfaceJoueur/pieces/MurPiece.js","components/interfaceJoueur/pieces/CasePiece.js","components/interfaceJoueur/pieces/Piece.js","components/interfaceJoueur/Grille.js","components/interfaceJoueur/TactBandeauDroite.js","routes/TactInterface.js","components/interfaceJoueur/InterBandeauTop.js","components/interfaceJoueur/InterBandeauBottom.js","components/interfaceJoueur/InterInterventions.js","components/interfaceJoueur/InterBandeauDroite.js","routes/InterInterface.js","API/UsersAPI.js","routes/Login.js","routes/Accueil.js","routes/PrivateRoute.js","routes/AdminInterface.js","App.js","index.js"],"names":["MyTheme","Agency","createMuiTheme","palette","primary","main","typography","fontFamily","fontSize","h1","breakpoints","up","h2","h5","fontWeight","h6","lineHeight","subtitle1","subtitle2","caption","urlBack","disconnectUsers","socket","session","a","console","log","requestOptions","method","headers","body","JSON","stringify","start","fetch","then","emit","startStopPartie","nouveauTour","currentPomp","carte","mursH","mursV","currentSequence","currentCycle","currentTour","resultatsDecedes","resultatsSauves","equipe","chrono","currrentChrono","getConfiguration","response","json","getPlayState","revealHabitant","position","type","y","parseInt","x","saveBudgetsPompInit","cycles","saveBudgetsPompFin","budgetsFin","getBudgetsPompInit","numPompier","cycle","sequence","getBudgetsPompFin","updateCurrentChrono","updateConfig","manualConfig","resetPartie","nbEquipes","etats","chronoInit","getGeneralStats","CaseDonnee","name","value","flexFactor","textes","data","getText","charAt","toUpperCase","slice","contenu","error","className","style","flexDirection","flex","color","getTexts","nomView","TactBandeauTop","numeroPompier","numEquipe","numSession","tour","pomp","stocks","resultats","configuration","budget","handleClicValidated","play","budgetDepense","useState","setTextes","setChrono","useEffect","chronoTimer","setInterval","PlayAPI","clearInterval","ContentsAPI","res","getTextes","nbSequences","valeur","nbCyclesParSequence","nbToursParCycle","budgetTourMax","Feu","Fum","FeuFum","Marqueur","Decedes","Sauves","numberOfElements","nbPompEquipe","items","push","i","rotate","rotateReverse","renderCircleItems","renderCircleTours","stroke","strokeWidth","backgroundColor","marginTop","width","maxWidth","Math","floor","chronoTourTact","toString","padStart","marginLeft","Bulle","open","handleClose","texte","sourceImage","action","coutInter","coutEq","Transition","React","forwardRef","props","ref","Slide","direction","Dialog","TransitionComponent","keepMounted","onClose","display","DialogContent","src","DialogContentText","marginBottom","textAlign","fontStyle","DialogActions","disableSpacing","Button","onClick","BoutonAction","timerOver","nbIntervention","nbStock","handleClicAction","selected","num","disabled","texteBulle","bulleOpen","setBulleOpen","handleOver","delay","setTimeout","onMouseEnter","onMouseLeave","clearTimeout","ToggleButton","includes","variant","alt","TactBandeauBottom","interventions","handleClicFleche","handleClicDoor","handleClicMarqueur","handleClicExt","handleNoClicked","handleClicHabitant","btnClickedBottom","mursAutour","casesAutour","currentCase","histActions","deplacementEnCours","budgetMaxAtteint","isLoading","mursInterdits","bulleOpenFleches","setBulleOpenFleches","bulleOpenValider","setBulleOpenValider","bulleOpenRetour","setBulleOpenRetour","timerOverFleches","handleOverFleches","Deplacement","colorDisabled","IconButton","dessus","undefined","droite","dessous","gauche","renderFleches","boutons","indexMurs","Object","keys","forEach","label","index","some","mur","el","replace","renderButtons","timerOverValider","timerOverRetour","handleOverValider","handleOverRetour","disableElevation","length","renderBoutonsValider","MurPiece","height","coordX","coordY","nbColonnesPiece","nbLignesPiece","anchor","nbColonnesGrille","nbLignesGrille","propositionMursDetruire","handleClicMur","epaisseur","epaisseurInit","mounted","setMounted","transform","setTranform","clignotant","setClignotant","colors","getTransform","facteurX","facteurY","transformNew","checked","mursADetruire","item","checkInCoords","renderTriangle","top","bottom","left","borderTop","borderBottom","borderLeft","right","borderRight","zIndex","opacity","transition","borderRadius","border","boxShadow","cursor","component","background","renderPoignee","typesConsideres","renderCoins","CasePiece","murs","propositionsCase","handleClicCase","idPiece","setHeight","setWidth","element","useRef","contentDisplayed","setContentDisplayed","useLayoutEffect","updateSize","current","clientHeight","clientWidth","window","addEventListener","removeEventListener","renderContenuCase","source","sourceCasque","align","justify","rotation","random","alignItems","justifyContent","objectFit","valeurApres","setValeurApres","valeurAvant","setValeurAvant","valApres","valAvant","coords","filter","mursComponents","renderMurs","renderCase","Piece","maxLignesPiece","maxColonnesPiece","anchors","getAnchor","intermediaire","getTypeExt","anchori","anchorj","mursCote","pompierDansPiece","present","min","max","j","renderRow","row","typeExt","grille","renderGrille","Grille","handleChangePiece","setMaxLignesPiece","setMaxColonnesPiece","IdAnchor","getAnchors","minimums","maximums","maxUsed","maxCPiece","maxLPiece","Max","associate","pos","Min","Index","nbL","nbC","components","idAnchor","area","renderPieces","TactBandeauDroite","handleDisconnect","developpe","setDeveloppe","startIcon","TactInterface","history","useHistory","user","cookie","load","setSocket","disconnect","save","path","maxAge","role","setPlay","setCurrentPomp","setCurrentTour","setCurrentCycle","setCurrentSequence","setPosition","setDeplacementEnCours","setHistActions","setConfiguration","setStocks","setResultats","Porte","Habitant","setInterventions","setBudget","setBudgetDepense","setCarte","setNbLignesGrille","setNbColonnesGrille","setMursH","setMursV","currentPlayState","parse","getBudget","c","getPositionFromCarte","getPlayParameters","param","ligne","indexI","indexJ","updateCarte","updateMurH","m","updateMurV","retourAction","h","pop","state","addHistAction","doAction","s","depenses","bd","updateBudget","setBtnClickedBottom","relacherHabitant","inter","modifyBudgetsFin","prochainPomp","prochainTour","prochainCycle","prochaineSequence","prochainChrono","b","numCycle","numSeq","equipements","e","newCarte","evenementsAleatoire","nouveauBudget","budgetInter","stocksEq","io","on","d","mursBloquants","testRelacherHabitant","sauve","updateResultats","getCasesAutour","resetHistAction","cases","getMursAutour","setPropositionsCase","setPropositionMursDetruire","bool","chronoTourInter","getRandomCoords","mini","maxi","handleMortHab","r","addFumToCarte","randomPos","val","valeurFin","handleExplosion","embrasementFum","modified","addHabitants","count","countHab","nbHabitantsASauver","newPos","round","cote","numClic","deplacement","dpl","valeurCaseDeplacement","dplInterditsMurs","deplacementAutorise","ouvrir","valueAvant","valueApres","propositions","listeCasesAction","valeurDessus","valeurDroite","valeurDessous","valeurGauche","Typography","InterBandeauTop","handleViewChange","vue","interventionsValidated","equipementsValidated","validated","ToggleButtonGroup","exclusive","onChange","aria-label","titre","InterBandeauBottom","couts","renderCoutsInterventions","components1","components2","key","renderBudgets","depense","InterInterventions","handleBudgetChange","budgetSim","nbCycleParSeq","page","lastRow","nbPompiers","lastCycle","setLastCycle","localPage","setLocalPage","initLastCycle","handleChangeSelect","event","target","renderPropositionsBudget","nSeq","nCycle","sort","sum","maxValue","MenuItem","renderSelectBudgetCycle","FormControl","Select","displayEmpty","renderRowBudgetCycle","comp","TableCell","scope","rowSpan","TextField","inputProps","TableRow","hover","renderPropositionsStock","k","values","renderSelectStockCycle","renderRowStocksCycle","id","TableContainer","Paper","Table","stickyHeader","size","TableHead","renderHeaders","TableBody","cyclesSorted","renderBudgetsCycles","renderStocksCycle","TableFooter","TablePagination","rowsPerPageOptions","rowsPerPage","labelDisplayedRows","from","to","ceil","onChangePage","newPage","InterBandeauDroite","InterInterface","setVue","setCouts","setCycles","coutInterDeplacement","coutInterDeplacementHab","coutInterFeu","coutInterFeuFum","coutInterFum","coutInterMarqueur","coutInterPorte","coutInterHab","coutInterHabitant","coutEqFeu","coutEqFeuFum","coutEqFum","coutEqMarqueur","budgetDefaultInter","initInfos","setBudgetSim","pomp1","pomp2","pomp3","pomp4","pomp5","pomp6","setValidated","getNombreMarqueur","nbMarqueur","lastCycleEq","lastCycleInter","getBudgetTot","budgetsPompInit","v","newBudget","bSim","checkNouveauTour","newValue","login","dataConnexion","getNbEquipes","getUsers","createUsers","users","Login","handleLogin","userConnected","handleDisconnectApp","setUser","setError","handleConnect","preventDefault","UsersAPI","dataConnection","remove","identifiant","mdp","setDataConnection","Divider","orientation","flexItem","required","InputLabelProps","onKeyUp","ctrlKey","Accueil","handleRedirect","PrivateRoute","Component","rest","render","pathname","AdminInterface","setManualConfig","lancement","setLancement","err","handleClicLancement","handleClicDisconnect","configChange","evt","setNbEquipes","countEquipes","setUsers","getIdents","createIdents","us","nbMarqueursMax","nbVictimesMax","sx","minWidth","map","u","App","setUserConnected","ThemeProvider","theme","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.64579968.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Agency FB.a28a90a7.ttf\";","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport Agency from './fonts/Agency FB.ttf';\r\n\r\nconst agency = {\r\n  fontFamily: 'Agency FB',\r\n  fontStyle: 'normal',\r\n  // fontDisplay: 'swap',\r\n  // fontWeight: 400,\r\n  src: `\r\n    local('Agency FB'),\r\n    local('Agency FB-Regular'),\r\n    url(${Agency}) format('ttf')\r\n  `,\r\n  unicodeRange:\r\n    'U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF',\r\n};\r\n\r\n\r\n\r\nconst MyTheme = createMuiTheme({\r\n    palette: {\r\n      primary: {\r\n        main:\"#F02000\",\r\n      },\r\n     \r\n    },\r\n\r\n    typography: {\r\n      fontFamily: \" Agency FB, Arial\",\r\n      fontSize:20,\r\n     \r\n    },\r\n   \r\n  });\r\n\r\n  MyTheme.typography.h1 = {\r\n    fontSize: '3em',\r\n    \r\n    fontFamily: 'Agency FB, Arial',\r\n    '@media (min-width:600px)': {\r\n      fontSize: '3rem',\r\n    },\r\n    [MyTheme.breakpoints.up('md')]: {\r\n      fontSize: '4rem',\r\n    },\r\n  };\r\n\r\n\r\n  MyTheme.typography.h2 = {\r\n    fontSize: '1.2rem',\r\n    '@media (min-width:600px)': {\r\n      fontSize: '1.5rem',\r\n    },\r\n    [MyTheme.breakpoints.up('md')]: {\r\n      fontSize: '2.4rem',\r\n    },\r\n  };\r\n\r\n  MyTheme.typography.h5 = {\r\n    fontSize: '1.4em',\r\n    // lineHeight:\"1em\",\r\n    fontWeight:\"bold\",\r\n\r\n    fontFamily: 'Agency FB,sans-serif',\r\n    '@media (min-width:600px)': {\r\n      fontSize: '1rem',\r\n    },\r\n    [MyTheme.breakpoints.up('md')]: {\r\n      fontSize: '1.4rem',\r\n    },\r\n  };\r\n  MyTheme.typography.h6 = {\r\n    fontSize: '0.9em',\r\n    fontWeight:\"normal\",\r\n    \r\n    lineHeight:\"1em\",\r\n    // fontWeight:\"bold\",\r\n\r\n    fontFamily: 'Arial,sans-serif',\r\n    '@media (min-width:600px)': {\r\n      fontSize: '0.7rem',\r\n    },\r\n    [MyTheme.breakpoints.up('md')]: {\r\n      fontSize: '0.9rem',\r\n    },\r\n  };\r\n\r\n  MyTheme.typography.subtitle1= {\r\n    fontSize: '1.3em',\r\n    // fontWeight:\"bold\",\r\n\r\n    fontFamily: 'Arial,sans-serif',\r\n    '@media (min-width:600px)': {\r\n      fontSize: '1rem',\r\n    },\r\n    [MyTheme.breakpoints.up('md')]: {\r\n      fontSize: '1.5rem',\r\n    },\r\n  };\r\n  MyTheme.typography.subtitle2= {\r\n    fontSize: '1em',\r\n    lineHeight:\"1em\",\r\n    // fontWeight:\"bold\",\r\n\r\n    fontFamily: 'Arial,sans-serif',\r\n    '@media (min-width:600px)': {\r\n      fontSize: '0.5rem',\r\n    },\r\n    [MyTheme.breakpoints.up('md')]: {\r\n      fontSize: '1rem',\r\n    },\r\n  };\r\n\r\n  MyTheme.typography.caption= {\r\n    fontSize: '3em',\r\n    fontFamily: 'Agency FB, Arial',\r\n    '@media (min-width:600px)': {\r\n      fontSize: '3rem',\r\n    },\r\n    [MyTheme.breakpoints.up('md')]: {\r\n      fontSize: '4rem',\r\n    },\r\n  };\r\nexport default MyTheme","\n\n\n\nconst urlBack = \"https://www.back.leaders-extreme.fr\";\n\n\nexport default {\n    disconnectUsers:async(socket,session)=>{\n        console.log(\"disconnect users\")\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session,\n                start:false\n            })\n        };\n\n\n        fetch(urlBack + \"/startStopPartie\", requestOptions)\n            .then(() => {\n                socket.emit(\n                    'disconnectUsers',\n                    {\n                        start: false,\n                    }\n                )\n            })\n    },\n    startStopPartie: async (socket,session,start) => {\n        console.log(\"start/stop partie\")\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session,\n                start:start\n            })\n        };\n\n\n        fetch(urlBack + \"/startStopPartie\", requestOptions)\n            // .then((response) => {\n            //     console.log(\"test\")\n            //     return response.json();\n            // })\n            .then(() => {\n                socket.emit(\n                    'startStopPartie',\n                    {\n                        start: start,\n                    }\n                )\n            })\n\n    },\n    nouveauTour: async (socket,currentPomp, carte, mursH, mursV, currentSequence, currentCycle, currentTour, resultatsDecedes, resultatsSauves, session, equipe, chrono) => {\n        // console.log(\"nouveau tour\")\n        \n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                carte: carte,\n                mursH: mursH,\n                mursV: mursV,\n                currentPomp: currentPomp,\n                currentSequence: currentSequence,\n                currentCycle: currentCycle,\n                currentTour: currentTour,\n                resultatsDecedes: resultatsDecedes,\n                resultatsSauves: resultatsSauves,\n                session: session,\n                equipe: equipe,\n                currrentChrono: chrono\n            })\n        };\n\n\n        fetch(urlBack + \"/nouveauTour\", requestOptions)\n            // .then((response) => {\n            //     console.log(\"test\")\n            //     return response.json();\n            // })\n            .then(() => {\n                socket.emit(\n                    'changementTour',\n                    JSON.stringify({\n                        currentSequence: (currentSequence),\n                        currentPomp: (currentPomp),\n                        currentTour: (currentTour),\n                        currentCycle: (currentCycle),\n                        equipe:equipe,\n                        session:session\n                    })\n                )\n                // console.log(\"changement tour\")\n            })\n\n    },\n    // getSocket: () => {\n    //     return socket\n    // },\n    getConfiguration: async (session) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ session: session })\n        };\n        const response = await fetch(urlBack + \"/configuration\", requestOptions)\n        return await response.json()\n    },\n    getPlayState: async (session, equipe) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session: session,\n                equipe: equipe\n            })\n        };\n        const response = await fetch(urlBack + \"/playstate\", requestOptions)\n        return await response.json()\n    },\n    revealHabitant: async (socket,position, type) => {\n        // console.log(position[0])\n        socket.emit(\n            'revealHabitant',\n            {\n                y: parseInt(position[0]),\n                x: parseInt(position[1]),\n                type: parseInt(type)\n            }\n        )\n        console.log(\"socket emit\")\n    },\n    saveBudgetsPompInit: async (cycles, session, equipe) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                cycles: cycles,\n                session: session,\n                equipe: equipe\n            })\n        };\n\n        const response = await fetch(urlBack + \"/saveBudgetsPompInit\", requestOptions)\n\n\n        return await response.json()\n    },\n    saveBudgetsPompFin: async (budgetsFin, session, equipe) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                budgetsFin: budgetsFin,\n                session: session,\n                equipe: equipe\n            })\n        };\n        // console.log(\"budgets fin\")\n\n        const response = await fetch(urlBack + \"/saveBudgetsPompFin\", requestOptions)\n        // console.log(\"save budgets fin\")\n        return response\n    },\n    getBudgetsPompInit: async (session, equipe, numPompier, currentCycle, currentSequence) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session: session,\n                equipe: equipe,\n                numPompier: numPompier,\n                cycle: currentCycle,\n                sequence: currentSequence\n            })\n        };\n\n        const response = await fetch(urlBack + \"/getBudgetsPompInit\", requestOptions)\n\n\n        return await response.json()\n    },\n    getBudgetsPompFin: async (session, equipe) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session: session,\n                equipe: equipe\n            })\n        };\n\n        const response = await fetch(urlBack + \"/getBudgetsPompFin\", requestOptions)\n\n\n        return await response.json()\n    },\n    updateCurrentChrono: async (chrono, session, equipe) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                chrono: chrono,\n                session: session,\n                equipe: equipe\n            })\n        };\n\n        const response = await fetch(urlBack + \"/updateChrono\", requestOptions)\n\n        return await response.json()\n    },\n    updateConfig:async(manualConfig,session)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                manualConfig: manualConfig,\n                session: session\n            })\n        };\n\n        return fetch(urlBack + \"/updateConfig\", requestOptions)\n    },\n    resetPartie:async(nbEquipes,session,etats,chronoInit)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                // count: count,\n                nbEquipes:nbEquipes,\n                session: session,\n                etats:etats,\n                chronoInit:chronoInit\n            })\n        };\n\n        return fetch(urlBack + \"/resetPartie\", requestOptions)\n    },\n    getGeneralStats:async(session)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body:  JSON.stringify({\n                session: session\n            })\n        };\n\n        const response = await  fetch(urlBack+\"/getGeneralStats\", requestOptions)\n\n        return  await response.json()\n    }\n\n};\n","import React from 'react'\nimport '../../../styles/TactBandeauTop.css';\n\n\nconst CaseDonnee = ({\n    name,\n    value,\n    primary,\n    flexFactor,\n    textes,\n    data\n}) => {\n    const getText = (name) => {\n        try {\n            if (textes == null) {\n                return name\n            } else {\n                return textes[\"label\" + name.charAt(0).toUpperCase() + name.slice(1)].contenu\n            }\n        } catch (error) {\n            console.log(name)\n        }\n\n    }\n\n    return (\n        <div\n            className=\"case-panel\"\n            style={{\n                flexDirection: primary ? \"column\" : \"row\",\n                flex: flexFactor\n            }}\n        >\n            {\n                name == \"budgetRestant\" && data ?\n                <>\n                <label \n                className=\"label-title\"\n                style={{\n                    fontSize:!primary ?  15 : null,\n                    color:\"red\"\n                }}\n            >\n                {getText(\"budgetMaxAtteint\")}\n                </label>\n           \n               \n                    <span className=\"case-value\" >\n                        {value}\n                    </span>\n                </>\n\n\n\n\n                    :\n\n\n\n\n                <>\n                    <label\n                        className=\"label-title\"\n                        style={{\n                            fontSize: !primary ? 15 : null\n                        }}\n                    >\n                        {getText(name)}\n                    </label>\n           \n               \n                {\n                name == \"cycle\" || name == \"sequence\" || name == \"tour\" ?\n                    <span className=\"case-value\" >\n                        {value + \" \"}<span style={{ color: \"red\" }}>{\" / \" + (data)}</span>\n                    </span>\n\n                    :\n                    <span\n                        className=\"case-value\"\n                    > {value}</span>\n\n                }\n                </>\n            }\n\n        </div>\n\n\n\n    );\n}\n\nexport default CaseDonnee;","\nconst urlBack = \"https://www.back.leaders-extreme.fr\";\n\nexport default {\n    getTexts: async(nomView)=>{\n        \n        const requestOptions = {\n            method: 'POST',\n            headers: { \n                'Content-Type': 'application/json' \n        },\n            body: JSON.stringify({nomView:nomView})\n        };\n\n        const response = await  fetch(urlBack+\"/contents\", requestOptions)\n\n        return  await response.json()\n    },\n};","import React, { useState, useEffect } from 'react'\r\nimport CaseDonnee from './panels/CaseDonnee'\r\nimport \"../../styles/TactBandeauTop.css\"\r\nimport BookmarkRoundedIcon from '@material-ui/icons/BookmarkRounded';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport PlayAPI from \"../../API/PlayAPI\"\r\nimport ContentsAPI from \"../../API/ContentsAPI\"\r\n\r\nconst TactBandeauTop = ({\r\n    numeroPompier,\r\n    sequence,\r\n    numEquipe,\r\n    numSession,\r\n    cycle,\r\n    tour,\r\n    pomp,\r\n    stocks,\r\n    resultats,\r\n    configuration,\r\n    budget,\r\n    equipe,\r\n    handleClicValidated,\r\n    play,\r\n    chronoInit,\r\n    budgetDepense\r\n\r\n}) => {\r\n    const [textes, setTextes] = useState(null)\r\n    const [chrono, setChrono] = useState(null)\r\n    useEffect(() => {\r\n        \r\n        if (pomp == numeroPompier && chrono !== null && play && chrono>=0) {\r\n            if (chrono > 0) {\r\n                var chronoTimer = setInterval(() => {\r\n                    if (chrono % 30 == 0 && chrono>10) PlayAPI.updateCurrentChrono(chrono, numSession, numEquipe)\r\n                    setChrono(chrono => chrono - 1)\r\n                    \r\n\r\n                }, 1000)\r\n\r\n            } else {\r\n                // clearInterval(chronoTimer)\r\n                // console.log(\"handle\")\r\n                if(chrono==0){\r\n                    handleClicValidated(true)\r\n                    setChrono(-1)\r\n                }\r\n                \r\n            }\r\n           \r\n        } else {\r\n            if (configuration !== null ) {\r\n                if(chronoInit==null || chrono==-1){\r\n                    setChrono(-1)\r\n                }else{\r\n                    setChrono(chronoInit)\r\n                }\r\n                 \r\n            }\r\n        }\r\n\r\n        return () => {\r\n            clearInterval(chronoTimer)\r\n        }\r\n    }, [chrono])\r\n\r\n    useEffect(()=>{\r\n        if(chronoInit!==null && (chrono>=chronoInit || chrono==-1)   && configuration!==null){\r\n          setChrono(chronoInit)\r\n        }\r\n      })\r\n\r\n\r\n    \r\n\r\n    // useEffect(() => {\r\n    //     // console.log(configuration.chronoTour.valeur)\r\n    //     if (chrono === null && configuration !== null) {\r\n    //         // setChrono(chronoInit)\r\n    //     }\r\n    // })\r\n\r\n\r\n    useEffect(() => {\r\n        // console.log(\"use effect\")\r\n        const getTextes = async () => {\r\n            const textes = ContentsAPI.getTexts(\"jeuTactBandeauTop\").then(\r\n                (res) => { setTextes(res) }\r\n            )\r\n        }\r\n        if (textes == null) {\r\n            getTextes()\r\n        }\r\n    }, [textes])\r\n\r\n\r\n\r\n    const getText = (name) => {\r\n        if (textes == null) {\r\n            return name\r\n        } else {\r\n            try {\r\n                return textes[\"label\" + name.charAt(0).toUpperCase() + name.slice(1)].contenu\r\n            } catch (error) {\r\n                console.log(\"label\" + name.charAt(0).toUpperCase() + name.slice(1))\r\n                return name\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const renderStocks = () => {\r\n        return (\r\n            <div\r\n                className=\"case-panel donnees-container\"\r\n                style={{\r\n                    flex: 3\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"stockEquipements\")}\r\n                </label>\r\n                <div className=\"sous-donnees-container\">\r\n                    <CaseDonnee\r\n                        key={0}\r\n                        name={\"nbExtFeu\"}\r\n                        value={stocks.Feu}\r\n                        primary={false}\r\n                        flexFactor={1}\r\n                        textes={textes}\r\n\r\n                    />\r\n                    <CaseDonnee\r\n                        key={1}\r\n                        name={\"nbExtFum\"}\r\n                        value={stocks.Fum}\r\n                        primary={false}\r\n                        flexFactor={1}\r\n                        textes={textes}\r\n\r\n                    />\r\n                </div>\r\n                <div className=\"sous-donnees-container\">\r\n                    <CaseDonnee\r\n                        key={2}\r\n                        name={\"nbExtFeuFum\"}\r\n                        value={stocks.FeuFum}\r\n                        primary={false}\r\n                        flexFactor={2}\r\n                        textes={textes}\r\n\r\n                    />\r\n                    <CaseDonnee\r\n                        key={3}\r\n                        name={\"nbMarqueurs\"}\r\n                        value={stocks.Marqueur}\r\n                        primary={false}\r\n                        flexFactor={2}\r\n                        textes={textes}\r\n\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderResults = () => {\r\n        return (\r\n            <div\r\n                className=\"case-panel donnees-container\"\r\n                style={{\r\n                    flex: 2\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"resultats\") + \" \" + equipe}\r\n                </label>\r\n                <CaseDonnee\r\n                    key={4}\r\n                    name={getText(\"nbDecedes\")}\r\n                    value={resultats.Decedes}\r\n                    primary={false}\r\n                    flexFactor={0}\r\n                />\r\n                <CaseDonnee\r\n                    key={5}\r\n                    name={getText(\"nbSauves\")}\r\n                    value={resultats.Sauves}\r\n                    primary={false}\r\n                    flexFactor={0}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderNumPompier = () => {\r\n        return (\r\n            <div\r\n                className=\"case-panel\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"numPompier\")}\r\n                </label>\r\n                <div className=\"donnees-container\">\r\n                    <label\r\n                        className=\"label-title label-num-pompier\"\r\n                    >\r\n                        {numeroPompier}\r\n                    </label>\r\n                    <BookmarkRoundedIcon\r\n                        className=\"icone-num-pompier\"\r\n                        fontSize=\"large\"\r\n                        stroke={\"white\"}\r\n                        strokeWidth={1}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderCircleTours = () => {\r\n        var type = 1, //circle type - 1 whole, 0.5 half, 0.25 quarter\r\n            radius = 20, //distance from center\r\n            start = -90, //shift start from 0\r\n            // $elements = $('li:not(:first-child)'),\r\n            numberOfElements = configuration.nbPompEquipe.valeur,\r\n            slice = 360 * type / numberOfElements;\r\n\r\n        const renderCircleItems = () => {\r\n            var items = []\r\n            const decalage = 1.2\r\n            // items.push(\r\n            //     <li\r\n            //         key={\"c\"}\r\n            //         style={{\r\n            //             'transform': 'translate(' + (-radius*decalage*2) + 'px,'+ (-radius*decalage) +'px)',\r\n            //             \"backgroundColor\": tour==-1 ? \"#BF0000\" : null\r\n            //         }}\r\n\r\n            //     >\r\n            //         {\"C\"}\r\n            //     </li>\r\n            // )\r\n            items.push(\r\n                <li\r\n                    key={\"s\"}\r\n                    style={{\r\n                        'transform': 'translate(' + (radius * decalage) + 'px,' + (-radius * decalage) + 'px)',\r\n                        \"backgroundColor\": pomp == 0 ? \"#BF0000\" : null\r\n                    }}\r\n\r\n                >\r\n                    {\"S\"}\r\n                </li>\r\n            )\r\n\r\n            for (let i = 0; i < numberOfElements; i++) {\r\n                const rotate = slice * i + start\r\n                const rotateReverse = rotate * -1\r\n                const decalageCircle = 10\r\n\r\n                items.push(\r\n                    <li\r\n                        key={i}\r\n                        style={{\r\n                            'transform': 'rotate(' + rotate + 'deg) translate(' + radius + 'px) rotate(' + rotateReverse + 'deg) translate(' + -radius / 2 + 'px) translateY(' + decalageCircle + 'px)',\r\n                            \"backgroundColor\": i + 1 == pomp ? \"#BF0000\" : null\r\n                        }}\r\n\r\n                    >\r\n                        {i + 1}\r\n                    </li>\r\n\r\n                )\r\n            }\r\n            return items\r\n        }\r\n\r\n        return (\r\n            <div\r\n                className=\"case-panel\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"tourParTour\")}\r\n                </label>\r\n                <ul >\r\n                    {renderCircleItems()}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderFeu = () => {\r\n        return (\r\n            <div\r\n                className=\"case-panel\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"play\")}\r\n                </label>\r\n\r\n                <div className=\"donnees-container\">\r\n                    <div className='feu'>\r\n                        <div\r\n                            className={chrono < 30 && chrono>0? \"clignotant animation-reverted\" : \"\"}\r\n                            style={{ backgroundColor: numeroPompier != pomp ? \"#ff0000\" : chrono>=0 && chrono < 30 ? \"#E26F00\" : \"#9F9F9F\"  }}></div>\r\n                        <div\r\n                            className={chrono < 30 && chrono>0 ? \"clignotant\" : \"\"}\r\n                            style={{ backgroundColor: numeroPompier == pomp ? chrono>=0 && chrono < 30 ? \"#E26F00\" : \"#4dff4d\" : \"#9F9F9F\" }}\r\n                        ></div>\r\n                    </div>\r\n                    <span className=\"case-value\" style={{\r\n                        marginTop: \"10%\",\r\n                        width: \"100%\",\r\n                        maxWidth: \"100%\"\r\n                    }} >\r\n                        {(Math.floor((chrono>=0 ? chrono : configuration.chronoTourTact.valeur)/ 60)).toString().padStart(2, \"0\") + \" : \"}\r\n                        <span style={{ color: chrono <= 30 && chrono>0? \"red\" : \"inherit\", marginLeft: 5 }}> {\" \" + ((chrono>=0 ? chrono : configuration.chronoTourTact.valeur) % 60).toString().padStart(2, \"0\")} </span>\r\n                    </span>\r\n                </div>\r\n\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        configuration != null ?\r\n            <div className=\"bandeau-top\">\r\n                <div className=\"cases-container\">\r\n                    <CaseDonnee\r\n                        name={\"sequence\"}\r\n                        value={sequence}\r\n                        primary={true}\r\n                        flexFactor={1}\r\n                        textes={textes}\r\n                        data={configuration.nbSequences.valeur}\r\n                    />\r\n                    <CaseDonnee\r\n                        name={\"cycle\"}\r\n                        value={cycle}\r\n                        primary={true}\r\n                        flexFactor={1}\r\n                        textes={textes}\r\n                        data={configuration.nbCyclesParSequence.valeur}\r\n                    />\r\n                    <CaseDonnee\r\n                        name={\"tour\"}\r\n                        value={tour}\r\n                        primary={true}\r\n                        flexFactor={1}\r\n                        textes={textes}\r\n                        data={configuration.nbToursParCycle.valeur}\r\n                    />\r\n                    <CaseDonnee\r\n                        name={\"budgetRestant\"}\r\n                        value={budget + \" €\"}\r\n                        primary={true}\r\n                        flexFactor={1}\r\n                        textes={textes}\r\n                        data={budgetDepense >= configuration.budgetTourMax.valeur}\r\n\r\n                    />\r\n                    {renderStocks()}\r\n                    {renderResults()}\r\n                    {renderCircleTours()}\r\n                    {renderNumPompier()}\r\n                    {renderFeu()}\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n            :\r\n            null\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default TactBandeauTop;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport \"../../../styles/TactBandeauBottom.css\"\r\n\r\n\r\nexport default function Bulle({\r\n    open,\r\n    handleClose,\r\n    texte,\r\n    sourceImage,\r\n    action,\r\n    coutInter,\r\n    coutEq\r\n}) {\r\n//   const [open, setOpen] = React.useState(false);\r\n\r\n//   const handleClickOpen = () => {\r\n//     setOpen(true);\r\n//   };\r\n\r\n// .\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return (\r\n      <div\r\n          style={{\r\n            position:'absolute',\r\n            // left:100/6*Math.min(num,5)+\"%\",\r\n          }}\r\n          >\r\n          <Slide direction=\"up\" ref={ref} {...props} />\r\n        </div>\r\n        \r\n        )\r\n  });\r\n\r\n  return (\r\n    // <div \r\n    //     className=\"bulle-info\"\r\n    //     style={{\r\n    //       display:!open?  \"none\" : null,\r\n    //         // position:\"absolute\",\r\n    //         // bottom:100,\r\n    //         // left:\"20%\"\r\n    //         // flexDirection:\"row\"\r\n    //     }}\r\n    // >\r\n      /* <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\r\n        Slide in alert dialog\r\n      </Button> */\r\n      <Dialog\r\n        open={open!=null ? open : false}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={()=>handleClose()}\r\n        style={{\r\n          display:!open?  \"none\" : null,\r\n          // backgroundColor:\"red\"\r\n        }}\r\n        // aria-labelledby=\"alert-dialog-slide-title\"\r\n        // aria-describedby=\"alert-dialog-slide-description\"\r\n      >\r\n        {/* <DialogTitle >{title}</DialogTitle> */}\r\n        <DialogContent>\r\n          <img src = {sourceImage}/>\r\n          \r\n          <DialogContentText >\r\n            <label className=\"title-action\" style={{marginBottom:5}}>{action}</label>\r\n            <span style={{textAlign:\"justify\"}}>{texte}</span>\r\n\r\n            <span style={{fontWeight:\"bold\",fontStyle:\"italic\",marginTop:5}}>{coutInter!==null ?  \"Coût Intervention : \"+coutInter+ \" €\" : null}</span>\r\n            <span style={{fontWeight:\"bold\",fontStyle:\"italic\"}}> {coutInter!==null ?  \"Coût Equipement : \"+coutEq+ \" €\" : null}</span>\r\n\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions\r\n          disableSpacing={true}\r\n        >\r\n         \r\n          <Button onClick={()=>handleClose()} color=\"primary\">\r\n            Fermer\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n  );\r\n}","import React, { useState, useEffect,useRef } from 'react'\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport \"../../../styles/TactBandeauBottom.css\"\nimport Bulle from './Bulle';\n\nconst BoutonAction = ({\n    action,\n    nbIntervention,\n    nbStock,\n    sourceImage,\n    handleClicAction,\n    selected,\n    num,\n    disabled,\n    texteBulle,\n    coutInter,\n    coutEq\n}) => {\n    \n    const [bulleOpen,setBulleOpen]=useState(null)\n    let timerOver\n    const handleOpen = () => {\n        // console.log(selected,num)\n\n        // if(!selected){\n            setBulleOpen(true)\n        // }\n        // console.log(\"open\")\n    };\n\n    const handleClose = () => {\n        setBulleOpen(false)\n        clearTimeout(timerOver)\n        // console.log(\"close\")\n    };\n\n    \n    const handleOver=(delay)=>{\n        // console.log(selected)\n        timerOver=setTimeout(() => {\n            handleOpen()\n        }, delay);\n    }\n\n\n\n\n    return (\n        <div\n        onMouseEnter={() => {\n            handleOver(bulleOpen===null ? 4000 : 5000)\n        }}\n        onMouseLeave={() => {\n            clearTimeout(timerOver)\n        }}\n        >\n            <ToggleButton\n                disabled={disabled || nbIntervention <= 0 || nbStock <= 0}\n                selected={selected && ![4, 5].includes(num)}\n                className=\"bouton-action\"\n                variant='contained'\n                value={num}\n                onClick={() => {\n                    clearTimeout(timerOver)\n                    handleClicAction(num)\n                }}\n               \n\n            >\n                {/* <div> */}\n\n\n\n                <label className=\"title-action\">{action + \"\\n\"}</label>\n                <img src={sourceImage} alt={\"image\"} />\n                {nbIntervention > 1 ?\n                    <label className=\"count-action\">{nbIntervention + \" interventions\"}</label>\n\n                    :\n\n                    <label className=\"count-action\">{nbIntervention + \" intervention\"}</label>\n                }\n                {/* </div> */}\n\n            </ToggleButton>\n\n            <Bulle\n                open={bulleOpen}\n                handleClose={handleClose}\n                texte={texteBulle}\n                sourceImage={sourceImage}\n                action={action}\n                coutInter={coutInter}\n                coutEq={coutEq}\n            />\n        </div>\n    );\n}\n\nexport default BoutonAction;","import React, { useState, useEffect } from 'react'\r\nimport \"../../styles/TactBandeauBottom.css\"\r\nimport BoutonAction from \"./panels/BoutonAction\"\r\nimport ForwardIcon from '@material-ui/icons/Forward';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button'\r\n\r\nimport { CSSTransitionGroup } from \"react-transition-group\"\r\nimport ContentsAPI from \"../../API/ContentsAPI\"\r\nimport Bulle from './panels/Bulle';\r\n\r\nconst TactBandeauBottom = ({\r\n    interventions,\r\n    stocks,\r\n    numeroPompier,\r\n    handleClicFleche,\r\n    handleClicValidated,\r\n    handleClicDoor,\r\n    handleClicMarqueur,\r\n    handleClicExt,\r\n    handleNoClicked,\r\n    handleClicHabitant,\r\n    btnClickedBottom,\r\n    mursAutour,\r\n    casesAutour,\r\n    currentCase,\r\n    histActions,\r\n    configuration,\r\n    pomp,\r\n    deplacementEnCours,\r\n    budgetMaxAtteint,\r\n    isLoading\r\n\r\n}) => {\r\n    // console.log(histActions)\r\n    const [textes, setTextes] = useState(null)\r\n    const mursInterdits = [1, 2, 3, 5]\r\n    // console.log(casesAutour)\r\n    useEffect(() => {\r\n        const getTextes = async () => {\r\n            const textes = ContentsAPI.getTexts(\"jeuTactBandeauBottom\").then(\r\n                (res) => { setTextes(res) }\r\n            )\r\n        }\r\n        if (textes == null) {\r\n            getTextes()\r\n        }\r\n    }, [textes])\r\n\r\n\r\n    const handleClicAction = (num) => {\r\n        if (num == null) {\r\n            handleNoClicked()\r\n        } else {\r\n            if (num == 4 || num == 5) handleClicDoor(num == 4)\r\n            if (num == 3) handleClicMarqueur()\r\n            if (num < 3) handleClicExt(num)\r\n            if (num == 6) handleClicHabitant()\r\n        }\r\n\r\n\r\n    }\r\n    const [bulleOpenFleches, setBulleOpenFleches] = useState(false)\r\n\r\n    const renderFleches = () => {\r\n        let timerOverFleches\r\n        const handleOpenFleches = () => {\r\n            setBulleOpenFleches(true)\r\n        };\r\n\r\n        const handleCloseFleches = () => {\r\n            setBulleOpenFleches(false)\r\n            clearTimeout(timerOverFleches)\r\n        };\r\n\r\n\r\n        const handleOverFleches = (delay) => {\r\n            timerOverFleches = setTimeout(() => {\r\n                handleOpenFleches()\r\n            }, delay);\r\n        }\r\n\r\n        const disabled = interventions.Deplacement <= 0 || budgetMaxAtteint || isLoading || numeroPompier!=pomp\r\n        const color = \"#4A4848\"\r\n        const colorDisabled = \"#BFBFBF\"\r\n        if (configuration !== null) {\r\n            return (\r\n                <div\r\n                    className=\"fleches-container\"\r\n                    onMouseEnter={() => {\r\n                        handleOverFleches(bulleOpenFleches === null ? 1500 : 3000)\r\n                    }}\r\n                    onMouseLeave={() => {\r\n                        clearTimeout(timerOverFleches)\r\n                    }}\r\n                >\r\n                    <IconButton\r\n                        key={0}\r\n                        className=\"fleche-up fleche\"\r\n                        onClick={() => {\r\n                            handleClicFleche(0)\r\n                            clearTimeout(timerOverFleches)\r\n                        }}\r\n                        disabled={disabled || mursInterdits.includes(mursAutour[0]) || casesAutour.dessus > 0 || casesAutour.dessus === undefined || deplacementEnCours.type > 0}\r\n                    >\r\n                        <ForwardIcon\r\n                            style={{ color: disabled || mursInterdits.includes(mursAutour[0]) || casesAutour.dessus > 0 || casesAutour.dessus === undefined ? colorDisabled : color }}\r\n                            stroke={\"white\"}\r\n                            strokeWidth={1}\r\n                        />\r\n                    </IconButton>\r\n                    <IconButton\r\n                        key={1}\r\n                        className=\"fleche-droite fleche\"\r\n                        onClick={() => {\r\n                            handleClicFleche(1)\r\n                            clearTimeout(timerOverFleches)\r\n                        }}\r\n                        disabled={disabled || mursInterdits.includes(mursAutour[1]) || casesAutour.droite > 0 || casesAutour.droite === undefined || deplacementEnCours.type > 0}\r\n                    >\r\n                        <ForwardIcon\r\n                            // style={{ color: \"#4A4848\" }}\r\n                            style={{ color: disabled || mursInterdits.includes(mursAutour[1]) || casesAutour.droite > 0 || casesAutour.droite === undefined ? colorDisabled : color }}\r\n                            stroke={\"white\"}\r\n                            strokeWidth={1}\r\n                        />\r\n                    </IconButton>\r\n                    <div className=\"fleche-center fleche\">\r\n                        <div className=\"circle-fleche\"></div>\r\n                    </div>\r\n                    <IconButton\r\n                        key={2}\r\n                        className=\"fleche-bottom fleche\"\r\n                        onClick={() => {\r\n                            handleClicFleche(2)\r\n                            clearTimeout(timerOverFleches)\r\n                        }}\r\n                        disabled={disabled || mursInterdits.includes(mursAutour[2]) || casesAutour.dessous > 0 || casesAutour.dessous === undefined || deplacementEnCours.type > 0}\r\n\r\n                    >\r\n                        <ForwardIcon\r\n                            style={{ color: disabled || mursInterdits.includes(mursAutour[2]) || casesAutour.dessous > 0 || casesAutour.dessous === undefined ? colorDisabled : color }}\r\n                            stroke={\"white\"}\r\n                            strokeWidth={1}\r\n                        />\r\n                    </IconButton>\r\n                    <IconButton\r\n                        key={3}\r\n                        className=\"fleche-gauche fleche\"\r\n                        onClick={() => {\r\n                            handleClicFleche(3)\r\n                            clearTimeout(timerOverFleches)\r\n                        }}\r\n                        disabled={disabled || mursInterdits.includes(mursAutour[3]) || casesAutour.gauche > 0 || casesAutour.gauche === undefined || deplacementEnCours.type > 0}\r\n                    >\r\n                        <ForwardIcon\r\n                            style={{ color: disabled || mursInterdits.includes(mursAutour[3]) || casesAutour.gauche > 0 || casesAutour.gauche === undefined ? colorDisabled : color }}\r\n                            stroke={\"white\"}\r\n                            strokeWidth={1}\r\n                        />\r\n                    </IconButton>\r\n                    <Bulle\r\n                        open={bulleOpenFleches}\r\n                        handleClose={handleCloseFleches}\r\n                        texte={textes !== null ? textes[\"bulleFleches\"].contenu : \"\"}\r\n                        sourceImage={\"assets/fleches.png\"}\r\n                        action={\"Se déplacer\"}\r\n                        coutInter={configuration[\"coutInterDeplacement\"] !== undefined ? configuration[\"coutInterDeplacement\"].valeur : 0}\r\n                        coutEq={configuration[\"coutEqDeplacement\"] !== undefined ? configuration[\"coutInterDeplacement\"].valeur : 0}\r\n                    />\r\n                </div>\r\n            )\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    const renderButtons = () => {\r\n        var boutons = []\r\n        const indexMurs=[\"dessus\",\"droite\",\"dessous\",\"gauche\"]\r\n        if (textes != null && configuration !== null) {\r\n            Object.keys(textes).forEach((label, index) => {\r\n                if (label.includes(\"label\")) {\r\n                    var disabled = true\r\n\r\n                    \r\n                    \r\n                    if (index < 2 && mursAutour.some((mur, index) => casesAutour[indexMurs[index]] !==null && casesAutour[indexMurs[index]] !==undefined && casesAutour[indexMurs[index]]==4 && !mursInterdits.includes(mur))) disabled = false // une case en feu autour + extincteur feu\r\n                    if (index == 2 && mursAutour.some((mur, index) => casesAutour[indexMurs[index]] !==null && casesAutour[indexMurs[index]] !==undefined && casesAutour[indexMurs[index]]==3 && !mursInterdits.includes(mur))) disabled = false // une case en fumée autour + extincteur fumée\r\n\r\n                    if (index == 6 && mursAutour.some((mur, index) => casesAutour[indexMurs[index]] !==null && casesAutour[indexMurs[index]] !==undefined && Math.floor(casesAutour[indexMurs[index]] / 10) == 2 && !mursInterdits.includes(mur)) && Math.floor(currentCase / 1000) == 1 && (currentCase% 100 - currentCase % 10)==0 ) disabled = false // une case habitant + transport + pompier non chargé\r\n                    if (index == 3 && mursAutour.some(el => el > 0 && (el != 4 && el != 2))) disabled = false // marqueur degats \r\n                    if (index == 4 && mursAutour.includes(5)) disabled = false // porte fermee\r\n\r\n\r\n                    if (index == 5 && mursAutour.includes(6)) disabled = false // porte ouverte\r\n                    \r\n                    if (index != 4 && index != 5 || (index == 4 && mursAutour.includes(5)) || (index == 5 && mursAutour.includes(6))) {\r\n\r\n                        boutons.push(\r\n                            <BoutonAction\r\n\r\n                                key={label}\r\n                                action={textes[label].contenu}\r\n                                nbIntervention={interventions[label.replace(\"labelAction\", \"\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")]}\r\n                                nbStock={stocks[label.replace(\"labelAction\", \"nb\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")]}\r\n                                sourceImage={\"assets/\" + label.replace(\"label\", \"\") + \".png\"}\r\n                                handleClicAction={handleClicAction}\r\n                                selected={btnClickedBottom == index}\r\n                                num={index}\r\n                                disabled={disabled || deplacementEnCours.type > 0 || budgetMaxAtteint || isLoading || numeroPompier!=pomp}\r\n                                texteBulle={textes[label.replace(\"label\", \"bulle\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")] !== undefined ? textes[label.replace(\"label\", \"bulle\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")].contenu : label.replace(\"label\", \"bulle\")}\r\n                                coutInter={configuration[label.replace(\"labelAction\", \"coutInter\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")] !== undefined ? configuration[label.replace(\"labelAction\", \"coutInter\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")].valeur : 0}\r\n                                coutEq={configuration[label.replace(\"labelAction\", \"coutEq\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")] !== undefined ? configuration[label.replace(\"labelAction\", \"coutEq\").replace(\"Ouvrir\", \"\").replace(\"Fermer\", \"\")].valeur : 0}\r\n\r\n                            />\r\n                        )\r\n                    }\r\n\r\n                }\r\n\r\n            });\r\n        }\r\n        return (\r\n            <div className=\"boutons-container\">\r\n                {boutons}\r\n            </div>\r\n        )\r\n    }\r\n    const [bulleOpenValider, setBulleOpenValider] = useState(null)\r\n    const [bulleOpenRetour, setBulleOpenRetour] = useState(null)\r\n\r\n    const renderBoutonsValider = () => {\r\n        let timerOverValider\r\n        const handleOpenValider = () => {\r\n            setBulleOpenValider(true)\r\n            // console.log(\"open\")\r\n        };\r\n\r\n        const handleCloseValider = () => {\r\n            setBulleOpenValider(false)\r\n            clearTimeout(timerOverValider)\r\n            // console.log(\"close\")\r\n        };\r\n\r\n\r\n        const handleOverValider = (delay) => {\r\n            timerOverValider = setTimeout(() => {\r\n                handleOpenValider()\r\n            }, delay);\r\n        }\r\n        let timerOverRetour\r\n        const handleOpenRetour = () => {\r\n            setBulleOpenRetour(true)\r\n            // console.log(\"open\")\r\n        };\r\n\r\n        const handleCloseRetour = () => {\r\n            setBulleOpenRetour(false)\r\n            clearTimeout(timerOverRetour)\r\n            // console.log(\"close\")\r\n        };\r\n\r\n\r\n        const handleOverRetour = (delay) => {\r\n            timerOverRetour = setTimeout(() => {\r\n                handleOpenRetour()\r\n            }, delay);\r\n        }\r\n        \r\n        // console.log(deplacementEnCours.type > 0,isLoading)\r\n        return (\r\n            <div className=\"boutons-valider-container\">\r\n                <div\r\n                    onMouseEnter={() => {\r\n                        handleOverValider(bulleOpenValider === null ? 1500 : 3000)\r\n                    }}\r\n                    onMouseLeave={() => {\r\n                        clearTimeout(timerOverValider)\r\n                    }}\r\n                >\r\n                    <Button\r\n                        disabled={numeroPompier != pomp || deplacementEnCours.type > 0 || isLoading}\r\n                        key={0}\r\n                        className=\"bouton-valider vert\"\r\n                        variant='contained'\r\n                        disableElevation\r\n                        onClick={() => {\r\n                            clearTimeout(timerOverValider)\r\n                            handleClicValidated(true)\r\n                        }}\r\n\r\n                    >\r\n                        <img src={\"assets/validate.png\"} alt={\"image\"} />\r\n\r\n                    </Button>\r\n                    <Bulle\r\n                        open={bulleOpenValider}\r\n                        handleClose={handleCloseValider}\r\n                        texte={textes !== null ? textes[\"bulleValider\"].contenu : \"\"}\r\n                        sourceImage={\"assets/validate-vert.png\"}\r\n                        action={\"Valider vos actions\"}\r\n                        coutInter={null}\r\n                        coutEq={null}\r\n                    />\r\n                </div>\r\n                <div\r\n                    onMouseEnter={() => {\r\n                        handleOverRetour(bulleOpenRetour === null ? 1500 : 3000)\r\n                    }}\r\n                    onMouseLeave={() => {\r\n                        clearTimeout(timerOverRetour)\r\n                    }}\r\n                >\r\n                    <Button\r\n                        disabled={histActions.length <= 1 || deplacementEnCours.type > 0 || isLoading || numeroPompier!=pomp }\r\n                        key={1}\r\n                        className=\"bouton-valider rouge\"\r\n                        variant='contained'\r\n                        disableElevation\r\n                        onClick={() => {\r\n                            handleClicValidated(false)\r\n                            clearTimeout(timerOverRetour)\r\n                        }}\r\n                    >\r\n                        <img src={\"assets/return.png\"} alt={\"image\"} />\r\n                    </Button>\r\n                    <Bulle\r\n                        open={bulleOpenRetour}\r\n                        handleClose={handleCloseRetour}\r\n                        texte={textes !== null ? textes[\"bulleRetour\"].contenu : \"\"}\r\n                        sourceImage={\"assets/return-rouge.png\"}\r\n                        action={\"Annuler une action\"}\r\n                        coutInter={null}\r\n                        coutEq={null}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n    }\r\n    return (\r\n        <div className=\"bandeau-bottom-tact\">\r\n\r\n            {renderFleches()}\r\n\r\n            {renderButtons()}\r\n\r\n            {renderBoutonsValider()}\r\n\r\n        </div>\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default TactBandeauBottom;","import { withWidth } from '@material-ui/core';\nimport React, { useState, useEffect } from 'react'\n\nconst MurPiece = ({\n    num,\n    height,\n    width,\n    type,\n    coordX,\n    coordY,\n    nbColonnesPiece,\n    nbLignesPiece,\n    nbColonnesGrille,\n    nbLignesGrille,\n    anchor,\n    propositionMursDetruire,\n    handleClicMur,\n    mursH,\n    mursV\n}) => {\n    // console.log(nbColonnesGrille,nbLignesGrille)\n    const epaisseurInit = 1\n    const epaisseur = type > 0 ? type > 4 ? epaisseurInit * 8 : epaisseurInit * 4 : 1\n    const [mounted, setMounted] = useState(false)\n    const [transform, setTranform] = useState([0, 0])\n    const [clignotant, setClignotant] = useState(false)\n    const colors = [\n        \"\", // 0 simple\n        \"#313131\", // 1 large\n        \"black\", // 2 porteur\n        \"green\", // 3 marqueur dégat 1,\n        \"green\", // 4 marqueur dégat 2\n        \"#490000\",//5 porte closed\n        \"#490000\",//6 porte open\n    ]\n    const colorClignotant = \"#E26F00\"\n\n    const getTransform = (coordX, coordY) => {\n\n\n        if (num == 0 || num == 2) { // horizontal\n\n            let facteurX = 1\n            let facteurY = 1\n\n            try {\n                if (mursH[coordY][coordX - 1] == 2) facteurX = -1\n            } catch (error) { }\n            try {\n                if (mursH[coordY + 1][coordX - 1] == 2) facteurX = -1\n            } catch (error) { }\n\n            if (coordY - anchor[0] > nbLignesPiece - 2) {\n                facteurY = -1\n            }\n\n            const translateX = facteurX * width * 0.9\n            const translateY = facteurY * epaisseur / 1.5\n            return [translateX, translateY]\n        }\n\n\n\n        if (num == 1 || num == 3) { // vertical\n            let facteurX = 1\n            let facteurY = 1\n\n            try {\n                if (mursV[coordY - 1][coordX] == 2) facteurY = -1\n            } catch (error) { }\n            try {\n                if (mursV[coordY - 1][coordX + 1] == 2) facteurY = -1\n            } catch (error) { }\n\n\n            if (coordX - anchor[1] > nbColonnesPiece - 2 || coordX == 5) {\n                facteurX = -1\n            }\n            const translateX = facteurX * epaisseur / 1.5\n            const translateY = facteurY * height * 0.9\n            return [translateX, translateY]\n\n            // return 'translate(' + translateX + \"px,\" + translateY + \"px)\"\n        }\n    }\n\n    const getOpacity = () => {\n\n        if (num == 0 && (coordY - anchor[0] > nbLignesPiece - 2)) return 0\n\n        if (num == 2 && !(coordY - anchor[0] > nbLignesPiece - 2)) return 0\n\n        if (num == 1 && !(coordX - anchor[1] > nbColonnesPiece - 2 || coordX == 5)) return 0\n\n        if (num == 3 && (coordX - anchor[1] > nbColonnesPiece - 2 || coordX == 6)) return 0\n\n        return 1\n    }\n\n\n\n    useEffect(() => {\n        setMounted(true)\n        const transformNew = getTransform(coordX, coordY)\n        if (transform[0] !== transformNew[0] || transform[1] !== transformNew[1]) {\n            setTranform(transformNew)\n        }\n\n    })\n\n\n\n    const checkInCoords = (index) => {\n        var checked = false\n        if(propositionMursDetruire!==null && propositionMursDetruire!==undefined){\n            const mursADetruire = [1, 2, 3, 5, 6]\n            propositionMursDetruire[index].forEach(item => {\n                if (item[0] == coordX && item[1] == coordY && mursADetruire.includes(type)) checked = true  //case en question\n                if (item[0] == coordX && item[1] == coordY + 1 && num == 2 && mursADetruire.includes(type)) checked = true  //case dessus\n                if (item[0] == coordX && item[1] == coordY - 1 && num == 0 && mursADetruire.includes(type)) checked = true  //case dessous\n                if (item[0] == coordX + 1 && item[1] == coordY && num == 1 && mursADetruire.includes(type)) checked = true  //case gauche\n                if (item[0] == coordX - 1 && item[1] == coordY && num == 3 && mursADetruire.includes(type)) checked = true  //case droite\n    \n            });\n            const valeurFerme = 5\n            const valeurOuvert = 6\n    \n            switch (num) {\n                // HORIZONTAL\n                case 0:\n                    try {\n                        if (getTransform(coordX + 1, coordY)[0] < 0 && (mursH[coordY][coordX + 1] == valeurFerme || mursH[coordY][coordX + 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX + 1, coordY + 1)[0] < 0 && (mursH[coordY + 1][coordX + 1] == valeurFerme || mursH[coordY + 1][coordX + 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX - 1, coordY)[0] > 0 && (mursH[coordY][coordX - 1] == valeurFerme || mursH[coordY][coordX - 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX - 1, coordY - 1)[0] > 0 && (mursH[coordY - 1][coordX - 1] == valeurFerme || mursH[coordY - 1][coordX - 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    break;\n    \n                case 2:\n                    try {\n                        if (getTransform(coordX + 1, coordY)[0] < 0 && (mursH[coordY][coordX + 1] == valeurFerme || mursH[coordY][coordX + 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX + 1, coordY + 1)[0] < 0 && (mursH[coordY + 1][coordX + 1] == valeurFerme || mursH[coordY + 1][coordX + 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX - 1, coordY)[0] > 0 && (mursH[coordY][coordX - 1] == valeurFerme || mursH[coordY][coordX - 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX - 1, coordY + 1)[0] > 0 && (mursH[coordY + 1][coordX - 1] == valeurFerme || mursH[coordY + 1][coordX - 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    break;\n    \n                // VERTICAL   \n                case 1:\n                    try {\n                        if (getTransform(coordX, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX] == valeurFerme || mursV[coordY + 1][coordX] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX + 1, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX + 1] == valeurFerme || mursV[coordY + 1][coordX + 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX] == valeurFerme || mursV[coordY - 1][coordX] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX + 1, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX + 1] == valeurFerme || mursV[coordY - 1][coordX + 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    break;\n    \n                case 3:\n                    try {\n                        if (getTransform(coordX, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX] == valeurFerme || mursV[coordY + 1][coordX] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX - 1, coordY + 1)[1] < 0 && (mursV[coordY + 1][coordX - 1] == valeurFerme || mursV[coordY - 1][coordX - 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX] == valeurFerme || mursV[coordY - 1][coordX] == valeurOuvert)) checked = false\n                    } catch (error) { }\n                    try {\n                        if (getTransform(coordX - 1, coordY - 1)[1] > 0 && (mursV[coordY - 1][coordX - 1] == valeurFerme || mursV[coordY - 1][coordX - 1] == valeurOuvert)) checked = false\n                    } catch (error) { }\n    \n                    break;\n    \n            }\n        }\n       \n\n\n        return checked\n    }\n\n\n\n    useEffect(() => {\n        setClignotant(checkInCoords(num % 2))\n    })\n\n    // const test = () => {\n    //     console.log(\"coords X \", coordX, \"coords Y \", coordY, \"type\", type)\n    //     console.log(mursH[coordY])\n    //     // console.log(propositionMursDetruire[0],propositionMursDetruire[1])\n    //     // console.log(checkInCoords(0),checkInCoords(1))\n    // }\n\n    const renderPoignee = () => {\n        let component = []\n\n        switch (num) {\n            case 0: // horizontal haut\n                component.push(\n                    <div // trait\n                        key={0}\n                        style={{\n                            position: \"absolute\",\n                            top: epaisseur,\n                            height: epaisseur / 3,\n                            backgroundColor: \"#9F9F9F\",\n                            width: epaisseur / 2,\n                            left: transform[0] > 0 ? width * 0.2 : null,\n                            right: transform[0] < 0 ? width * 0.2 : null,\n                            border: \"1px solid black\",\n\n\n                        }} />\n                )\n                component.push(\n                    <div // rond\n                        key={1}\n                        style={{\n                            position: \"absolute\",\n                            top: epaisseur * 1.3,\n                            height: epaisseur,\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n                            width: epaisseur,\n                            left: transform[0] > 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n                            right: transform[0] < 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n                            borderRadius: \"100%\",\n                            border: \"1px solid black\",\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n                        }} />\n                )\n                break;\n            case 2:\n                component.push(\n                    <div\n                        key={2}\n\n                        style={{\n                            position: \"absolute\",\n                            top: -epaisseur * 0.3 - 3,\n                            height: epaisseur / 3,\n                            backgroundColor: \"#9F9F9F\",\n                            width: epaisseur / 2,\n                            left: transform[0] > 0 ? width * 0.2 : null,\n                            right: transform[0] < 0 ? width * 0.2 : null,\n                            border: \"1px solid black\"\n                        }} />\n                )\n                component.push(\n                    <div\n                        key={3}\n\n                        style={{\n                            position: \"absolute\",\n                            top: -epaisseur * 1.3 - 3,\n                            height: epaisseur,\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n                            width: epaisseur,\n                            left: transform[0] > 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n                            right: transform[0] < 0 ? width * 0.2 - epaisseur / 2 + epaisseur / 4 : null,\n                            borderRadius: \"100%\",\n                            border: \"1px solid black\",\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n\n                        }} />\n                )\n                break;\n            case 1:\n                component.push(\n                    <div\n                        key={4}\n                        style={{\n                            position: \"absolute\",\n                            top: transform[1] > 0 ? height * 0.2 : null,\n                            bottom: transform[1] < 0 ? height * 0.2 : null,\n                            height: epaisseur / 3,\n                            backgroundColor: \"#9F9F9F\",\n                            width: epaisseur / 3,\n                            right: epaisseur,\n                            border: \"1px solid black\"\n                        }} />\n                )\n                component.push(\n                    <div\n                        key={5}\n                        style={{\n                            position: \"absolute\",\n                            top: transform[1] > 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n                            bottom: transform[1] < 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n                            // bottom: height * 0.2 - epaisseur / 6 - 1,\n                            height: epaisseur,\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n                            width: epaisseur,\n                            right: epaisseur * 1.3,\n                            borderRadius: \"100%\",\n                            border: \"1px solid black\",\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n\n                        }} />\n\n                )\n                break;\n            case 3:\n                component.push(\n                    <div\n                        key={6}\n                        style={{\n                            position: \"absolute\",\n                            top: transform[1] > 0 ? height * 0.2 : null,\n                            bottom: transform[1] < 0 ? height * 0.2 : null,\n                            height: epaisseur / 3,\n                            backgroundColor: \"#9F9F9F\",\n                            width: epaisseur / 3,\n                            left: epaisseur,\n                            border: \"1px solid black\"\n                        }} />\n                )\n                component.push(\n                    <div\n                        key={7}\n                        style={{\n                            position: \"absolute\",\n                            top: transform[1] > 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n                            bottom: transform[1] < 0 ? height * 0.2 - epaisseur / 6 - 1 : null,\n                            height: epaisseur,\n                            background: \"linear-gradient(20deg, rgba(100,100,100,1) 0%, rgba(194,194,194,1) 68%, rgba(236,236,236,1) 100%)\",\n                            width: epaisseur,\n                            left: epaisseur * 1.3,\n                            borderRadius: \"100%\",\n                            border: \"1px solid black\",\n                            boxShadow: \"-1px 1px 1px 1px #9F9F9F\"\n\n                        }} />\n                )\n                break;\n        }\n\n\n        return (component)\n    }\n\n    const renderTriangle = (top, bottom, left, rotate, marginLeft, marginTop, color) => {\n        return (\n            num % 2 == 0 ?\n                <div\n                    className={clignotant ? \"triangle clignotant\" : \"triangle\"}\n                    style={{\n                        borderTop: top + \"px solid transparent\",\n                        borderBottom: bottom + \"px solid transparent\",\n                        borderLeft: left + \"px solid \" + (clignotant ? \"#E26F00\" : color),\n                        top: num == 0 ? marginTop : null,\n                        bottom: num == 2 ? marginTop : null,\n                        left: num == 0 ? marginLeft : null,\n                        right: num == 2 ? marginLeft : null,\n                        transform: \"rotate(\" + (rotate + num * 90) + \"deg)\",\n                    }}\n                ></div>\n                :\n                <div\n                    className={clignotant ? \"triangle clignotant\" : \"triangle\"}\n                    style={{\n                        borderTop: left * 0.8 + \"px solid \" + (clignotant ? \"#E26F00\" : color),\n                        borderLeft: (bottom) + \"px solid transparent\",\n                        borderRight: top + \"px solid transparent\",\n                        top: num == 1 ? -1 : null,\n                        bottom: num == 3 ? -1 : null,\n                        left: num == 3 ? marginTop - 1 : null,\n                        right: num == 1 ? marginTop - 1 : null,\n                        transform: \"rotate(\" + (rotate + 0 + (num - 1) * 90) + \"deg) \",\n                        zIndex: 10\n                    }}\n                ></div>\n        )\n    }\n\n    const renderMarqueurDegat = () => {\n\n        return (\n            num % 2 == 0 ?\n                <div\n                    style={{\n                        width: \"50%\",\n                        height: epaisseur * 2 - 1,\n                        top: num == 2 ? 0 : null,\n                        bottom: num == 0 ? 0 : null,\n                        left: num == 0 ? -1 : null,\n                        right: num == 2 ? -1 : null,\n                        // bottom:num==0 ? 0 : null,\n                        position: \"absolute\",\n                        // backgroundColor: \"pink\"\n\n                    }}\n                >\n                    {/* COTES */}\n                    <div style={{\n                        position: 'absolute',\n                        right: num == 2 ? 0 : null,\n                        top: num % 2 == 1 ? 0 : 0,\n                        backgroundColor: num % 2 == 1 ? \"transparent\" : 'black',\n                        width: epaisseur,\n                        height: epaisseur,\n                    }}></div>\n                    <div style={{\n                        position: 'absolute',\n                        right: num == 2 ? 0 : null,\n                        left: num % 2 == 1 ? 0 : null,\n                        bottom: num % 2 == 1 ? 0 : 0,\n                        backgroundColor: num % 2 == 1 ? \"transparent\" : 'black',\n                        width: epaisseur,\n                        height: epaisseur,\n                    }}></div>\n                    {type == 3 ?\n\n                        <>\n                            {renderTriangle(\n                                0, epaisseur, width * 0.49,// top , bottom , left\n                                0,// rotate\n                                3, num % 2 == 1 ? -3 : -epaisseur / 2 + 2,// margin left, margin top\n                                \"black\"// color\n                            )}\n                            {renderTriangle(\n                                3, 3, width * 0.48,// top , bottom , left\n                                0,// rotate\n                                3, epaisseur / 4,// margin left, margin top\n                                \"black\"// color\n                            )}\n\n\n                            {renderTriangle(\n                                4, 0, width * 0.49,// top , bottom , left\n                                0,// rotate\n                                3, num % 2 == 1 ? 1 : epaisseur - 1,\n                                \"black\"\n                            )}\n\n                        </>\n                        :\n                        <>\n                            {renderTriangle(\n                                0, epaisseur, width * 0.22,// top , bottom , left\n                                0,// rotate\n                                3, num % 2 == 1 ? -3 : -epaisseur / 2 + 2,// margin left, margin top\n                                \"black\"// color\n                            )}\n                            {renderTriangle(\n                                3, 3, width * 0.23,// top , bottom , left\n                                0,// rotate\n                                3, epaisseur / 4,// margin left, margin top\n                                \"black\"// color\n                            )}\n\n\n                            {renderTriangle(\n                                4, 0, width * 0.25,// top , bottom , left\n                                0,// rotate\n                                3, num % 2 == 1 ? 1 : epaisseur - 1,\n                                \"black\"\n                            )}\n\n                        </>\n\n\n                    }\n                </div>\n                :\n                <div\n                    style={{\n                        width: epaisseur * 2 - 1,\n                        height: height / 2,\n                        top: num == 1 ? -1 : null,\n                        bottom: num == 3 ? -1 : null,\n                        left: num == 3 ? -epaisseur + 1 : null,\n                        right: num == 1 ? -epaisseur : null,\n                        position: \"absolute\",\n                        // backgroundColor:\"pink\"\n\n                    }}\n                >\n                    {/* COTES */}\n                    <div style={{\n                        position: 'absolute',\n                        right: num == 2 ? 0 : null,\n                        top: num == 1 ? -1 : null,\n                        bottom: num == 3 ? -1 : null,\n                        backgroundColor: num % 2 == 1 ? \"transparent\" : 'green',\n                        width: epaisseur,\n                        height: epaisseur,\n                    }}></div>\n                    <div style={{\n                        position: 'absolute',\n                        right: num == 2 ? 0 : null,\n                        left: num % 2 == 1 ? 0 : null,\n                        top: num == 1 ? -1 : null,\n                        bottom: num == 3 ? -1 : null,\n                        backgroundColor: num % 2 == 1 ? \"transparent\" : 'red',\n                        width: epaisseur,\n                        height: epaisseur,\n                    }}></div>\n                    {type == 3 ?\n\n                        <>\n                            {renderTriangle(\n                                0, epaisseur, height * 0.7,// top , bottom , left\n                                0,// rotate\n                                3, 1,// margin left, margin top\n                                \"black\"// color\n                            )}\n                            {renderTriangle(\n                                3, 3, height * 0.7,// top , bottom , left\n                                0,// rotate\n                                epaisseur / 4, epaisseur / 4,// margin left, margin top\n                                \"black\"// color\n                            )}\n\n\n                            {renderTriangle(\n                                4, 0, height * 0.7,// top , bottom , left\n                                0,// rotate\n                                3, epaisseur,\n                                \"black\"\n                            )}\n\n                        </>\n                        :\n                        <>\n                            {renderTriangle(\n                                0, epaisseur, height * 0.3,// top , bottom , left\n                                0,// rotate\n                                3, 1,// margin left, margin top\n                                \"black\"// color\n                            )}\n                            {renderTriangle(\n                                3, 3, height * 0.3,// top , bottom , left\n                                0,// rotate\n                                epaisseur / 4, epaisseur / 4,// margin left, margin top\n                                \"black\"// color\n                            )}\n\n\n                            {renderTriangle(\n                                4, 0, height * 0.3,// top , bottom , left\n                                0,// rotate\n                                3, epaisseur,\n                                \"black\"\n                            )}\n\n                        </>\n\n\n                    }\n                </div>\n        )\n    }\n    // console.log(propositionMursDetruire)\n\n    const renderCoins = () => {\n        //    console.log(\"test\")\n        const typesConsideres = [1, 2]\n        switch (num) {\n            case 1:\n                try {\n                    if (typesConsideres.includes(mursH[coordY + 1][coordX + 1]) && typesConsideres.includes(mursV[coordY + 1][coordX + 1])) {\n                        return (\n                            <div\n                                style={{\n                                    position: \"absolute\",\n                                    backgroundColor: colors[1],\n                                    width: epaisseurInit * 4 * 2,\n                                    height: epaisseurInit * 4 * 2,\n                                    bottom: -epaisseurInit * 4,\n                                    right: -1 - epaisseurInit * 4,\n                                    // zIndex: 9\n                                }}\n                            ></div>\n                        )\n                    }\n                } catch (error) { }\n                try {\n                    if (typesConsideres.includes(mursH[coordY][coordX + 1]) && typesConsideres.includes(mursV[coordY - 1][coordX + 1])) {\n                        return (\n                            <div\n                                style={{\n                                    position: \"absolute\",\n                                    backgroundColor:  colors[1],\n                                    width: epaisseurInit * 4 * 2,\n                                    height: epaisseurInit * 4 * 2,\n                                    top: -1 - epaisseurInit * 4,\n                                    right: -1 - epaisseurInit * 4,\n                                    // zIndex: 9\n                                }}\n                            ></div>\n                        )\n                    }\n                } catch (error) { }\n                break;\n\n            case 3:\n                try {\n                    if (typesConsideres.includes(mursH[coordY + 1][coordX - 1]) && typesConsideres.includes(mursV[coordY + 1][coordX])) {\n\n                        return (\n                            <div\n                                style={{\n                                    position: \"absolute\",\n                                    backgroundColor:  colors[1],\n                                    width: epaisseurInit * 4 * 2,\n                                    height: epaisseurInit * 4 * 2,\n                                    bottom: -epaisseurInit * 4,\n                                    left: -1 - epaisseurInit * 4,\n                                    // zIndex: 9\n                                }}\n                            ></div>\n                        )\n                    }\n\n                } catch (error) { }\n                try {\n                    if (typesConsideres.includes(mursH[coordY][coordX - 1]) && typesConsideres.includes(mursV[coordY - 1][coordX])) {\n\n                        return (\n                            <div\n                                style={{\n                                    position: \"absolute\",\n                                    backgroundColor:  colors[1],\n                                    width: epaisseurInit * 4 * 2,\n                                    height: epaisseurInit * 4 * 2,\n                                    top: -1 - epaisseurInit * 4,\n                                    left: -1 - epaisseurInit * 4,\n                                    // zIndex: 9\n                                }}\n                            ></div>\n                        )\n                    }\n\n                } catch (error) { }\n                break;\n\n\n        }\n\n\n        //    return null\n    }\n\n\n    return (\n        <>\n            <div\n                className={clignotant ? \"clignotant\" : \"\"}\n                key={8}\n                onClick={clignotant ? () => {\n                    // test()\n                    handleClicMur(num, type, coordX, coordY)\n                } : null}\n\n                // : () => test()}\n                style={{\n                    position: \"absolute\",\n                    width: num % 2 == 0 ? width + 2 : epaisseur,\n                    height: num % 2 == 1 ? height + 1 : epaisseur,\n                    right: num == 1 ? -1 : null,\n                    left: num % 2 == 0 || num == 3 ? -1 : null,\n                    top: num == 0 || num % 2 == 1 ? -1 : null,\n                    bottom: num == 2 ? 0 : null,\n                    // backgroundColor: (type > 0 && type != 2) ? colors[type] : 'transparent',\n                    zIndex: type > 2 ? clignotant ? 1 : 3 : 4,\n                    transform: type == 6 ? 'translate(' + transform[0] + \"px,\" + transform[1] + \"px)\" : (type == 5 ? (num % 2 == 0 ? 'translate(0px,' + transform[1] + \"px)\" : 'translate(' + transform[0] + \"px,0px)\") : \"\"),\n                    opacity: type == 5 || type == 6 ? getOpacity() : 1,\n                    transition: type > 4 && mounted ? \"1s\" : \"\",\n                    borderRadius: type > 4 ? 3 : 0,\n                    border: type > 4 ? \"1px solid black\" : \"\",\n                    boxShadow: type > 4 ? \"-1px 1px 1px 1px #9F9F9F\" : \"\",\n                    backgroundColor: (type > 0 && type != 3 && type != 4) ? clignotant ? colorClignotant : colors[type] : 'transparent',\n                    cursor: clignotant ? \"pointer\" : \"\",\n                    // filter:clignotant && mouseOver ? \"brightness(1)\" : \"\"\n                }}\n            >\n                {\n                    type == 5 || type == 6 ?\n                        renderPoignee()\n                        :\n                        null\n                }\n                {\n                    type == 3 || type == 4 ?\n                        renderMarqueurDegat()\n                        :\n                        null\n                }\n\n            </div>\n            {\n                type == 0 || type == 5 || type == 6 ?\n                    renderCoins()\n                    :\n                    null\n            }\n        </>\n    );\n}\n\nexport default MurPiece;","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport MurPiece from \"./MurPiece\"\n\nconst CasePiece = ({\n    murs,\n    type,\n    coordX,\n    coordY,\n    nbColonnesPiece,\n    nbLignesPiece,\n    nbColonnesGrille,\n    nbLignesGrille,\n    anchor,\n    propositionMursDetruire,\n    propositionsCase,\n    handleClicMur,\n    handleClicCase,\n    mursH,\n    mursV,\n    position,\n    idPiece,\n    deplacementEnCours\n}) => {\n    const [height, setHeight] = useState(0)\n    const [width, setWidth] = useState(0)\n\n    const colorClignotant = \"#E26F00\"\n    const colorCache = \"#D1D1D1\"\n    const colorFondPosition = \"white\"\n    const colorFondPiece = \"#EEEEEE\"\n\n    const element = useRef()\n\n\n    const [contentDisplayed,setContentDisplayed]=useState(false)\n\n    useLayoutEffect(() => {\n        function updateSize() {\n            setHeight(element.current.clientHeight)\n            setWidth(element.current.clientWidth)\n        }\n        setContentDisplayed(true)\n        window.addEventListener('resize', updateSize);\n        updateSize();\n        return () => window.removeEventListener('resize', updateSize);\n    }, []);\n\n    const renderMurs = () => {\n        var mursComponents = []\n        for (let i = 0; i < 4; i++) {\n\n            mursComponents.push(\n                <MurPiece\n                    key={i}\n                    num={i}\n                    height={height}\n                    width={width}\n                    type={murs[i]}\n                    coordX={coordX}\n                    coordY={coordY}\n                    anchor={anchor}\n                    nbColonnesPiece={nbColonnesPiece}\n                    nbLignesPiece={nbLignesPiece}\n                    nbColonnesGrille={nbColonnesGrille}\n                    nbLignesGrille={nbLignesGrille}\n                    propositionMursDetruire={propositionMursDetruire}\n                    handleClicMur={handleClicMur}\n                    mursH={mursH}\n                    mursV={mursV}\n                />\n            )\n        }\n        return (\n            <>\n                {mursComponents}\n            </>\n        )\n    }\n\n\n    const renderContenuCase = () => {\n        let opacity = 0\n        let source = \"\"\n        var sourceCasque = \"\"\n        var rotate=-90\n\n        \n        \n        let align=\"center\"\n        let justify=\"center\"\n\n        if (Math.floor(type / 1000) == 1) { // POMPIER.\n            sourceCasque=\"assets/Casque\"+(type % 1000 - type % 100) / 100+\".png\"\n            if (type % 100 < 10) { // POMPIER SEUL\n                opacity = 1\n                if(position[0] == coordY && position[1] == coordX){ // CASE DU JOUEUR\n                    source = \"assets/Pompier0\"+(deplacementEnCours!==null && deplacementEnCours!==undefined ? deplacementEnCours.type : \"0\")+\".png\"\n                }else{\n                    source = \"assets/Pompier00.png\"\n                }\n                \n\n            } else { // POMPIER HABITANT\n                opacity = 1\n                source = \"assets/PompierHabitant\" + (type % 100 - type % 10) / 10 + \".png\"\n            }\n\n            if(deplacementEnCours!==null && deplacementEnCours!==undefined && position[0] == coordY && position[1] == coordX){\n                switch (deplacementEnCours.rotation) {\n                    \n                    case 1: // HAUT\n                        rotate = -90\n                        switch (deplacementEnCours.type) {\n                            case 1:\n                                align=\"flex-start\"\n                                break;\n                        \n                            case 2:\n                                align=\"flex-end\"\n                                break;\n                        }\n                        break;\n                    case 2: // DROITE\n                        rotate = 0\n                        switch (deplacementEnCours.type) {\n                            case 1:\n                                justify=\"flex-end\"\n                                break;\n                        \n                            case 2:\n                                justify=\"flex-start\"\n                                break;\n                        }\n                        break;\n                    case 3: // BAS\n                        rotate = 90\n                        switch (deplacementEnCours.type) {\n                            case 1:\n                                align=\"flex-end\"\n                                break;\n                        \n                            case 2:\n                                align=\"flex-start\"\n                                break;\n                        }\n                        break;\n                    case 4: // GAUCHE\n                        rotate = 180\n                        switch (deplacementEnCours.type) {\n                            case 1:\n                                justify=\"flex-start\"\n                                break;\n                        \n                            case 2:\n                                justify=\"flex-end\"\n                                break;\n                        }\n                        break;\n                    default:\n                        rotate = 0\n                        break;\n                }\n           \n    \n            }else{\n                switch (type%10) {\n                    case 1:\n                        rotate = -90\n                        break;\n                    case 2:\n                        rotate = 0\n                        break;\n                    case 3:\n                        rotate = 90\n                        break;\n                    case 4:\n                        rotate = 180\n                        break;\n                    default:\n                        rotate=-90\n                        break;\n                }\n            }\n            \n        } else{\n            // console.log(anchor)\n            if(position[0] < nbLignesPiece+anchor[0] && position[1]< nbColonnesPiece+anchor[1] ){\n                \n                // console.log(\"test2\")\n                if (Math.floor(type / 10) == 2) {\n                    source = \"assets/Habitant0.png\"\n                    if( position!==null && position[0]-1 == coordY && position[1] == coordX && type>20) source = \"assets/Habitant\"+type%10+\".png\"// CASE DESSUS\n                    if( position!==null && position[0] == coordY && position[1] +1 == coordX && type>20) source = \"assets/Habitant\"+type%10+\".png\"// CASE DROITE\n                    if( position!==null && position[0]+1 == coordY && position[1] == coordX && type>20) source = \"assets/Habitant\"+type%10+\".png\"// CASE DESSOUS\n                    if( position!==null && position[0] == coordY && position[1]-1== coordX && type>20) source = \"assets/Habitant\"+type%10+\".png\"// CASE GAUCHE\n                    opacity = 1\n                    rotate=0\n\n\n\n                } else if (type == 3) {\n                    opacity = 1\n                    source = \"assets/Fumee.png\"\n                    rotate=Math.random()*360\n                }\n                else if (type == 4) {\n                    opacity = 1\n                    source = \"assets/Flamme2.png\"\n                    rotate=Math.random()*360\n                }else{\n                    \n                    if( position!==null && position[0]-1 == coordY && position[1] == coordX && deplacementEnCours.type==1 && deplacementEnCours.rotation==1) align=\"flex-end\"// CASE DESSUS\n                    if( position!==null && position[0] == coordY && position[1] +1 == coordX && deplacementEnCours.type==1 && deplacementEnCours.rotation==2) align=\"flex-start\"// CASE DROITE\n                    if( position!==null && position[0]+1 == coordY && position[1] == coordX && deplacementEnCours.type==1 && deplacementEnCours.rotation==3) align=\"flex-start\"// CASE DESSOUS\n                    if( position!==null && position[0] == coordY && position[1]-1== coordX && deplacementEnCours.type==1 && deplacementEnCours.rotation==4) align=\"flex-end\"// CASE GAUCHE\n            \n                    rotate=0\n                    \n                }\n            }\n\n           \n\n            // console.log(source,rotate,opacity)\n        } \n\n\n\n        return (\n            <div\n                style={{\n                    position:\"absolute\",\n                    display:\"flex\",\n                    opacity: position[0] == coordY && position[1] == coordX ? opacity : 1,\n                    \n                    width:\"100%\",\n                    height:\"100%\",\n                    alignItems:align,\n                    justifyContent:justify,\n                    // zIndex:1\n                    \n                }}\n            >\n\n                \n               \n                <img\n                    style={{\n                        // maxHeight: height * 0.9,\n                        // maxWidth: width * 0.8,\n                        position:\"absolute\",\n                        display:!contentDisplayed && position[0] == coordY && position[1] == coordX ? \"none\" : \"\",\n                        maxWidth:Math.floor(type / 1000) == 1 && type%100>=10 ? \"85%\":\"90%\",\n                        height:Math.floor(type / 1000) == 1 && type%100>=10 ? \"80%\":\"90%\",\n                        objectFit: \"contain\",\n                        transform: rotate !== undefined ? \"rotate(\" + rotate + \"deg)\" : \"\",\n                        zIndex:4\n                    }}\n                    src={source}\n                    // onError={(evt)=>{\n                    //     setContentDisplayed(false)\n                    // }}\n                    // onLoad={()=>setContentDisplayed(true)}\n                />\n                {sourceCasque!==\"\" ?\n                 <img\n                 style={{\n                     position:\"absolute\",\n                     display:!contentDisplayed && position[0] == coordY && position[1] == coordX ? \"none\" : \"\",\n                     maxWidth:Math.floor(type / 1000) == 1 && type%100>=10 ? \"85%\":\"90%\",\n                     height:Math.floor(type / 1000) == 1 && type%100>=10 ? \"80%\":\"90%\",\n                     objectFit: \"contain\",\n                     transform: rotate !== undefined ? \"rotate(\" + rotate + \"deg)\" : \"\",\n                     zIndex:10\n                 }}\n                 src={sourceCasque}\n                 // onError={(evt)=>{\n                 //     setContentDisplayed(false)\n                 // }}\n                 // onLoad={()=>setContentDisplayed(true)}\n             />\n                :\n                null\n                } \n            </div>\n        )\n    }\n\n\n    const renderCase = () => {\n        const source = idPiece!==null && idPiece!==undefined ? \"assets/Sol_0\"+((idPiece)%6+1)+\".png\" : null\n\n\n        return (\n            <div \n                style={{\n                    display:\"flex\",\n                    flex:1,\n                    width: \"100%\",\n                    // height: \"100%\",\n                    justifyContent:\"center\",\n                    alignItems:\"center\",\n                    // zIndex:0\n                }}\n            >\n                {source!==null ? \n                <img\n                style={{\n                    position:\"absolute\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    objectFit: \"cover\",\n                    filter: \"brightness(0.90) grayscale(5%) contrast(95%)\",\n                    \n                }}\n                src={source}\n                \n            />\n            : null}\n                \n                {renderContenuCase()}\n            </div>\n\n        )\n    }\n\n\n\n    const [clignotant, setClignotant] = useState(false)\n    const [valeurApres, setValeurApres] = useState(null)\n    const [valeurAvant, setValeurAvant] = useState(null)\n    const checkInCoords = () => {\n        var checked = false\n        if (propositionsCase !== null && propositionsCase !== undefined) {\n            var valApres = null\n            var valAvant = null\n            propositionsCase.forEach((coords) => {\n                if (coords[0] == coordY && coords[1] == coordX) {\n                    checked = true\n                    valAvant = coords[2]\n                    valApres = coords[3]\n                }\n            });\n\n            if (checked && valApres != null) {\n                setValeurAvant(valAvant)\n                setValeurApres(valApres)\n            }\n        }\n\n        return checked\n\n    }\n\n    // useEffect(()=>{\n    //     console.log(valeurApres)\n    // },[valeurApres])\n\n\n\n    useEffect(() => {\n        setClignotant(checkInCoords())\n    })\n\n\n    return (\n\n        <div\n\n            ref={element}\n            className={clignotant ? \"clignotant case-piece\" : \"case-piece\"}\n            style={{\n                backgroundColor: clignotant ? colorClignotant : (type >= 0 ? (position[0] == coordY && position[1] == coordX ? colorFondPosition : colorFondPiece) : colorCache), // -1 caché\"\n                transition: \"2s\",\n                filter: position[0] == coordY && position[1] == coordX ? \"brightness(1.2)\" :\"\"\n            }}\n            onClick={clignotant ? () => handleClicCase(valeurAvant, valeurApres, coordX, coordY)\n                : null}\n        >\n            {renderMurs()}\n            {renderCase()}\n\n        </div>\n\n    );\n}\n\nexport default CasePiece;","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CasePiece from \"./CasePiece\"\nimport { useScrollTrigger } from '@material-ui/core';\n\n\n\nconst Piece = ({\n    carte,\n    position,\n    nbLignesGrille,\n    nbColonnesGrille,\n    nbLignesPiece,\n    nbColonnesPiece,\n    mursV,\n    mursH,\n    anchor,\n    maxLignesPiece,\n    maxColonnesPiece,\n    propositionMursDetruire,\n    handleClicMur,\n    handleClicCase,\n    propositionsCase,\n    anchors,\n    deplacementEnCours,\n    getAnchor\n\n}) => {\n    // console.log(\"Grille nb lignes : \"+nbLignesGrille+\", colonnes : \"+nbColonnesGrille+\" | piece lignes : \"+nbLignesPiece+\",  colonnes \"+nbColonnesPiece+\" => anchor i : \"+anchor[0]+\", j : \"+anchor[1])\n    // console.log()\n    const mursInterdits = [1, 2, 3, 5]\n\n    const [intermediaire,setIntermediaire]=useState(position[0]>=nbLignesGrille && position[1]>=nbColonnesGrille)\n\n    const getTypeExt=(anchori,anchorj)=>{\n        if(!intermediaire){\n            if(anchori<0 || anchorj<0) return -1\n            const mursCote = [mursH[position[0]][position[1]],mursV[position[0]][position[1]+1],mursH[position[0]+1][position[1]],mursV[position[0]][position[1]]]\n            // console.log(mursCote)\n            if(anchori<carte.length && anchorj<carte[0].length){\n                if(anchori==position[0]+1 && anchorj==position[1] && !mursInterdits.includes(mursCote[2])) return carte[anchori][anchorj] // juste dessous\n                if(anchori==position[0]-1 && anchorj==position[1] && !mursInterdits.includes(mursCote[0])) return carte[anchori][anchorj] // juste dessus\n                if(anchori==position[0] && anchorj==position[1]-1 && !mursInterdits.includes(mursCote[3])) return carte[anchori][anchorj] // juste gauche\n                if(anchori==position[0] && anchorj==position[1]+1 && !mursInterdits.includes(mursCote[1])) return carte[anchori][anchorj] // juste droite\n        \n            }\n     \n        }\n     \n        return -1   \n    }\n\n\n\n    const pompierDansPiece=(anchori,anchorj)=>{\n        var present = false\n        anchors.forEach(([min,max],index) => {\n            if(anchori>=min[0] && anchori<=max[0] && anchorj>=min[1] && anchorj<=max[1]){\n                for(let i=min[0];i<=max[0];i++){\n                    for(let j=min[1];j<=max[1];j++){\n                       \n                        if(carte[i][j]>=100){\n                            present=true\n                        }\n                        \n                    }\n                }\n            }\n        });\n        return present \n\n    }\n\n    const renderRow=(i)=>{\n        var row=[]\n        for(let j=0;j<nbColonnesPiece+2;j++){\n            const anchori = i+anchor[0]-1\n            const anchorj = j+anchor[1]-1\n            \n            if (anchori<nbLignesPiece+anchor[0] &&  anchori>=anchor[0] && anchorj<nbColonnesPiece+anchor[1] &&  anchorj>=anchor[1] ){\n\n                row.push( \n                    <CasePiece \n                        key={i+\",\"+j}\n                        coordX={anchorj}\n                        coordY={anchori}\n                        anchor={anchor}\n                        nbColonnesGrille={nbColonnesGrille}\n                        nbLignesGrille={nbLignesGrille}\n                        nbColonnesPiece={nbColonnesPiece}\n                        nbLignesPiece={nbLignesPiece}\n                        murs={[mursH[anchori][anchorj],mursV[anchori][anchorj+1],mursH[anchori+1][anchorj],mursV[anchori][anchorj]]}\n                        type={ j>nbColonnesGrille || i>nbLignesGrille || !pompierDansPiece(anchori,anchorj) ? -1 : carte[anchori][anchorj] }\n                        propositionMursDetruire={propositionMursDetruire}\n                        propositionsCase={propositionsCase}\n                        handleClicMur={handleClicMur}\n                        handleClicCase={handleClicCase}\n                        mursH={mursH}\n                        mursV={mursV}\n                        position={position}\n                        idPiece={getAnchor(anchors,[anchori,anchorj])[1]}\n                        deplacementEnCours={deplacementEnCours}\n                    />\n                )\n            }else{\n               \n                let newI = anchori\n                let newJ = anchorj\n                var murs =[0,0,0,0]\n                \n                if(anchori<anchor[0]){ // haut\n                    newI = anchori-1\n                    newJ = anchorj\n                    // console.log(\"new \",newI,newJ,mursV[newI][newJ+1])\n                    try{\n                        murs[1]=mursV[anchori][anchorj+1]>0 ? mursV[anchori][anchorj+1] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[3]=mursV[anchori][anchorj]>0 ? mursV[anchori][anchorj] : 0\n                    }catch(error){\n\n                    }\n                    try{\n                        murs[2]=mursH[anchori+1][anchorj]>0 ? mursH[anchori+1][anchorj] : 0\n                    }catch(error){\n                    }\n                    \n                    \n                }\n                if(anchori>=nbLignesPiece+anchor[0]){ // bas\n                    newI = anchori+1\n                    newJ = anchorj\n                    try{\n                        murs[0]=mursH[anchori][anchorj]>0 ? mursH[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                   \n                    try{\n                        murs[1]=mursV[anchori][anchorj+1]>0 ? mursV[anchori][anchorj+1] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[3]=mursV[anchori][anchorj]>0 ? mursV[anchori][anchorj] : 0\n                    }catch(error){\n\n                    }\n                   \n                   \n                }\n                if(anchorj<anchor[1]){ // gauche\n                    newI = anchori\n                    newJ = anchorj-1\n                    try{\n                        murs[0]=mursH[anchori][anchorj]>0 ? mursH[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[2]=mursH[anchori+1][anchorj]>0 ? mursH[anchori+1][anchorj] : 0\n                    }catch(error){\n                    }\n\n                    try{\n                        murs[1]=mursV[anchori][anchorj+1]>0 ? mursV[anchori][anchorj+1] : 0\n                    }catch(error){\n                    }\n                    \n                }\n                if(anchorj>=nbColonnesPiece+anchor[1]){ // droite\n                    newI = anchori\n                    newJ = anchorj+1\n                    try{\n                        murs[0]=mursH[anchori][anchorj]>0 ? mursH[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                    try{\n                        murs[2]=mursH[anchori+1][anchorj]>0 ? mursH[anchori+1][anchorj] : 0\n                    }catch(error){\n                    }\n\n                    try{\n                        murs[3]=mursV[anchori][anchorj]>0 ? mursV[anchori][anchorj] : 0\n                    }catch(error){\n                    }\n                }\n\n                const typeExt = getTypeExt(anchori,anchorj)\n\n                \n                row.push( \n                    <CasePiece \n                        key={i+\",\"+j}\n                        coordX={anchorj}\n                        coordY={anchori}\n                        anchor={anchor}\n                        nbColonnesGrille={nbColonnesGrille}\n                        nbLignesGrille={nbLignesGrille}\n                        nbColonnesPiece={nbColonnesPiece}\n                        nbLignesPiece={nbLignesPiece}\n                        murs={murs}\n                        propositionMursDetruire={propositionMursDetruire}\n                        propositionsCase={propositionsCase}\n                        handleClicMur={handleClicMur}\n                        handleClicCase={handleClicCase}\n                        type={typeExt}\n                        mursH={mursH}\n                        mursV={mursV}\n                        position={position}\n                        idPiece={typeExt>=0 ? getAnchor(anchors,[anchori,anchorj])[1] : null}\n                        deplacementEnCours={deplacementEnCours}\n                    /> \n                )\n                \n\n            }\n            \n        }\n        return row\n    }\n\n\n    const renderGrille=()=>{\n        var grille=[]\n        for (let i=0;i<nbLignesPiece+2;i++){\n            grille.push(\n                <div key={\"row\"+i} className=\"row-piece\" >\n                    {renderRow(i)}\n                </div>\n            )  \n            \n        }\n        return grille\n    }\n    \n    return (  \n\n    <div\n        className=\"piece\"  \n        style={{\n            position:\"absolute\",\n            width:(nbColonnesPiece+2) /((nbColonnesPiece!=nbColonnesGrille ? maxColonnesPiece :  nbColonnesGrille )+2)*80+\"%\",\n            height:(nbLignesPiece+2) / ((nbLignesPiece!=nbLignesGrille ?  maxLignesPiece : nbLignesGrille   )+2) *100+\"%\",\n            \n        }} \n       \n    >\n       {renderGrille()}\n    </div>\n        \n        \n    );\n}\n \nexport default Piece;","import React, { useEffect, useState,useRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport '../../styles/Grille.css';\r\nimport Piece from \"./pieces/Piece\"\r\nimport { useScrollTrigger } from '@material-ui/core';\r\n\r\n\r\n\r\nconst Grille = ({\r\n    nbColonnesGrille,\r\n    nbLignesGrille,\r\n    carte,\r\n    position,\r\n    mursH,\r\n    mursV,\r\n    propositionMursDetruire,\r\n    propositionsCase,\r\n    handleClicMur,\r\n    handleClicCase,\r\n    handleChangePiece,\r\n    deplacementEnCours\r\n}) => {\r\n\r\n    const [maxLignesPiece, setMaxLignesPiece] = useState(0)\r\n    const [maxColonnesPiece, setMaxColonnesPiece] = useState(0)\r\n\r\n    const IdAnchor=useRef(null)\r\n\r\n    const associate = (minimums, maximums) => {\r\n        var anchors = []\r\n        var maxUsed = []\r\n        var maxCPiece = 0\r\n        var maxLPiece = 0\r\n\r\n        // maximums.sort((a,b)=>b[1]-a[1]).sort((a,b)=>a[0]-b[0])\r\n        // var firstAssociation=[]\r\n        // console.log(minimums.length)\r\n        minimums.forEach((min, index) => {\r\n            var Max = [nbLignesGrille, nbColonnesGrille]\r\n            // var possiblesMax=[]\r\n            maximums.forEach(max => {\r\n                if ((max[0] >= min[0] && max[1] >= min[1]) && (max[0] <= Max[0] && max[1] <= Max[1]) && (min[0] < max[0] || min[1] < max[1]) && !maxUsed.includes(max)) {\r\n                    Max = max\r\n                }\r\n                // if((max[0]>=min[0] && max[1]>=min[1]) && (min[0]<max[0] || min[1]<max[1])){\r\n                //     possiblesMax.push( max)\r\n                // }\r\n            });\r\n            // console.log(\"min : \",index,min,possiblesMax)\r\n            maxUsed.push(Max)\r\n            anchors.push([min, Max])\r\n\r\n            if (maxCPiece < Max[1] - min[1]) {\r\n                maxCPiece = Max[1] - min[1] + 1\r\n            }\r\n            if (maxLPiece < Max[0] - min[0]) {\r\n                maxLPiece = Max[0] - min[0] + 1\r\n            }\r\n        })\r\n\r\n\r\n        if (maxColonnesPiece == 0) {\r\n            setMaxColonnesPiece(maxCPiece)\r\n        }\r\n        if (maxLignesPiece == 0) {\r\n            setMaxLignesPiece(maxLPiece)\r\n        }\r\n        // console.log(\"Anchors : \",anchors)\r\n\r\n        return (anchors)\r\n    }\r\n\r\n    const getAnchors = () => {\r\n        var minimums = []\r\n        var maximums = []\r\n        for (let i = 0; i < mursV.length; i++) {\r\n            for (let j = 0; j < mursH[i].length; j++) {\r\n                if (mursV[i][j] > 0 && mursH[i][j] > 0) {\r\n                    minimums.push([i, j])\r\n                }\r\n                if (mursV[i][j + 1] > 0 && mursH[i + 1][j] > 0) {\r\n                    maximums.push([i, j])\r\n                }\r\n            }\r\n        }\r\n        return associate(minimums, maximums)\r\n    }\r\n\r\n    const getAnchor = (anchors, pos) => {\r\n        // console.log(\"get anchor\")\r\n        var Min = [-1, -1]\r\n        var Index = -1\r\n        anchors.forEach((a, index) => {\r\n            const min = a[0]\r\n            const max = a[1]\r\n            if (pos[0] >= min[0] && pos[1] >= min[1] && pos[0] <= max[0] && pos[1] <= max[1]) {\r\n                Min = min\r\n                Index = index\r\n            }\r\n        });\r\n        return [Min, Index]\r\n    }\r\n\r\n\r\n\r\n\r\n    const renderPieces = () => {\r\n        var components = []\r\n        // console.log(\"render piece\")\r\n        let nbL\r\n        let nbC\r\n        let [anchor, idAnchor] = [[-1, -1], 0  ]\r\n        try {\r\n            \r\n            const anchors = getAnchors()\r\n\r\n\r\n            if (position[0] < nbLignesGrille && position[1] < nbColonnesGrille) {\r\n\r\n                [anchor, idAnchor] = getAnchor(anchors, position)\r\n                if (anchor[0] < 0 && anchor[1] < 0) {\r\n                    nbL = nbLignesGrille\r\n                    nbC = nbColonnesGrille\r\n                } else {\r\n                    const area = anchors[idAnchor]\r\n                    nbL = area[1][0] - area[0][0] + 1\r\n                    nbC = area[1][1] - area[0][1] + 1\r\n                }\r\n            } else {\r\n                nbL = nbLignesGrille\r\n                nbC = nbColonnesGrille\r\n            }\r\n        } catch (error) {\r\n            nbL = nbLignesGrille\r\n            nbC = nbColonnesGrille\r\n        }\r\n\r\n        if(idAnchor!==IdAnchor.current){\r\n            if(IdAnchor.current!==null){\r\n                handleChangePiece()\r\n            }\r\n            IdAnchor.current=idAnchor\r\n          \r\n            \r\n        }\r\n\r\n\r\n        components.push(\r\n            <Piece\r\n                key={idAnchor}\r\n                mursH={mursH}\r\n                mursV={mursV}\r\n                carte={carte}\r\n                position={position}\r\n                nbLignesPiece={nbL}\r\n                nbColonnesPiece={nbC}\r\n                nbLignesGrille={nbLignesGrille}\r\n                nbColonnesGrille={nbColonnesGrille}\r\n                maxLignesPiece={maxLignesPiece}\r\n                maxColonnesPiece={maxColonnesPiece}\r\n                propositionMursDetruire={propositionMursDetruire}\r\n                propositionsCase={propositionsCase}\r\n                handleClicMur={handleClicMur}\r\n                handleClicCase={handleClicCase}\r\n                anchor={anchor[0] < 0 && anchor[1] < 0 ? [0, 0] : anchor}\r\n                anchors={getAnchors()}\r\n                deplacementEnCours={deplacementEnCours}\r\n                getAnchor={getAnchor}\r\n            />\r\n        )\r\n        return components\r\n    }\r\n\r\n\r\n    return (\r\n        <div\r\n            className=\"piece-container\"\r\n        >\r\n            {renderPieces()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Grille;","import React, { useState, useEffect } from 'react'\r\nimport CaseDonnee from './panels/CaseDonnee'\r\nimport \"../../styles/TactBandeauDroite.css\"\r\nimport ExitToAppOutlinedIcon from '@material-ui/icons/ExitToAppOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ChatOutlinedIcon from '@material-ui/icons/ChatOutlined';\r\nimport ContentsAPI from \"../../API/ContentsAPI\"\r\nimport cookie from 'react-cookies'\r\nimport { useHistory } from 'react-router-dom';\r\nconst TactBandeauDroite = ({\r\n    configuration,\r\n    handleDisconnect\r\n}) => {\r\n\r\n    const [developpe, setDeveloppe] = useState(false)\r\n\r\n\r\n    //     console.log(configuration)\r\n    //     const [textes, setTextes] = useState(null)\r\n    //     const [chrono,setChrono]=useState(null)\r\n    //     useEffect(() => {\r\n    //         if(tour==numeroPompier){\r\n    //         if (chrono > 0) {\r\n    //             var chronoTimer = setInterval(() => {\r\n    //             setChrono(chrono => chrono - 1)\r\n\r\n    //             }, 1000)\r\n\r\n    //         }\r\n    //         return () => {\r\n    //         clearInterval(chronoTimer)\r\n    //         }\r\n    //     }\r\n    //     }, [chrono])\r\n\r\n\r\n\r\n    //   useEffect(()=>{\r\n    //     if(chrono===null && configuration!==null){\r\n    //       setChrono(configuration.chronoTour.valeur)\r\n    //     }\r\n    //   })\r\n\r\n    //     useEffect(() => {\r\n    //         // console.log(\"use effect\")\r\n    //         const getTextes = async () => {\r\n    //             const textes = ContentsAPI.getTexts(\"jeuTactBandeauDroite\").then(\r\n    //                 (res) => { setTextes(res) }\r\n    //             )\r\n    //         }\r\n    //         if (textes == null) {\r\n    //             getTextes()\r\n    //         }\r\n    //     }, [textes])\r\n\r\n\r\n\r\n    //     const getText = (name) => {\r\n    //         if (textes == null) {\r\n    //             return name\r\n    //         } else {\r\n    //             try {\r\n    //                 return textes[\"label\" + name.charAt(0).toUpperCase() + name.slice(1)].contenu\r\n    //             } catch (error) {\r\n    //                 console.log(\"label\" + name.charAt(0).toUpperCase() + name.slice(1))\r\n    //                 return name\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n\r\n\r\n    //     const renderStocks = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel donnees-container\"\r\n    //                 style={{\r\n    //                     flex: 3\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"stockEquipements\")}\r\n    //                 </label>\r\n    //                 <div className=\"sous-donnees-container\">\r\n    //                     <CaseDonnee\r\n    //                         key={0}\r\n    //                         name={\"nbExtFeu\"}\r\n    //                         value={stocks.Feu}\r\n    //                         primary={false}\r\n    //                         flexFactor={1}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                     <CaseDonnee\r\n    //                         key={1}\r\n    //                         name={\"nbExtFum\"}\r\n    //                         value={stocks.Fum}\r\n    //                         primary={false}\r\n    //                         flexFactor={1}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                 </div>\r\n    //                 <div className=\"sous-donnees-container\">\r\n    //                     <CaseDonnee\r\n    //                         key={2}\r\n    //                         name={\"nbExtFeuFum\"}\r\n    //                         value={stocks.FeuFum}\r\n    //                         primary={false}\r\n    //                         flexFactor={2}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                     <CaseDonnee\r\n    //                         key={3}\r\n    //                         name={\"nbMarqueurs\"}\r\n    //                         value={stocks.Marqueur}\r\n    //                         primary={false}\r\n    //                         flexFactor={2}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                 </div>\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderResults = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel donnees-container\"\r\n    //                 style={{\r\n    //                     flex: 2\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"resultats\") + \" \" + numeroPompier}\r\n    //                 </label>\r\n    //                 <CaseDonnee\r\n    //                     key={4}\r\n    //                     name={getText(\"nbDecedes\")}\r\n    //                     value={resultats.Decedes}\r\n    //                     primary={false}\r\n    //                     flexFactor={0}\r\n    //                 />\r\n    //                 <CaseDonnee\r\n    //                     key={5}\r\n    //                     name={getText(\"nbSauves\")}\r\n    //                     value={resultats.Sauves}\r\n    //                     primary={false}\r\n    //                     flexFactor={0}\r\n    //                 />\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderNumPompier = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel\"\r\n    //                 style={{\r\n    //                     flex: 1\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"numPompier\")}\r\n    //                 </label>\r\n    //                 <div className=\"donnees-container\">\r\n    //                     <label\r\n    //                         className=\"label-title label-num-pompier\"\r\n    //                     >\r\n    //                         {numeroPompier}\r\n    //                     </label>\r\n    //                     <BookmarkRoundedIcon\r\n    //                         className=\"icone-num-pompier\"\r\n    //                         fontSize=\"large\"\r\n    //                         stroke={\"white\"}\r\n    //                         strokeWidth={1}\r\n    //                     />\r\n    //                 </div>\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderCircleTours = () => {\r\n    //         var type = 1, //circle type - 1 whole, 0.5 half, 0.25 quarter\r\n    //             radius = 20, //distance from center\r\n    //             start = -90, //shift start from 0\r\n    //             // $elements = $('li:not(:first-child)'),\r\n    //             numberOfElements = configuration.nbPompEquipe.valeur,\r\n    //             slice = 360 * type / numberOfElements;\r\n\r\n    //         const renderCircleItems = () => {\r\n    //             var items = []\r\n    //             const decalage = 1.2\r\n    //             // items.push(\r\n    //             //     <li\r\n    //             //         key={\"c\"}\r\n    //             //         style={{\r\n    //             //             'transform': 'translate(' + (-radius*decalage*2) + 'px,'+ (-radius*decalage) +'px)',\r\n    //             //             \"backgroundColor\": tour==-1 ? \"#BF0000\" : null\r\n    //             //         }}\r\n\r\n    //             //     >\r\n    //             //         {\"C\"}\r\n    //             //     </li>\r\n    //             // )\r\n    //             items.push(\r\n    //                 <li\r\n    //                     key={\"s\"}\r\n    //                     style={{\r\n    //                         'transform': 'translate(' + (radius*decalage) + 'px,'+ (-radius*decalage) +'px)',\r\n    //                         \"backgroundColor\": tour==0 ? \"#BF0000\" : null\r\n    //                     }}\r\n\r\n    //                 >\r\n    //                     {\"S\"}\r\n    //                 </li>\r\n    //             )\r\n\r\n    //             for (let i = 0; i < numberOfElements; i++) {\r\n    //                 const rotate = slice * i + start\r\n    //                 const rotateReverse = rotate * -1\r\n    //                 const decalageCircle=10\r\n\r\n    //                 items.push(\r\n    //                     <li\r\n    //                         key={i}\r\n    //                         style={{\r\n    //                             'transform': 'rotate(' + rotate + 'deg) translate(' + radius + 'px) rotate(' + rotateReverse + 'deg) translate(' + -radius / 2 + 'px) translateY('+decalageCircle+'px)',\r\n    //                             \"backgroundColor\": i + 1 == tour ? \"#BF0000\" : null\r\n    //                         }}\r\n\r\n    //                     >\r\n    //                         {i + 1}\r\n    //                     </li>\r\n\r\n    //                 )\r\n    //             }\r\n    //             return items\r\n    //         }\r\n\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel\"\r\n    //                 style={{\r\n    //                     flex: 1\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"tourParTour\")}\r\n    //                 </label>\r\n    //                 <ul >\r\n    //                     {renderCircleItems()}\r\n    //                 </ul>\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderFeu = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel\"\r\n    //                 style={{\r\n    //                     flex: 1\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"play\")}\r\n    //                 </label>\r\n\r\n    //                 <div className=\"donnees-container\">\r\n    //                     <div className='feu'>\r\n    //                         <div style={{ backgroundColor: numeroPompier != tour || chrono < 30 ? chrono <= 30  ? \"#ff0000\" : \"#4dff4d\" : \"#9F9F9F\" }}></div>\r\n    //                         <div\r\n    //                             className={chrono <= 30 && chrono>0? \"clignotant\" : \"\"}\r\n    //                             style={{ backgroundColor: numeroPompier == tour ? chrono <= 30 ? chrono>0 ? \"#E26F00\" :  \"#ff0000\" : \"#4dff4d\" : \"#9F9F9F\" }}\r\n    //                         ></div>\r\n    //                     </div>\r\n    //                     <span className=\"case-value\" style={{\r\n    //                         marginTop: \"10%\",\r\n    //                         width: \"100%\",\r\n    //                         maxWidth: \"100%\"\r\n    //                     }} >\r\n    //                         {(Math.floor(chrono / 60)).toString().padStart(2, \"0\") + \" : \"}\r\n    //                         <span style={{ color: chrono <= 30 ? \"red\" : \"inherit\", marginLeft: 5 }}> {\" \" + (chrono % 60).toString().padStart(2, \"0\")} </span>\r\n    //                     </span>\r\n    //                 </div>\r\n\r\n\r\n\r\n\r\n\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n \r\n\r\n\r\n\r\n    const renderDisconnect = () => {\r\n        return (\r\n            <div\r\n                className=\"btn-panel-droite\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n\r\n                {developpe ?\r\n\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        // className={classes.button}\r\n                        onClick={()=>{\r\n                            setDeveloppe(false)\r\n                            handleDisconnect()\r\n                        }}\r\n                        startIcon={\r\n                            <ExitToAppOutlinedIcon\r\n                                fontSize=\"large\"\r\n                            />}\r\n                    >\r\n                        Se déconnecter\r\n                    </Button>\r\n                    :\r\n                    // <IconButton aria-label=\"delete\" variant=\"contained\"\r\n                    //     color=\"primary\">\r\n                    <div>\r\n                        <ExitToAppOutlinedIcon\r\n                            fontSize=\"small\"\r\n                            // color=\"primary\"\r\n                        />\r\n                        </div>\r\n                    // </IconButton>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderMessage = () => {\r\n        return (\r\n            <div\r\n                className=\"btn-panel-droite\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n\r\n                {developpe ?\r\n\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={true}\r\n                        startIcon={\r\n                            <ChatOutlinedIcon\r\n                                fontSize=\"large\"\r\n                            />}\r\n                    >\r\n                        Messagerie\r\n                    </Button>\r\n                    :\r\n                    <div>\r\n                        <ChatOutlinedIcon\r\n                            fontSize=\"small\"\r\n                            // color=\"gray\"\r\n                        />\r\n                        </div>\r\n                    // </IconButton>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        configuration != null ?\r\n            <div className=\"bandeau-droite-tact\"\r\n                onMouseEnter={() => setDeveloppe(true)}\r\n                onMouseLeave={() => setDeveloppe(false)}\r\n            >\r\n                {renderDisconnect()}\r\n                {renderMessage()}\r\n            </div>\r\n            :\r\n            null\r\n\r\n    );\r\n}\r\n\r\nexport default TactBandeauDroite;","import \"../styles/App.css\"\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport PlayAPI from \"../API/PlayAPI\"\r\nimport TactBandeauTop from \"../components/interfaceJoueur/TactBandeauTop\"\r\nimport TactBandeauBottom from \"../components/interfaceJoueur/TactBandeauBottom\"\r\nimport Grille from \"../components/interfaceJoueur/Grille\"\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nimport cookie from 'react-cookies'\r\nimport TactBandeauDroite from \"../components/interfaceJoueur/TactBandeauDroite\"\r\nimport { Typography } from \"@material-ui/core\"\r\nimport ContentsAPI from \"../API/ContentsAPI\"\r\nimport io from 'socket.io-client'\r\n\r\n\r\nconst TactInterface = () => {\r\n\r\n  const history = useHistory()\r\n  const user = cookie.load(\"user\")\r\n\r\n  const [socket, setSocket] = useState(null)\r\n\r\n\r\n  \r\n  const handleDisconnect = () => {\r\n    if(socket!==null){\r\n      socket.disconnect()\r\n      \r\n    }\r\n    cookie.save('user', \"disconnected\", {\r\n      path: '/',\r\n      maxAge: 60 * 60 * 1.5, //sec\r\n    })\r\n    history.push('/login');\r\n  }\r\n\r\n  if (user === null || user === undefined || user == \"disconnected\") history.push(\"/login\");\r\n  if (user !== null && user !== undefined && user.role !== undefined && !user.role.includes(\"TACT\")) handleDisconnect()\r\n  const [play, setPlay] = useState(false)\r\n\r\n\r\n\r\n  const [numPompier, setNumPompier] = useState(user !== null && user !== undefined && user.role !== undefined ? user.role.replace(\"TACT\", \"\") : null)\r\n  const [currentPomp, setCurrentPomp] = useState(null)\r\n  const [currentTour, setCurrentTour] = useState(null)\r\n  const [currentCycle, setCurrentCycle] = useState(null)\r\n  const [currentSequence, setCurrentSequence] = useState(null)\r\n  const [session, setSession] = useState(user != null ? user.session : null)\r\n  const [equipe, setEquipe] = useState(user != null ? user.equipe : null)\r\n  const [position, setPosition] = useState(null)\r\n  const [deplacementEnCours, setDeplacementEnCours] = useState({\r\n    type: 0,\r\n    rotation: 1\r\n  })\r\n  const [histActions, setHistActions] = useState([])\r\n  const [chrono, setChrono] = useState(null)\r\n  useEffect(() => {\r\n    if (numPompier == null) handleDisconnect()\r\n  }, [numPompier])\r\n\r\n\r\n\r\n\r\n  const [configuration, setConfiguration] = useState(null)\r\n\r\n  const [stocks, setStocks] = useState(null)\r\n\r\n  const [resultats, setResultats] = useState({\r\n    Decedes: 0,\r\n    Sauves: 0\r\n  })\r\n\r\n  const [interventions, setInterventions] = useState({\r\n    Deplacement: 0,\r\n    Feu: 0,\r\n    FeuFum: 0,\r\n    Fum: 0,\r\n    Marqueur: 0,\r\n    Porte: 0,\r\n    Habitant: 0\r\n  })\r\n\r\n  const [budget, setBudget] = useState(0)\r\n  const [budgetDepense, setBudgetDepense] = useState(0)\r\n\r\n\r\n  const isLoading = useRef(false)\r\n\r\n  // INITIALISATION DE LA CARTE\r\n\r\n  // const [carte, setCarte] = useState([\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  //   [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],\r\n  // ])\r\n\r\n  const [carte, setCarte] = useState([])\r\n\r\n  const [nbLignesGrille, setNbLignesGrille] = useState(0)\r\n  const [nbColonnesGrille, setNbColonnesGrille] = useState(0)\r\n\r\n  const [mursH, setMursH] = useState([\r\n    [1, 1, 1, 1, 1, 1, 2, 6, 1, 1, 1, 1, 2, 5, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 2, 6, 1, 6, 2, 1, 1, 1, 5, 2, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1]\r\n  ])\r\n\r\n  const [mursV, setMursV] = useState([\r\n    [1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [5, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 2],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 5]\r\n  ])\r\n\r\n\r\n\r\n  // GET PLAY PARAMETERS \r\n  const getPlayState = async (session, equipe) => {\r\n    // console.log(\"get play state\")\r\n    if (!isLoading.current) {\r\n      isLoading.current = true\r\n      const currentPlayState = await PlayAPI.getPlayState(session, equipe)\r\n      // console.log(currentPlayState)\r\n      if (Object.keys(currentPlayState).length > 0) {\r\n        // console.log(parseInt(JSON.parse(currentPlayState.currentTour.valeur)))\r\n\r\n        setCurrentPomp(parseInt(JSON.parse(currentPlayState.currentPomp.valeur)))\r\n        setCurrentTour(parseInt(JSON.parse(currentPlayState.currentTour.valeur)))\r\n        setCurrentCycle(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)))\r\n        setCurrentSequence(parseInt(JSON.parse(currentPlayState.currentSequence.valeur)))\r\n\r\n        setMursH(JSON.parse(currentPlayState.mursH.valeur))\r\n        setMursV(JSON.parse(currentPlayState.mursV.valeur))\r\n        setCarte(JSON.parse(currentPlayState.carte.valeur))\r\n        setResultats({\r\n          Decedes: parseInt(JSON.parse(currentPlayState.resultatsDecedes.valeur)),\r\n          Sauves: parseInt(JSON.parse(currentPlayState.resultatsSauves.valeur)),\r\n        })\r\n        setPlay(JSON.parse(currentPlayState.play.valeur))\r\n        // if(parseInt(JSON.parse(currentPlayState.currentPomp.valeur))==1 && parseInt(JSON.parse(currentPlayState.currentTour.valeur))==1){\r\n        getBudget(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)), parseInt(JSON.parse(currentPlayState.currentSequence.valeur)))\r\n        //  }\r\n        const c = parseInt(JSON.parse(currentPlayState.currrentChrono.valeur))\r\n        if (configuration !== null && c <= configuration.chronoTourTact.valeur && parseInt(JSON.parse(currentPlayState.currentPomp.valeur)) == numPompier) {\r\n          if(c==0){\r\n            setChrono(configuration.chronoTourTact.valeur)\r\n          }else{\r\n            setChrono(c)\r\n          }\r\n          \r\n          // console.log(c)\r\n        } else {\r\n          setChrono(null)\r\n          // console.log(c,configuration.chronoTourTact.valeur)\r\n        }\r\n      }\r\n      getPositionFromCarte(JSON.parse(currentPlayState.carte.valeur))\r\n      isLoading.current = false\r\n    }\r\n\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    // console.log(carte)\r\n    if (carte.length > 0) {\r\n      setNbLignesGrille(carte.length)\r\n      setNbColonnesGrille(carte[0].length)\r\n      getPositionFromCarte(carte)\r\n    }\r\n\r\n  }, [carte])\r\n\r\n  // useEffect(()=>{\r\n  //   console.log(currentTour)\r\n  // },[currentTour])\r\n\r\n\r\n  useEffect(() => {\r\n    if (session != null && equipe != null && currentTour == null) {\r\n      if (!isLoading.current && configuration !== null) getPlayState(session, equipe)\r\n      getPlayParameters()\r\n      getPositionFromCarte(carte)\r\n    }\r\n  }, [session, equipe, numPompier, configuration])\r\n\r\n  const getPlayParameters = async () => {\r\n    const param = await PlayAPI.getConfiguration(session)\r\n    setConfiguration(param)\r\n  }\r\n\r\n  const getPositionFromCarte = (carte) => {\r\n    if (carte != null && carte.length > 0) {\r\n      carte.forEach((ligne, indexI) => {\r\n        ligne.forEach((valeur, indexJ) => {\r\n\r\n          if (Math.floor(valeur / 1000) == 1 && Math.floor(valeur % 1000 / 100) == numPompier) {\r\n            setPosition([indexI, indexJ])\r\n            setDeplacementEnCours({\r\n              type: 0,\r\n              rotation: valeur % 10\r\n            })\r\n          }\r\n\r\n        })\r\n      });\r\n    }\r\n  }\r\n \r\n\r\n\r\n\r\n\r\n\r\n  // const onTextChange = (e) => {\r\n  //   setNumPompier(e.target.value)\r\n  //   console.log(typeof (e.target.value))\r\n  // }\r\n\r\n  // const onXChange = (e) => {\r\n  //   e.preventDefault()\r\n  //   if (e.target.value.length > 0) {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [position[0], parseInt(e.target.value)])\r\n  //   } else {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [position[0], 0])\r\n  //   }\r\n\r\n  // }\r\n  // const onYChange = (e) => {\r\n  //   e.preventDefault()\r\n  //   if (e.target.value.length > 0) {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [parseInt(e.target.value), position[1]])\r\n  //   } else {\r\n  //     updateCarte(position, 0)\r\n  //     setPosition(position => [0, position[1]])\r\n  //   }\r\n  // }\r\n\r\n\r\n  // UPDATES\r\n  const updateCarte = (coords, value) => {\r\n    if (coords[0] < nbLignesGrille && coords[1] < nbColonnesGrille) {\r\n      try {\r\n        var c = [...carte]\r\n        c[coords[0]][coords[1]] = value\r\n        setCarte(c)\r\n      } catch (error) {\r\n        // console.log(error)\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n  const updateMurH = (coords, value) => {\r\n    if (coords[0] < mursH.length && coords[1] < mursH[0].length) {\r\n      try {\r\n        var m = [...mursH]\r\n        m[coords[0]][coords[1]] = value\r\n        setMursH(m)\r\n\r\n      } catch (error) {\r\n        // console.log(error)\r\n      }\r\n    }\r\n  }\r\n  const updateMurV = (coords, value) => {\r\n    if (coords[0] < mursV.length && coords[1] < mursV[0].length) {\r\n      try {\r\n        var m = [...mursV]\r\n        m[coords[0]][coords[1]] = value\r\n        setMursV(m)\r\n      } catch (error) {\r\n        // console.log(error)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // ACTIONS\r\n\r\n  const updateBudget = (action) => {\r\n    var depenses = 0\r\n    if (configuration[\"coutEq\" + action] != null) depenses += configuration[\"coutEq\" + action].valeur\r\n    if (configuration[\"coutInter\" + action] != null) depenses += configuration[\"coutInter\" + action].valeur\r\n\r\n    setBudget(budget => budget - depenses)\r\n    setBudgetDepense(bd => bd + depenses)\r\n  }\r\n\r\n\r\n\r\n\r\n  const addHistAction = (budget, budgetDepense) => {\r\n    // console.log(\"add hist\")\r\n    const h = [...histActions, {\r\n      carte: JSON.stringify(carte),\r\n      budget: JSON.stringify(budget),\r\n      budgetDepense: JSON.stringify(budgetDepense),\r\n      mursH: JSON.stringify(mursH),\r\n      mursV: JSON.stringify(mursV),\r\n      stocks: JSON.stringify(stocks),\r\n      resultats: JSON.stringify(resultats),\r\n      interventions: JSON.stringify(interventions),\r\n      deplacementEnCours: JSON.stringify({\r\n        type: 0,\r\n        rotation: deplacementEnCours.rotation\r\n      })\r\n    }]\r\n\r\n\r\n    setHistActions(h)\r\n  }\r\n\r\n  \r\n\r\n  const retourAction = () => {\r\n    // isLoading.current = true\r\n    var h = [...histActions]\r\n    \r\n    h.pop()\r\n    const state = h[h.length - 1]\r\n    // console.log(h)\r\n    // console.log(state)\r\n    // console.log(state.deplacementEnCours)\r\n\r\n    setCarte(JSON.parse(state.carte))\r\n    setMursH(JSON.parse(state.mursH))\r\n    setMursV(JSON.parse(state.mursV))\r\n    setStocks(JSON.parse(state.stocks))\r\n    setInterventions(JSON.parse(state.interventions))\r\n    setResultats(JSON.parse(state.resultats))\r\n    setBudget(JSON.parse(state.budget))\r\n    setBudgetDepense(JSON.parse(state.budgetDepense))\r\n\r\n    setDeplacementEnCours(JSON.parse(state.deplacementEnCours))\r\n    \r\n    setHistActions(h)\r\n\r\n    // isLoading.current = false\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (position !== null && stocks !== null && budget > 0 && deplacementEnCours.type == 0 && (histActions[histActions.length - 1] == undefined || budget < histActions[histActions.length - 1].budget)) {\r\n      addHistAction(budget, budgetDepense)\r\n    }\r\n  }, [deplacementEnCours, budgetDepense, stocks])\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"hist Actions\")\r\n  //   console.log(histActions)\r\n  // }, [histActions])\r\n\r\n  // useEffect(()=>{\r\n  //   if( position!==null && budget>0){\r\n\r\n  //     if(histActions[histActions.length-1]!==undefined && budget<histActions[histActions.length-1].budget ){\r\n\r\n  //       addHistAction(budget)\r\n  //     }\r\n  //   }\r\n  // },[budget])\r\n\r\n  const doAction = (action) => {\r\n    // console.log(action)\r\n\r\n    try {\r\n      if (Object.keys(stocks).includes(action)) {\r\n        var s = stocks\r\n        s[action] = s[action] - 1\r\n        setStocks(s)\r\n      }\r\n\r\n    } catch (error) { }\r\n\r\n    try {\r\n      if (Object.keys(interventions).includes(action)) {\r\n        var i = interventions\r\n        i[action] = i[action] - 1\r\n        setInterventions(i)\r\n      }\r\n    } catch (error) { }\r\n\r\n    // setTimeout(() => {\r\n    updateBudget(action)\r\n    // }, 1000);\r\n\r\n  }\r\n\r\n  const updateResultats = (sauve) => {\r\n    var res = { ...resultats }\r\n    if (sauve) {\r\n      res.Sauves += 1\r\n    } else {\r\n      res.Decedes += 1\r\n    }\r\n    // console.log(res)\r\n    setResultats(res)\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    setBtnClickedBottom(null)\r\n    revealHabitant()\r\n  }, [position])\r\n\r\n\r\n  useEffect(() => {\r\n    if (carte.length > 0) relacherHabitant()\r\n\r\n  }, [position, mursH, mursV])\r\n\r\n\r\n\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"Stocks\")\r\n  //   console.log(stocks)\r\n  // }, [stocks])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (configuration != null) {\r\n      var inter = {...interventions}\r\n      const interKeys = Object.keys(inter)\r\n      // console.log(Math.floor(budget / configuration[\"coutInter\" + \"Habitant\"].valeur))\r\n      interKeys.forEach(action => {\r\n        try {\r\n          if (configuration[\"coutInter\" + action].valeur > 0) {\r\n            // if(action==\"Habitant\"){\r\n            //   console.log(stocks !== null && stocks[action] != null && stocks[action] != undefined && stocks[action] != \"NaN\" ? stocks[action] : 1000)\r\n            // }\r\n            inter[action] = Math.min(\r\n              configuration[\"coutEq\" + action] != null && configuration[\"coutEq\" + action] != undefined ? Math.floor(budget / (configuration[\"coutInter\" + action].valeur + configuration[\"coutEq\" + action].valeur)) : Math.floor(budget / configuration[\"coutInter\" + action].valeur),\r\n              stocks !== null && stocks[action] != null && stocks[action] != undefined && stocks[action] != \"NaN\" ? stocks[action] : 1000\r\n            )\r\n          }\r\n        } catch (error) {\r\n          // console.log(error, action)\r\n        }\r\n\r\n      })\r\n      // console.log(inter)\r\n      setInterventions(inter)\r\n\r\n    } else {\r\n      // getPlayParameters()\r\n    }\r\n  }, [budget, configuration, numPompier, stocks])\r\n\r\n  // SOCKETS\r\n\r\n  // SOCKETS \r\n  const onTourChange = async (e) => {\r\n    e.preventDefault()\r\n    // console.log(\"nouveau tour todo\")\r\n  }\r\n\r\n  const modifyBudgetsFin = async (cycle, sequence,prochainPomp,prochainTour,prochainCycle,prochaineSequence,prochainChrono) => {\r\n    // console.log(\"budgets modified 0\")\r\n    PlayAPI.getBudgetsPompFin(session, equipe).then(\r\n      (res) => {\r\n        // console.log(res)\r\n        var budgetsFin = JSON.parse(res.valeur)\r\n\r\n        try {\r\n          budgetsFin.interventions.forEach((b, index) => {\r\n            if (b.numCycle == cycle && b.numSeq == sequence) {\r\n\r\n              budgetsFin[\"interventions\"][index][\"pomp\" + numPompier] = budget\r\n            }\r\n\r\n          })\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n        try {\r\n          budgetsFin.equipements.forEach((e, index) => {\r\n            if (e.numCycle == cycle && e.numSeq == sequence) {\r\n              budgetsFin[\"equipements\"][index][\"Feu\"][\"pomp\" + numPompier] = stocks.Feu\r\n              budgetsFin[\"equipements\"][index][\"FeuFum\"][\"pomp\" + numPompier] = stocks.FeuFum\r\n              budgetsFin[\"equipements\"][index][\"Fum\"][\"pomp\" + numPompier] = stocks.Fum\r\n              budgetsFin[\"equipements\"][index][\"Marqueur\"][\"pomp\" + numPompier] = stocks.Marqueur\r\n            }\r\n\r\n          })\r\n        } catch (error) {\r\n\r\n        }\r\n        // console.log(\"budgets modified 1\")\r\n        PlayAPI.saveBudgetsPompFin(budgetsFin, session, equipe).then(() => {\r\n          const newCarte = evenementsAleatoire()\r\n           PlayAPI.nouveauTour(socket, prochainPomp, newCarte, mursH, mursV, prochaineSequence, prochainCycle, prochainTour, resultats.Decedes, resultats.Sauves, session, equipe,prochainChrono )\r\n          // return budgetsFin\r\n        }\r\n\r\n\r\n        )\r\n      })\r\n\r\n  }\r\n\r\n  const getBudget = async (cycle, sequence) => {\r\n    var nouveauBudget = await PlayAPI.getBudgetsPompFin(session, equipe)\r\n    nouveauBudget = nouveauBudget.valeur\r\n    // console.log(nouveauBudget)\r\n    nouveauBudget = JSON.parse(nouveauBudget)\r\n\r\n    let budgetInter = 0\r\n    let stocksEq = stocks !== null && stocks !== undefined ? { ...stocks } : { Feu: 0, FeuFum: 0, Fum: 0, Marqueur: 0 }\r\n\r\n    try {\r\n      nouveauBudget.interventions.forEach((b) => {\r\n        if (b.numCycle == cycle && b.numSeq == sequence) {\r\n\r\n          budgetInter = b[\"pomp\" + numPompier]\r\n        }\r\n\r\n      })\r\n    } catch (error) {\r\n\r\n    }\r\n\r\n    try {\r\n      nouveauBudget.equipements.forEach((e) => {\r\n        if (e.numCycle == cycle && e.numSeq == sequence) {\r\n          stocksEq.Feu += e.Feu[\"pomp\" + numPompier]\r\n          stocksEq.FeuFum += e.FeuFum[\"pomp\" + numPompier]\r\n          stocksEq.Fum += e.Fum[\"pomp\" + numPompier]\r\n          stocksEq.Marqueur += e.Marqueur[\"pomp\" + numPompier]\r\n        }\r\n\r\n      })\r\n    } catch (error) {\r\n\r\n    }\r\n\r\n    // console.log(nouveauBudget)\r\n    if (budgetInter !== budget) {\r\n      setBudget(budgetInter)\r\n      setBudgetDepense(0)\r\n\r\n    }\r\n    setStocks(stocksEq)\r\n\r\n\r\n  }\r\n\r\n  \r\n  // console.log(socket)\r\n  useEffect(() => {\r\n    if (socket === null && configuration !== null) {\r\n      const s = io(\"https://www.back.leaders-extreme.fr\")\r\n      \r\n      // console.log(\"test\")\r\n      s.emit(\"connecti\",JSON.stringify({\r\n        session:session,\r\n        equipe:equipe\r\n      }))\r\n\r\n      s.on('changementTour', (data) => {\r\n        // console.log(\"changement tour\")\r\n        const d =data\r\n        console.log(d)\r\n        if (currentPomp != d.currentPomp || currentCycle !== d.currentCycle || currentTour !== d.currentTour || currentSequence !== d.currentSequence) {\r\n          console.log(\"changement tour\")\r\n          getPlayState(session, equipe)\r\n        }\r\n      })\r\n\r\n\r\n      // s.on('revealHabitant', (data) => {\r\n      //   if (carte !== null && carte.length > 0) {\r\n      //     // console.log(carte[data.y][data.x])\r\n      //     console.log(carte[data.y])\r\n      //     if (carte[data.y][data.x] == 20) {\r\n      //       // console.log([data.y,data.x])\r\n      //       updateCarte([data.y, data.x], data.type)\r\n      //       // console.log(\"socket hab\")\r\n      //       // console.log(data)\r\n      //     }\r\n      //   }\r\n      // })\r\n\r\n      s.on('startStopPartie', (data) => {\r\n        setPlay(data.start)\r\n      });\r\n      s.on('disconnectUsers', (data) => {\r\n        setPlay(false)\r\n        handleDisconnect()\r\n      });\r\n      setSocket(s)\r\n    }\r\n\r\n\r\n\r\n  }, [socket, configuration]);\r\n\r\n\r\n\r\n  // TESTS\r\n\r\n  const test = async () => {\r\n\r\n    // console.log(\"test function\")\r\n\r\n  }\r\n\r\n// useEffect(()=>{\r\n//   console.log(interventions,budget)\r\n// },[interventions,budget])\r\n\r\n\r\n  // AUTORISATIONS \r\n  const deplacementAutorise = (deplacement) => {\r\n    // return true\r\n    var dpl = [...deplacement]\r\n    if (dpl[0] == 0 && dpl[1] == 0) return false\r\n    if (position[0] + dpl[0] > carte.length - 1 || position[1] + dpl[1] > carte[0].length - 1 || position[0] + dpl[0] < 0 || position[1] + dpl[1] < 0) return false\r\n\r\n\r\n    const dplInterditsCases = [1000, 20, 3, 4]\r\n\r\n    try {\r\n      const valeurCaseDeplacement = carte[position[0] + dpl[0]][position[1] + dpl[1]]\r\n      if (Math.floor(valeurCaseDeplacement / 1000) == 1) return false\r\n      if (Math.floor(valeurCaseDeplacement / 10) == 2) return false\r\n      if (dplInterditsCases.includes(valeurCaseDeplacement)) return false\r\n    } catch (error) { }\r\n\r\n    const dplInterditsMurs = [1, 2, 3, 5]\r\n    try {\r\n      if (dpl[0] != 0) { // haut bas\r\n        if (dpl[0] < 0) {\r\n          dpl[0] = 0\r\n        }\r\n        if (typeof (mursH[position[0] + dpl[0]][position[1]]) === 'undefined') return false\r\n        if (dplInterditsMurs.includes(mursH[position[0] + dpl[0]][position[1]])) return false\r\n      } else { // gauche droite\r\n        if (dpl[1] < 0) {\r\n          dpl[1] = 0\r\n        }\r\n        if (typeof (mursV[position[0]][position[1] + dpl[1]]) === 'undefined') return false\r\n        if (dplInterditsMurs.includes(mursV[position[0]][position[1] + dpl[1]])) return false\r\n      }\r\n    } catch (error) { }\r\n\r\n\r\n\r\n\r\n    return true\r\n  }\r\n  const testRelacherHabitant = () => {\r\n    if (carte[position[0]][position[1]] % 100 < 10) return false // pas de transport d'habitant\r\n\r\n    const mursBloquants = [1, 2, 3, 5]\r\n\r\n    if (position[0] == 0 && !mursBloquants.includes(mursH[position[0]][position[1]])) return true // haut\r\n    if (position[0] == nbLignesGrille - 1 && !mursBloquants.includes(mursH[position[0] + 1][position[1]])) return true // bas\r\n\r\n    if (position[1] == 0 && !mursBloquants.includes(mursV[position[0]][position[1]])) return true // gauche\r\n    if (position[1] == nbColonnesGrille - 1 && !mursBloquants.includes(mursV[position[0]][position[1] + 1])) return true // droite\r\n\r\n    return false\r\n  }\r\n  const relacherHabitant = () => {\r\n    if (testRelacherHabitant()) {\r\n      setTimeout(() => {\r\n        updateResultats(true)\r\n        updateCarte(position, carte[position[0]][position[1]] - (carte[position[0]][position[1]] % 100 - carte[position[0]][position[1]] % 10))\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  const revealHabitant = async () => {\r\n\r\n    if (configuration != null) {\r\n      const casesAutour = getCasesAutour()\r\n\r\n      try {\r\n        if (casesAutour.dessus == 20) {\r\n          updateCarte([position[0] - 1, position[1]], 0)\r\n          resetHistAction()\r\n          // const response = await PlayAPI.revealHabitant(socket, [position[0] - 1, position[1]], 0)\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (casesAutour.droite == 20) {\r\n          updateCarte([position[0], position[1] + 1], 0)\r\n          resetHistAction()\r\n          // const response = await PlayAPI.revealHabitant(socket, [position[0], position[1] + 1], 0)\r\n\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (casesAutour.dessous == 20) {\r\n          updateCarte([position[0] + 1, position[1]], 0)\r\n          resetHistAction()\r\n          // const response = await PlayAPI.revealHabitant(socket, [position[0] + 1, position[1]], 0)\r\n\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (casesAutour.gauche == 20) {\r\n          updateCarte([position[0], position[1] - 1], 0)\r\n          resetHistAction()\r\n          // const response = await PlayAPI.revealHabitant(socket, [position[0], position[1] - 1], 0)\r\n\r\n        }\r\n      } catch (error) { }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  const getCasesAutour = () => {\r\n    var cases = {}\r\n\r\n    try {\r\n      cases[\"dessus\"] = (carte[position[0] - 1][position[1]]) // dessus\r\n    } catch (error) { }\r\n    try {\r\n      cases[\"droite\"] = (carte[position[0]][position[1] + 1]) // droite\r\n    } catch (error) { }\r\n    try {\r\n      cases[\"dessous\"] = (carte[position[0] + 1][position[1]]) // dessous\r\n    } catch (error) { }\r\n    try {\r\n      cases[\"gauche\"] = (carte[position[0]][position[1] - 1]) // gauche\r\n    } catch (error) { }\r\n    return cases\r\n  }\r\n  const getMursAutour = (position) => {\r\n    var murs = []\r\n\r\n    try {\r\n      if (mursH[position[0]][position[1]] != 4 || (mursH[position[0]][position[1] - 1] < 6 && mursH[position[0]][position[1] + 1] < 6)) {\r\n        murs.push(mursH[position[0]][position[1]]) // dessus\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n    } catch (error) { }\r\n\r\n    try {\r\n      if (mursV[position[0]][position[1] + 1] != 4 || (mursV[position[0] - 1][position[1] + 1] < 6 && mursV[position[0] + 1][position[1] + 1] < 6)) {\r\n        murs.push(mursV[position[0]][position[1] + 1])  // droite\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n    } catch (error) { }\r\n\r\n    try {\r\n      if (mursH[position[0] + 1][position[1]] != 4 || (mursH[position[0] + 1][position[1] - 1] < 6 && mursH[position[0] + 1][position[1] + 1] < 6)) {\r\n        murs.push(mursH[position[0] + 1][position[1]]) // dessous\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n\r\n    } catch (error) { }\r\n    try {\r\n      if (mursV[position[0]][position[1]] != 4 || (mursV[position[0] - 1][position[1]] < 6 && mursV[position[0] + 1][position[1]] < 6)) {\r\n        murs.push(mursV[position[0]][position[1]])  // gauche\r\n      } else {\r\n        murs.push(0)\r\n      }\r\n    } catch (error) { }\r\n    // console.log(murs)\r\n    return murs\r\n  }\r\n\r\n  // useEffect(()=>{\r\n  //   console.log(histActions)\r\n  // },[histActions])\r\n\r\n  const resetHistAction = () => {\r\n    // console.log(\"reset actions\")\r\n    setTimeout(() => {\r\n      setHistActions([{\r\n        carte: JSON.stringify(carte),\r\n        budget: JSON.stringify(budget),\r\n        budgetDepense: JSON.stringify(budgetDepense),\r\n        mursH: JSON.stringify(mursH),\r\n        mursV: JSON.stringify(mursV),\r\n        stocks: JSON.stringify(stocks),\r\n        resultats: JSON.stringify(resultats),\r\n        interventions: JSON.stringify(interventions),\r\n        deplacementEnCours: JSON.stringify({\r\n          type: 0,\r\n          rotation: deplacementEnCours.rotation\r\n        })\r\n      }])\r\n    }, 300);\r\n  }\r\n\r\n\r\n  const [btnClickedBottom, setBtnClickedBottom] = useState(null)\r\n  const [propositionsCase, setPropositionsCase] = useState([]) // Extincteurs\r\n  const [propositionMursDetruire, setPropositionMursDetruire] = useState([[], []]) // Horizontaux  , Verticaux\r\n  useEffect(() => {\r\n    if (btnClickedBottom != 3 || btnClickedBottom == null) {\r\n      setPropositionMursDetruire([[], []])\r\n    }\r\n    if ((btnClickedBottom > 2 && btnClickedBottom < 6) || btnClickedBottom == null) {\r\n      setPropositionsCase([])\r\n    }\r\n  }, [btnClickedBottom])\r\n\r\n\r\n\r\n\r\n  // HANDLERS CLIC GRILLE\r\n\r\n  const handleClicCase = (valeurAvant, valeurApres, coordX, coordY) => {\r\n    try {\r\n      updateCarte([coordY, coordX], valeurApres)\r\n      setPropositionsCase([])\r\n      setBtnClickedBottom(null)\r\n\r\n      if (valeurAvant == 4 && valeurApres == 0) { // Extincteur flamme\r\n        doAction(\"Feu\")\r\n      }\r\n      if (valeurAvant == 4 && valeurApres == 3) { // Feu Fumée\r\n        doAction(\"FeuFum\")\r\n      }\r\n      if (valeurAvant == 3 && valeurApres == 0) { // Fumée\r\n        doAction(\"Fum\")\r\n      }\r\n      if (Math.floor(valeurAvant / 10) == 2 && valeurApres == 0) { // Habitant\r\n        doAction(\"Habitant\")\r\n        // console.log(carte[position[0]][position[1]] + (valeurAvant % 10)*10)\r\n        updateCarte(position, carte[position[0]][position[1]] + (valeurAvant % 10)*10)\r\n      }\r\n    } catch (error) { }\r\n  }\r\n\r\n  const handleClicMur = (num, valeurAvant, coordX, coordY) => { // marqueur dégat\r\n    if (propositionMursDetruire[0].length > 0 || propositionMursDetruire[1].length > 0) {\r\n\r\n      const checkInCoords = (index) => {\r\n        // console.log(\"coordx\",coordX,\"coordy\",coordY,\"position\",position)\r\n\r\n        let numClic = null\r\n\r\n        if (coordX == position[1] && (coordY < position[0] || (coordY == position[0] && num == 0))) { // top\r\n          numClic = 0  // case en question\r\n          // console.log(\"top\",numClic)\r\n        }\r\n        if (coordX == position[1] && (coordY > position[0] || (coordY == position[0] && num == 2))) { // bottom\r\n          numClic = 2  // case en question\r\n          // console.log(\"bottom\",numClic)\r\n        }\r\n        if (coordY == position[0] && (coordX < position[1] || (coordX == position[1] && num == 3))) { // left\r\n          numClic = 3  // case en question\r\n          // console.log(\"left\",numClic)\r\n        }\r\n        if (coordY == position[0] && (coordX > position[1] || (coordX == position[1] && num == 1))) { // right\r\n          numClic = 1  // case en question\r\n          // console.log(\"right\",numClic)\r\n        }\r\n\r\n        return numClic\r\n      }\r\n\r\n      var cote = checkInCoords(num % 2)\r\n      let valeurApres = 4\r\n      if (valeurAvant == 1) valeurApres = 3\r\n\r\n      if (cote != null) {\r\n        try {\r\n          switch (cote) {\r\n            case 0:\r\n              updateMurH([position[0], position[1]], valeurApres)\r\n              // if(valeurAvant==5 ||)\r\n              break;\r\n            case 1:\r\n              updateMurV([position[0], position[1] + 1], valeurApres)\r\n              break;\r\n            case 2:\r\n              updateMurH([position[0] + 1, position[1]], valeurApres)\r\n              break;\r\n            case 3:\r\n              updateMurV([position[0], position[1]], valeurApres)\r\n              break;\r\n          }\r\n\r\n          doAction(\"Marqueur\")\r\n\r\n\r\n        } catch (error) {\r\n        }\r\n\r\n\r\n\r\n        setPropositionMursDetruire([[], []])\r\n        setBtnClickedBottom(null)\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  // HANDLER CLICS BOUTONS\r\n\r\n  const handleClicFleche = (num) => {\r\n    // Position y x\r\n    let deplacement\r\n    let rotation\r\n    switch (num) {\r\n      case 0: // haut\r\n        // console.log(\"haut\")\r\n        deplacement = [-1, 0]\r\n        rotation = 1\r\n        break;\r\n\r\n      case 1: // droite\r\n        // console.log(\"droite\")\r\n        deplacement = [0, 1]\r\n        rotation = 2\r\n        break;\r\n\r\n      case 2: // bas\r\n        // console.log(\"bas\")\r\n        deplacement = [1, 0]\r\n        rotation = 3\r\n        break;\r\n\r\n      case 3: // gauche\r\n        // console.log(\"gauche\")\r\n        deplacement = [0, -1]\r\n        rotation = 4\r\n        break;\r\n    }\r\n    if (deplacementAutorise(deplacement)) {\r\n\r\n      // ANIMATION MARCHE\r\n\r\n      setDeplacementEnCours({\r\n        type: 1,\r\n        rotation: rotation\r\n      })\r\n      setTimeout(() => {\r\n        updateCarte([position[0] + deplacement[0], position[1] + deplacement[1]], carte[position[0]][position[1]] - carte[position[0]][position[1]] % 10 + rotation)\r\n        // setPosition(position => [position[0] + deplacement[0], position[1] + deplacement[1]])\r\n        if((carte[position[0]][position[1]]%100 - carte[position[0]][position[1]]%10)/10>0){\r\n          doAction(\"DeplacementHab\")\r\n        }else{\r\n          doAction(\"Deplacement\")\r\n        }\r\n        \r\n        updateCarte(position, 0)\r\n\r\n\r\n        setDeplacementEnCours({\r\n          type: 2,\r\n          rotation: rotation\r\n        })\r\n        setTimeout(() => {\r\n          setDeplacementEnCours({\r\n            type: 0,\r\n            rotation: rotation\r\n          })\r\n        }, 500);\r\n\r\n      }, 500);\r\n\r\n\r\n    }\r\n  }\r\n\r\n  const handleChangePiece = () => {\r\n    resetHistAction()\r\n  }\r\n\r\n  const handleClicDoor = (ouvrir) => { // position, ouvert/fermé\r\n    setBtnClickedBottom(ouvrir ? 4 : 5)\r\n    let valueAvant\r\n    let valueApres\r\n\r\n    if (ouvrir) {\r\n      valueAvant = 5\r\n      valueApres = 6\r\n\r\n    } else {\r\n      valueAvant = 6\r\n      valueApres = 5\r\n    }\r\n    doAction(\"Porte\")\r\n    try {\r\n      if (mursH[position[0]][position[1]] == valueAvant) updateMurH([position[0], position[1]], valueApres)\r\n      if (mursH[position[0] + 1][position[1]] == valueAvant) updateMurH([position[0] + 1, position[1]], valueApres)\r\n      if (mursV[position[0]][position[1]] == valueAvant) updateMurV([position[0], position[1]], valueApres)\r\n      if (mursV[position[0]][position[1] + 1] == valueAvant) updateMurV([position[0], position[1] + 1], valueApres)\r\n    } catch (error) {\r\n\r\n    }\r\n  }\r\n\r\n  const handleClicExtincteur = (num) => {\r\n    // 0 FEU, 1 FEUFUM, 2 FUM\r\n    const mursInterdits= [1,2,3,5]\r\n    const mursAutour = getMursAutour(position)\r\n\r\n    if (btnClickedBottom != num) {\r\n      var listeCasesAction = []\r\n      let valeurAvant = 4\r\n      let valeurApres = 0\r\n      setBtnClickedBottom(num)\r\n      switch (num) {\r\n        case 0: // ETEINDRE FEU\r\n          break;\r\n\r\n        case 1: // FEU FUM\r\n          valeurApres = 3\r\n          break;\r\n        case 2: // ETEINDRE FUMEE\r\n          valeurAvant = 3\r\n          break;\r\n      }\r\n\r\n      try {\r\n        if (carte[position[0] - 1][position[1]] == valeurAvant && !mursInterdits.includes(mursAutour[0])) {\r\n          listeCasesAction.push([position[0] - 1, position[1], valeurAvant, valeurApres]) // TOP\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (carte[position[0]][position[1] + 1] == valeurAvant && !mursInterdits.includes(mursAutour[1])) {\r\n          listeCasesAction.push([position[0], position[1] + 1, valeurAvant, valeurApres]) // RIGHT\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (carte[position[0] + 1][position[1]] == valeurAvant && !mursInterdits.includes(mursAutour[2] )){ \r\n          listeCasesAction.push([position[0] + 1, position[1], valeurAvant, valeurApres]) // BOTTOM\r\n        }\r\n      } catch (error) { }\r\n      try {\r\n        if (carte[position[0]][position[1] - 1] == valeurAvant && !mursInterdits.includes(mursAutour[3])) {\r\n          listeCasesAction.push([position[0], position[1] - 1, valeurAvant, valeurApres]) // LEFT\r\n          console.log(\"test\")\r\n        }\r\n      } catch (error) { }\r\n\r\n      setPropositionsCase(listeCasesAction)\r\n    } else {\r\n      setBtnClickedBottom(null)\r\n    }\r\n\r\n  }\r\n\r\n  const handleClicMarqueur = () => {\r\n    if (btnClickedBottom != 3) {\r\n      setBtnClickedBottom(3)\r\n      if (propositionMursDetruire[0].length > 0 || propositionMursDetruire[1].length > 0) {\r\n        setPropositionMursDetruire([[], []])\r\n      } else {\r\n        const mursADetruire = [1, 3, 5, 6]\r\n        var propositions = [\r\n          [],\r\n          []\r\n        ]\r\n        const mursAutour = getMursAutour(position)\r\n\r\n        try {\r\n          if (mursADetruire.includes(mursAutour[0])) propositions[0].push([position[1], position[0]]) // top\r\n          if (mursADetruire.includes(mursAutour[1])) propositions[1].push([position[1] + 1, position[0]]) // right\r\n          if (mursADetruire.includes(mursAutour[2])) propositions[0].push([position[1], position[0] + 1]) // bottom\r\n          if (mursADetruire.includes(mursAutour[3])) propositions[1].push([position[1], position[0]]) // left\r\n\r\n        } catch (error) {\r\n\r\n        }\r\n        setPropositionMursDetruire(propositions)\r\n\r\n      }\r\n    } else {\r\n      setBtnClickedBottom(null)\r\n    }\r\n\r\n\r\n  }\r\n\r\n  const handleClicValidated = async (bool) => {\r\n    // console.log(\"handle Clic\")\r\n    if (configuration != null) {\r\n      if (bool) {\r\n\r\n\r\n        let prochainPomp = currentPomp + 1\r\n        let prochainTour = currentTour\r\n        let prochainCycle = currentCycle\r\n        let prochaineSequence = currentSequence\r\n        let prochainChrono = configuration.chronoTourTact.valeur\r\n\r\n\r\n        if (numPompier == configuration.nbPompEquipe.valeur) { // DERNIER POMP DU TOUR\r\n          if (currentTour == configuration.nbToursParCycle.valeur) { // SEND TO INTER\r\n            prochainTour = 1\r\n            prochainPomp = 0 // A CHANGER AVEC STRATEGIQUE\r\n\r\n            prochainChrono = configuration.chronoTourInter.valeur\r\n\r\n            if (prochainCycle == configuration.nbCyclesParSequence.valeur) {\r\n              prochainCycle = 1\r\n              prochaineSequence = prochaineSequence + 1\r\n            } else {\r\n              prochainCycle = prochainCycle + 1\r\n            }\r\n\r\n\r\n\r\n          } else { // PAS DERNIER TOUR DU CYCLE\r\n            // console.log(\"pas dernier tour\")\r\n            prochainPomp = 1\r\n            prochainTour = prochainTour + 1\r\n            // prochainChrono = configuration.chronoTourTact.valeur\r\n\r\n          }\r\n\r\n        }\r\n\r\n        // console.log(prochainPomp,prochainTour,prochainCycle)\r\n\r\n\r\n        \r\n        // console.log(\"budgets fin 1\")\r\n        const res = modifyBudgetsFin(currentCycle, currentSequence,prochainPomp,prochainTour,prochainCycle,prochaineSequence,prochainChrono)\r\n        \r\n        resetHistAction()\r\n\r\n        // setChrono(null)\r\n      } else {\r\n        retourAction()\r\n        // console.log(\"retour\")\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const handleNoClicked = () => {\r\n    setPropositionMursDetruire([[], []])\r\n    setPropositionsCase([])\r\n  }\r\n\r\n  const handleClicHabitant = () => {\r\n    if (btnClickedBottom != 6) {\r\n      setBtnClickedBottom(6)\r\n      const valeurApres = 0\r\n      var listeCasesAction = []\r\n      try {\r\n        const valeurDessus = carte[position[0] - 1][position[1]]\r\n        if (Math.floor(valeurDessus / 10) == 2) listeCasesAction.push([position[0] - 1, position[1], valeurDessus, valeurApres]) // TOP\r\n      } catch (error) { }\r\n      try {\r\n        const valeurDroite = carte[position[0]][position[1] + 1]\r\n        if (Math.floor(valeurDroite / 10) == 2) listeCasesAction.push([position[0], position[1] + 1, valeurDroite, valeurApres]) // RIGHT\r\n      } catch (error) { }\r\n      try {\r\n        const valeurDessous = carte[position[0] + 1][position[1]]\r\n        if (Math.floor(valeurDessous / 10) == 2) listeCasesAction.push([position[0] + 1, position[1], valeurDessous, valeurApres]) // BOTTOM\r\n      } catch (error) { }\r\n      try {\r\n        const valeurGauche = carte[position[0]][position[1] - 1]\r\n        if (Math.floor(valeurGauche / 10) == 2) listeCasesAction.push([position[0], position[1] - 1, valeurGauche, valeurApres]) // LEFT\r\n      } catch (error) { }\r\n\r\n      setPropositionsCase(listeCasesAction)\r\n\r\n\r\n      // console.log(\"handle clic habitant\")\r\n    } else {\r\n      setBtnClickedBottom(null)\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  const getRandomCoords = (mini, maxi) => {\r\n    if (carte !== null && carte !== undefined && carte.length > 0) {\r\n      var y = Math.floor(Math.random() * (maxi[0] - mini[0])) + mini[0]\r\n      var x = Math.floor(Math.random() * (maxi[1] - mini[1])) + mini[1]\r\n\r\n      var type = carte[y][x]\r\n      while (Math.floor(type / 1000) == 1 || Math.floor(type / 10) == 2) {\r\n        y = Math.floor(Math.random() * (maxi[0] - mini[0])) + mini[0]\r\n        x = Math.floor(Math.random() * (maxi[1] - mini[1])) + mini[1]\r\n        type = carte[y][x]\r\n      }\r\n      // console.log(\"getRandomCoords\", y, x)\r\n      return [y, x]\r\n    }\r\n    return null\r\n  }\r\n\r\n\r\n\r\n  const handleMortHab=()=>{\r\n    var r = {...resultats}\r\n    r.Decedes=r.Decedes+1\r\n    setResultats(r)\r\n    // console.log(\"mort d'un habitant\")\r\n    \r\n  }\r\n\r\n\r\n  const handleExplosion=(randomPos,c)=>{\r\n    const mursAutour = getMursAutour(randomPos)\r\n    // console.log(mursAutour)\r\n\r\n    // MARQUEURS SUR LA CASE QUI EXPLOSE\r\n    mursAutour.forEach((val,index)=>{\r\n      var valeurFin =val\r\n      if([3,5].includes(val)) valeurFin = 4 // DESTRUCTION TOTALE\r\n      if(valeurFin==1) valeurFin=3\r\n\r\n\r\n\r\n      if(valeurFin==3 || valeurFin==4){\r\n        switch (index) {\r\n          case 0:\r\n            try {\r\n              updateMurH([randomPos[0], randomPos[1]], valeurFin)\r\n            }catch{}\r\n            break;\r\n          case 1:\r\n            try {\r\n              updateMurV([randomPos[0], randomPos[1] + 1], valeurFin)\r\n            }catch{}\r\n            \r\n            break;\r\n          case 2:\r\n            try {\r\n              updateMurH([randomPos[0] + 1, randomPos[1]], valeurFin)\r\n            }catch{}\r\n           \r\n            break;\r\n          case 3:\r\n            try {\r\n              updateMurV([randomPos[0], randomPos[1]], valeurFin)\r\n            }catch{}\r\n            \r\n            break;\r\n        }\r\n      \r\n      }\r\n    })\r\n\r\n    // PROPAGATION DANS LES DIFFERENTES DIRECTIONS\r\n\r\n    const mursInterdits= [1,2,3,5]\r\n    if(randomPos[1]<nbColonnesGrille-1 && c[randomPos[0]][randomPos[1]+1]==4){ // Propagation droite\r\n      // console.log(\"propa droite\")\r\n      let j=1\r\n      while(randomPos[1]+1+j<nbColonnesGrille){\r\n        \r\n        const type = c[randomPos[0]][randomPos[1]+1+j]\r\n        if(Math.floor( type/ 10)==2){\r\n          c[randomPos[0]][randomPos[1]+1+j]=4\r\n          handleMortHab()\r\n        }\r\n\r\n        if(Math.floor(type / 1000) == 1){\r\n          if (type % 100 < 10){\r\n            c[randomPos[0]][randomPos[1]+1+j]=type - (type % 100 - type % 10)\r\n            handleMortHab()\r\n          }else{\r\n            // console.log(\"mort d'un pompier solo\")\r\n          }\r\n        } \r\n\r\n\r\n        if(c[randomPos[0]][randomPos[1]+1+j]==3 || c[randomPos[0]][randomPos[1]+1+j] ==0) {\r\n          c[randomPos[0]][randomPos[1]+1+j]=4\r\n          break\r\n        }\r\n        const mur = getMursAutour([randomPos[0],randomPos[1]+1+j])[1]\r\n        if(mursInterdits.includes(mur)) {\r\n            try {\r\n              updateMurV([randomPos[0], randomPos[1] + 2 +j], 4)\r\n              break\r\n            }catch{}\r\n          \r\n        }\r\n        j+=1\r\n        \r\n      }\r\n    }\r\n    if(randomPos[1]>0 && c[randomPos[0]][randomPos[1]-1]==4){ // Propagation gauche\r\n      // console.log(\"propa gauche\")\r\n      let j=1\r\n      while(randomPos[1]-1-j>=0){\r\n        \r\n        const type = c[randomPos[0]][randomPos[1]-1-j]\r\n        if(Math.floor( type/ 10)==2){\r\n          c[randomPos[0]][randomPos[1]-1-j]=4\r\n          handleMortHab()\r\n        }\r\n\r\n        if(Math.floor(type / 1000) == 1){\r\n          if (type % 100 < 10){\r\n            c[randomPos[0]][randomPos[1]-1-j]=type - (type % 100 - type % 10)\r\n            handleMortHab()\r\n          }else{\r\n            // console.log(\"mort d'un pompier solo\")\r\n          }\r\n        } \r\n\r\n\r\n        if(c[randomPos[0]][randomPos[1]-1-j]==3 || c[randomPos[0]][randomPos[1]-1-j] ==0) {\r\n          c[randomPos[0]][randomPos[1]-1-j]=4\r\n          // console.log(\"break type\",randomPos[1]-1-j)\r\n          break\r\n        }\r\n        const mur = getMursAutour([randomPos[0],randomPos[1]-1-j])[3]\r\n        // console.log(murs)\r\n        if(mursInterdits.includes(mur)) {\r\n            try {\r\n              updateMurV([randomPos[0], randomPos[1]-j-1], 4)\r\n              break\r\n            }catch{}\r\n          \r\n        }\r\n        j-=1\r\n        \r\n      }\r\n    }\r\n    if(randomPos[0]>0 && c[randomPos[0]-1][randomPos[1]]==4){ // Propagation haut\r\n      // console.log(\"propa haut\")\r\n      let i=1\r\n      while(randomPos[0]-1-i>=0){\r\n        \r\n        const type = c[randomPos[0]-1-i][randomPos[1]]\r\n        if(Math.floor( type/ 10)==2){\r\n          c[randomPos[0]-1-i][randomPos[1]]=4\r\n          handleMortHab()\r\n        }\r\n\r\n        if(Math.floor(type / 1000) == 1){\r\n          if (type % 100 < 10){\r\n            c[randomPos[0]-1-i][randomPos[1]]=type - (type % 100 - type % 10)\r\n            handleMortHab()\r\n          }else{\r\n            // console.log(\"mort d'un pompier solo\")\r\n          }\r\n        } \r\n\r\n\r\n        if(c[randomPos[0]-1-i][randomPos[1]]==3 || c[randomPos[0]-1-i][randomPos[1]] ==0) {\r\n          c[randomPos[0]-1-i][randomPos[1]]=4\r\n          // console.log(\"break type\",randomPos[1]-1-j)\r\n          break\r\n        }\r\n        const mur = getMursAutour([randomPos[0]-1-i,randomPos[1]])[0]\r\n        // console.log(murs)\r\n        if(mursInterdits.includes(mur)) {\r\n            try {\r\n              updateMurH([randomPos[0]-1-i,randomPos[1]], 4)\r\n              break\r\n            }catch{}\r\n          \r\n        }\r\n        i-=1\r\n        \r\n      }\r\n    }\r\n\r\n    if(randomPos[0]<nbLignesGrille-1 && c[randomPos[0]+1][randomPos[1]]==4){ // Propagation bas\r\n      // console.log(\"propa bas\")\r\n      let i=0\r\n      while(randomPos[0]+1+i>=0){\r\n        \r\n        const type = c[randomPos[0]+1+i][randomPos[1]]\r\n        if(Math.floor( type/ 10)==2){\r\n          c[randomPos[0]+1+i][randomPos[1]]=4\r\n          handleMortHab()\r\n        }\r\n\r\n        if(Math.floor(type / 1000) == 1){\r\n          if (type % 100 < 10){\r\n            c[randomPos[0]+1+i][randomPos[1]]=type - (type % 100 - type % 10)\r\n            handleMortHab()\r\n          }else{\r\n            // console.log(\"mort d'un pompier solo\")\r\n          }\r\n        } \r\n\r\n\r\n        if(c[randomPos[0]+1+i][randomPos[1]]==3 || c[randomPos[0]+1+i][randomPos[1]] ==0) {\r\n          c[randomPos[0]+1+i][randomPos[1]]=4\r\n          // console.log(\"break type\")\r\n\r\n          break\r\n        }\r\n        const mur = getMursAutour([randomPos[0]+1+i,randomPos[1]])[2]\r\n        if(mursInterdits.includes(mur)) {\r\n            try {\r\n              updateMurH([randomPos[0]+2+i,randomPos[1]], 4)\r\n              break\r\n            }catch{}\r\n          \r\n        }\r\n        i+=1\r\n        \r\n      }\r\n    }\r\n    return c\r\n\r\n  }\r\n\r\n  const addFumToCarte = (randomPos) => {\r\n\r\n    var c = [...carte]\r\n    if (carte !== null && carte !== undefined && carte.length > 0 && randomPos !== null) {\r\n      // console.log(\"addFumToCarte\", randomPos[0], randomPos[1])\r\n\r\n      switch (c[randomPos[0]][randomPos[1]]) {\r\n        case 0: // VIDE\r\n        // console.log(\"vide => fum\")\r\n          c[randomPos[0]][randomPos[1]] = 3\r\n          break;\r\n\r\n        case 3: // FUMEE\r\n        // console.log(\"fum => feu\")\r\n          c[randomPos[0]][randomPos[1]] = 4\r\n          break;\r\n\r\n        case 4: // FEU\r\n\r\n          c=handleExplosion(randomPos,c)\r\n\r\n          // console.log(\"feu => explosion\")\r\n          break;\r\n\r\n        default:\r\n          // console.log(\"error\")\r\n          break;\r\n      }\r\n    }\r\n    return c\r\n  }\r\n\r\n\r\n  const embrasementFum = (c) => {\r\n    var modified = false\r\n    if (c !== null && c !== undefined && c.length > 0) {\r\n      const mursInterdits = [1, 2, 3, 5]\r\n      var i = -1\r\n      var j = -1\r\n      \r\n      while (i < nbLignesGrille - 1 ) {\r\n        i = i + 1\r\n        while (j < nbColonnesGrille - 1 ) {\r\n          j = j + 1\r\n          const mursCote = [mursH[i][j], mursV[i][j + 1], mursH[i + 1][j], mursV[i][j]]\r\n\r\n          if (i < c.length && j < c[0].length && c[i][j] == 4) { // ON PARCOURT LES FEUX\r\n            if (i > 0 && c[i - 1][j] == 3 && !mursInterdits.includes(mursCote[0])) {// juste dessus\r\n              c[i - 1][j] = 4\r\n              modified = true\r\n            }\r\n            if (j < nbColonnesGrille - 1 && c[i][j + 1] == 3 && !mursInterdits.includes(mursCote[1])) { // juste droite\r\n              c[i][j + 1] = 4\r\n              modified = true\r\n            }\r\n            if (i < nbLignesGrille - 1 && c[i + 1][j] == 3 && !mursInterdits.includes(mursCote[2])) { // juste dessous\r\n              c[i + 1][j] = 4\r\n              modified = true\r\n            }else{\r\n              \r\n            }\r\n            if (j > 0 && c[i][j - 1] == 3 && !mursInterdits.includes(mursCote[3])) { // GAUCHE\r\n              c[i][j - 1] = 4 \r\n              modified = true\r\n            }\r\n            \r\n          }\r\n        }\r\n        j = -1\r\n      }\r\n\r\n      if(modified){\r\n          embrasementFum(c)\r\n        \r\n        modified = false\r\n      }\r\n\r\n\r\n\r\n\r\n      // console.log(mursCote)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      \r\n    }else{\r\n      // console.log(\"test\")\r\n    }\r\n    // console.log(\"embrasementFum\")\r\n    return c\r\n  }\r\n  const countHab = (carte) => {\r\n    if (carte != null && carte.length > 0) {\r\n      var count = 0\r\n      carte.forEach((ligne, indexI) => {\r\n        ligne.forEach((valeur, indexJ) => {\r\n\r\n          if (Math.floor(valeur / 10) == 2) {\r\n            count+=1\r\n          }\r\n\r\n        })\r\n      });\r\n      return count\r\n    }\r\n   \r\n  }\r\n\r\n  const addHabitants=(c)=>{\r\n    const count = countHab(c)\r\n    // console.log(count)\r\n    for(let i=0;i<configuration.nbHabitantsASauver.valeur-count;i++){\r\n      const newPos = getRandomCoords([0, 0], [nbLignesGrille, nbColonnesGrille])\r\n      c[newPos[0]][newPos[1]]=20+Math.round(Math.random())\r\n    }\r\n    // console.log(countHab(c))\r\n    return c\r\n\r\n  }\r\n\r\n\r\n  const evenementsAleatoire = () => {\r\n    const randomPos = getRandomCoords([0, 0], [nbLignesGrille, nbColonnesGrille])\r\n    // const randomPos=[2,9]\r\n    var c = addFumToCarte(randomPos)\r\n    c = embrasementFum(c)\r\n    c = addHabitants(c)\r\n    return c\r\n  }\r\n\r\n\r\n  // const [tester,setTester]=useState(false)\r\n\r\n\r\n  // useEffect(()=>{\r\n  //   if(!tester && carte !== null && carte !== undefined && carte.length>0 && nbLignesGrille>0 && nbColonnesGrille>0){\r\n  //     setTester(true)\r\n  //     console.log([...carte])\r\n  //     evenementsAleatoire()\r\n      \r\n  //   }\r\n\r\n    \r\n  // },[tester,carte,nbLignesGrille,nbColonnesGrille])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  const [textes, setTextes] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const getTextes = async () => {\r\n      const textes = ContentsAPI.getTexts(\"jeuTactInterface\").then(\r\n        (res) => { setTextes(res) }\r\n      )\r\n    }\r\n    if (textes == null) {\r\n      getTextes()\r\n    }\r\n    // console.log(textes)\r\n  }, [textes])\r\n\r\n\r\n\r\n\r\n  const getText = (name) => {\r\n    if (textes == null) {\r\n      return name\r\n    } else {\r\n      try {\r\n        return textes[name].contenu\r\n      } catch (error) {\r\n        // console.log(textes)\r\n        return name\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  const renderAttenteLancement = () => {\r\n\r\n    return (\r\n      <div style={{ color: \"gray\", textAlign: \"center\", fontSize: 20 }}>\r\n        <Typography >{getText('attenteLancement')}</Typography>\r\n        <Typography >{getText('infoLancement')}</Typography>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  return (\r\n\r\n\r\n\r\n    <div style={{ position: \"absolute\", display: \"flex\", alignItems: \"center\", flexDirection: \"column\", justifyContent: \"center\", flex: 1, width: \"100%\", height: \"100%\" }}>\r\n\r\n      {\r\n        carte.length > 0 && position != null && stocks !== null && numPompier !== null && play ?\r\n          <>\r\n\r\n            <Grille\r\n              nbColonnesGrille={nbColonnesGrille}\r\n              nbLignesGrille={nbLignesGrille}\r\n              carte={carte}\r\n              position={position}\r\n              mursH={mursH}\r\n              mursV={mursV}\r\n              propositionMursDetruire={propositionMursDetruire}\r\n              propositionsCase={propositionsCase}\r\n              handleClicMur={handleClicMur}\r\n              handleClicCase={handleClicCase}\r\n              handleChangePiece={handleChangePiece}\r\n              deplacementEnCours={deplacementEnCours}\r\n\r\n            />\r\n\r\n            <TactBandeauTop\r\n              stocks={stocks}\r\n              resultats={resultats}\r\n              numeroPompier={numPompier}\r\n              sequence={currentSequence}\r\n              cycle={currentCycle}\r\n              tour={currentTour}\r\n              pomp={currentPomp}\r\n              configuration={configuration}\r\n              budget={budget}\r\n              budgetDepense={budgetDepense}\r\n              equipe={equipe}\r\n              handleClicValidated={handleClicValidated}\r\n              play={play}\r\n              chronoInit={chrono}\r\n              numEquipe={equipe}\r\n              numSession={session}\r\n            />\r\n\r\n            <TactBandeauBottom\r\n              interventions={interventions}\r\n              stocks={stocks}\r\n              numeroPompier={numPompier}\r\n              tour={currentTour}\r\n              pomp={currentPomp}\r\n              handleClicFleche={handleClicFleche}\r\n              handleClicValidated={handleClicValidated}\r\n              handleClicDoor={handleClicDoor}\r\n              handleClicMarqueur={handleClicMarqueur}\r\n              handleClicExt={handleClicExtincteur}\r\n              handleNoClicked={handleNoClicked}\r\n              handleClicHabitant={handleClicHabitant}\r\n              btnClickedBottom={btnClickedBottom}\r\n              mursAutour={getMursAutour(position)}\r\n              casesAutour={getCasesAutour()}\r\n              currentCase={carte[position[0]][position[1]]}\r\n              histActions={histActions}\r\n              configuration={configuration}\r\n              deplacementEnCours={deplacementEnCours}\r\n              budgetMaxAtteint={budgetDepense >= configuration.budgetTourMax.valeur}\r\n              isLoading={false}\r\n            />\r\n            <TactBandeauDroite\r\n              handleDisconnect={handleDisconnect}\r\n              configuration={configuration}\r\n            />\r\n          </>\r\n          :\r\n          renderAttenteLancement()\r\n\r\n      }\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default TactInterface;\r\n\r\n\r\n// export default React.memo(TactInterface)","import React, { useState, useEffect } from 'react'\r\nimport CaseDonnee from './panels/CaseDonnee'\r\nimport \"../../styles/InterBandeauTop.css\"\r\nimport BookmarkRoundedIcon from '@material-ui/icons/BookmarkRounded';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\n\r\nimport PlayAPI from \"../../API/PlayAPI\"\r\nimport ContentsAPI from \"../../API/ContentsAPI\"\r\n\r\nconst InterBandeauTop = ({\r\n    numeroPompier,\r\n    numEquipe,\r\n    numSession,\r\n    sequence,\r\n    cycle,\r\n    tour,\r\n    configuration,\r\n    handleViewChange,\r\n    vue,\r\n    interventionsValidated,\r\n    equipementsValidated,\r\n    pomp,\r\n    play,\r\n    handleClicValidated,\r\n    chronoInit,\r\n    validated\r\n}) => {\r\n    const [textes, setTextes] = useState(null)\r\n    // console.log(chronoInit)\r\n    useEffect(() => {\r\n        const getTextes = async () => {\r\n            const textes = ContentsAPI.getTexts(\"jeuInterBandeauTop\").then(\r\n                (res) => { setTextes(res) }\r\n            )\r\n        }\r\n        if (textes == null) {\r\n            getTextes()\r\n        }\r\n        // console.log(textes)\r\n    }, [textes])\r\n\r\n   \r\n\r\n\r\n    const getText = (name) => {\r\n        if (textes == null) {\r\n            return name\r\n        } else {\r\n            try {\r\n                return textes[\"label\" + name.charAt(0).toUpperCase() + name.slice(1)].contenu\r\n            } catch (error) {\r\n                // console.log(\"label\" + name.charAt(0).toUpperCase() + name.slice(1))\r\n                return name\r\n            }\r\n        }\r\n    }\r\n\r\n    const [chrono, setChrono] = useState(null)\r\n    // useEffect(()=>{\r\n    //     console.log(chrono)\r\n    // },[chrono])\r\n    useEffect(() => {\r\n        \r\n        if (pomp == numeroPompier && chrono !== null && play) {\r\n            if (chrono > 0) {\r\n                var chronoTimer = setInterval(() => {\r\n                    if (chrono % 30 == 0 && chrono>10) PlayAPI.updateCurrentChrono(chrono, numSession, numEquipe)\r\n                    setChrono(chrono => chrono - 1)\r\n                    \r\n\r\n                }, 1000)\r\n\r\n            } else {\r\n                // clearInterval(chronoTimer)\r\n                // console.log(\"handle\")\r\n                if(!validated.interventions ) handleClicValidated(\"interventions\",true)\r\n                if(!validated.equipements) handleClicValidated(\"equipements\",true)\r\n                \r\n                \r\n                setChrono(null)\r\n            }\r\n           \r\n        } else {\r\n            if (configuration !== null ) {\r\n                if(chronoInit==null){\r\n                    // console.log(chronoInit)\r\n                    setChrono(configuration.chronoTourInter.valeur)\r\n                }else{\r\n                    setChrono(chronoInit)\r\n                }\r\n                 \r\n            }\r\n        }\r\n\r\n        return () => {\r\n            clearInterval(chronoTimer)\r\n        }\r\n    }, [chrono])\r\n            \r\n    \r\n\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n    if(chronoInit!==null && chrono>=chronoInit && configuration!==null){\r\n      setChrono(chronoInit)\r\n    }\r\n  })\r\n\r\n\r\n\r\n\r\n    const renderNumEquipe = () => {\r\n        return (\r\n            <div\r\n                className=\"case-panel\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"numEquipe\")}\r\n                </label>\r\n                <div className=\"donnees-container\">\r\n                    <label\r\n                        className=\"label-title label-num-pompier\"\r\n                    >\r\n                        {numEquipe}\r\n                    </label>\r\n                    <BookmarkRoundedIcon\r\n                        className=\"icone-num-pompier\"\r\n                        fontSize=\"large\"\r\n                        stroke={\"white\"}\r\n                        strokeWidth={1}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderCircleTours = () => {\r\n        var type = 1, //circle type - 1 whole, 0.5 half, 0.25 quarter\r\n            radius = 20, //distance from center\r\n            start = -90, //shift start from 0\r\n            // $elements = $('li:not(:first-child)'),\r\n            numberOfElements = configuration.nbPompEquipe.valeur,\r\n            slice = 360 * type / numberOfElements;\r\n\r\n       \r\n        const renderCircleItems = () => {\r\n            var items = []\r\n            const decalage = 1.2\r\n            // items.push(\r\n            //     <li\r\n            //         key={\"c\"}\r\n            //         style={{\r\n            //             'transform': 'translate(' + (-radius*decalage*2) + 'px,'+ (-radius*decalage) +'px)',\r\n            //             \"backgroundColor\": tour==-1 ? \"#BF0000\" : null\r\n            //         }}\r\n\r\n            //     >\r\n            //         {\"C\"}\r\n            //     </li>\r\n            // )\r\n            items.push(\r\n                <li\r\n                    key={\"s\"}\r\n                    style={{\r\n                        'transform': 'translate(' + (radius*decalage) + 'px,'+ (-radius*decalage) +'px)',\r\n                        \"backgroundColor\": pomp==0 ? \"#BF0000\" : null\r\n                    }}\r\n\r\n                >\r\n                    {\"S\"}\r\n                </li>\r\n            )\r\n\r\n            for (let i = 0; i < numberOfElements; i++) {\r\n                const rotate = slice * i + start\r\n                const rotateReverse = rotate * -1\r\n                const decalageCircle=10\r\n\r\n                items.push(\r\n                    <li\r\n                        key={i}\r\n                        style={{\r\n                            'transform': 'rotate(' + rotate + 'deg) translate(' + radius + 'px) rotate(' + rotateReverse + 'deg) translate(' + -radius / 2 + 'px) translateY('+decalageCircle+'px)',\r\n                            \"backgroundColor\": i + 1 == pomp ? \"#BF0000\" : null\r\n                        }}\r\n\r\n                    >\r\n                        {i + 1}\r\n                    </li>\r\n\r\n                )\r\n            }\r\n            return items\r\n        }\r\n\r\n        return (\r\n            <div\r\n                className=\"case-panel\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"tourParTour\")}\r\n                </label>\r\n                <ul >\r\n                   \r\n                    {renderCircleItems()}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderFeu = () => {\r\n        return (\r\n            <div\r\n                className=\"case-panel\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"play\")}\r\n                </label>\r\n\r\n                <div className=\"donnees-container\">\r\n                    <div className='feu'>\r\n                        <div \r\n                         className={chrono < 30 ? \"clignotant animation-reverted\" : \"\"}\r\n                            style={{ backgroundColor: numeroPompier != pomp || chrono<30 ?  chrono<30 ? \"#E26F00\" : \"#ff0000\" : \"#9F9F9F\" }}></div>\r\n                        <div\r\n                            className={chrono < 30 ? \"clignotant\" : \"\"}\r\n                            style={{ backgroundColor: numeroPompier == pomp ? chrono < 30 ? \"#E26F00\" : \"#4dff4d\" : \"#9F9F9F\" }}\r\n                        ></div>\r\n                    </div>\r\n                    <span className=\"case-value\" style={{\r\n                        marginTop: \"10%\",\r\n                        width: \"100%\",\r\n                        maxWidth: \"100%\"\r\n                    }} >\r\n                        {(Math.floor(chrono / 60)).toString().padStart(2, \"0\") + \" : \"}\r\n                        <span style={{ color: chrono <= 30 ? \"red\" : \"inherit\", marginLeft: 5 }}> {\" \" + (chrono % 60).toString().padStart(2, \"0\")} </span>\r\n                    </span>\r\n                </div>\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        configuration != null ?\r\n            <>\r\n                <div className=\"bandeau-top-right\">\r\n\r\n                    <div className=\"cases-container\">\r\n                        <CaseDonnee\r\n                            name={\"sequence\"}\r\n                            value={sequence}\r\n                            primary={true}\r\n                            flexFactor={1}\r\n                            textes={textes}\r\n                            data={configuration.nbSequences.valeur}\r\n                        />\r\n                        <CaseDonnee\r\n                            name={\"cycle\"}\r\n                            value={cycle}\r\n                            primary={true}\r\n                            flexFactor={1}\r\n                            textes={textes}\r\n                            data={configuration.nbCyclesParSequence.valeur}\r\n                        />\r\n                        <CaseDonnee\r\n                            name={\"tour\"}\r\n                            value={tour}\r\n                            primary={true}\r\n                            flexFactor={1}\r\n                            textes={textes}\r\n                            data={configuration.nbToursParCycle.valeur}\r\n                        />\r\n                        {/* <CaseDonnee\r\n                        name={\"budgetRestant\"}\r\n                        value={budget+\" €\"}\r\n                        primary={true}\r\n                        flexFactor={1}\r\n                        textes={textes}\r\n\r\n                    /> */}\r\n                        {renderCircleTours()}\r\n                        {renderNumEquipe()}\r\n                        {renderFeu()}\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n                <div className=\"bandeau-top-left\">\r\n                    <ToggleButtonGroup\r\n                        value={vue}\r\n                        exclusive\r\n                        onChange={handleViewChange}\r\n                        aria-label=\"text alignment\"\r\n                        className='bouton-vue-container'\r\n                    >\r\n                        <ToggleButton value=\"operations\" aria-label=\"operations\" className='bouton-vue'>\r\n                            <Typography\r\n                                className=\"label-vue\"\r\n                                variant=\"h5\" >{textes!==null ? textes[\"labelOperations\"].titre : \"\"}</Typography>\r\n                            <Typography variant=\"h6\">\r\n                                {textes!==null ? textes[\"labelOperations\"].contenu : \"\"}\r\n                            </Typography>\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"interventions\" aria-label=\"interventions\" className='bouton-vue'>\r\n                        <Typography\r\n                                className=\"label-vue\"\r\n                                variant=\"h5\" >{textes!==null ? textes[\"labelInterventions\"].titre : \"\"}</Typography>\r\n                            <Typography variant=\"h6\">\r\n                                {textes!==null ? textes[\"labelInterventions\"].contenu : \"\"}\r\n                            </Typography>\r\n                            <div\r\n                                className={interventionsValidated ? \"indicateur vert\" : \"indicateur rouge\"}\r\n                            >\r\n                                <img src={\r\n                                    interventionsValidated? \"assets/validate.png\" : \"assets/cancel.png\"\r\n                                    } alt={\"image\"} />\r\n                            </div>\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"equipements\" aria-label=\"equipements\" className='bouton-vue'>\r\n                        <Typography\r\n                                className=\"label-vue\"\r\n                                variant=\"h5\" >{textes!==null ? textes[\"labelEquipements\"].titre : \"\"}</Typography>\r\n                            <Typography variant=\"h6\">\r\n                                {textes!==null ? textes[\"labelEquipements\"].contenu : \"\"}\r\n                            </Typography>\r\n                            <div\r\n                                className={equipementsValidated? \"indicateur vert\" : \"indicateur rouge\"}\r\n                            >\r\n                                <img src={\r\n                                    equipementsValidated? \"assets/validate.png\" : \"assets/cancel.png\"\r\n                                    } alt={\"image\"} />\r\n                            </div>\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </div>\r\n\r\n            </>\r\n\r\n\r\n            :\r\n            null\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default InterBandeauTop;","import React, { useState, useEffect } from 'react'\r\nimport '../../styles/InterBandeauBottom.css';\r\nimport CaseDonnee from './panels/CaseDonnee'\r\nimport Button from '@material-ui/core/Button'\r\nimport ContentsAPI from \"../../API/ContentsAPI\"\r\n\r\n\r\nconst InterBandeauBottom = ({\r\n    numeroPompier,\r\n    vue,\r\n    resultats,\r\n    budget,\r\n    validated,\r\n    handleClicValidated,\r\n    tour,\r\n    currentCycle,\r\n    couts,\r\n    equipe,\r\n    pomp\r\n}) => {\r\n  \r\n    const [textes, setTextes] = useState(null)\r\n\r\n    useEffect(() => {\r\n        const getTextes = async () => {\r\n            const textes = ContentsAPI.getTexts(\"jeuInterBandeauBottom\").then(\r\n                (res) => { setTextes(res) }\r\n            )\r\n        }\r\n        if (textes == null) {\r\n            getTextes()\r\n        }\r\n        \r\n    }, [textes])\r\n\r\n    const getText = (name) => {\r\n        if (textes == null) {\r\n            return name\r\n        } else {\r\n            try {\r\n                return textes[\"label\" + name.charAt(0).toUpperCase() + name.slice(1)].contenu\r\n            } catch (error) {\r\n                return name\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n\r\n\r\n    const renderCoutsInterventions = (interventions) => {\r\n        if(couts!==null){\r\n            var components1 = []\r\n            var components2 = []\r\n            var components = []\r\n            if(interventions){\r\n                Object.keys(couts.interventions).forEach((key,index) => {\r\n                    if(index<Object.keys(couts.interventions).length/2){\r\n                        components1.push(\r\n                            <span key={index} className=\"label-cout-inter\">\r\n                                {getText(key) + \" : \"}<span className=\"label-cout-inter-eur\">{couts.interventions[key] + \" €\"}</span>\r\n                            </span>\r\n                        )\r\n                    }else{\r\n                        components2.push(\r\n                            <span key={index} className=\"label-cout-inter\">\r\n                                {getText(key) + \" : \"}<span className=\"label-cout-inter-eur\">{couts.interventions[key] + \" €\"}</span>\r\n                            </span>\r\n                        )\r\n                    }\r\n                    \r\n                });\r\n            }else{\r\n                Object.keys(couts.equipements).forEach((key,index) => {\r\n                    if(index<Object.keys(couts.equipements).length/2){\r\n                        components1.push(\r\n                            <span key={index} className=\"label-cout-inter\">\r\n                                {getText(key) + \" : \"}<span className=\"label-cout-inter-eur\">{couts.equipements[key] + \" €\"}</span>\r\n                            </span>\r\n                        )\r\n                    }else{\r\n                        components2.push(\r\n                            <span key={index} className=\"label-cout-inter\">\r\n                                {getText(key) + \" : \"}<span className=\"label-cout-inter-eur\">{couts.equipements[key] + \" €\"}</span>\r\n                            </span>\r\n                        )\r\n                    }\r\n                });\r\n            }\r\n            \r\n            return (\r\n                <div className=\"case-panel\">\r\n                    <label\r\n                        className=\"label-title\"\r\n                    >\r\n                        {\"Coûts \"+vue.charAt(0).toUpperCase() + vue.slice(1)}\r\n                    </label>\r\n                    <div className=\"couts-container\">\r\n                        <div>\r\n                            {components1}\r\n                        </div>\r\n                        <div>\r\n                            {components2}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n               \r\n            )\r\n        }\r\n       \r\n    }\r\n\r\n    const renderBudgets = () => {\r\n        return (\r\n            <div className=\"budgets-container\">\r\n                <div\r\n                    className=\"case-panel donnees-container \"\r\n                    style={{\r\n                        flex: 1\r\n                    }}\r\n                >\r\n                    <label\r\n                        className=\"label-title\"\r\n                    >\r\n                        {vue == \"interventions\"? getText(\"sequenceInter\") : getText(\"sequenceEq\")}\r\n                    </label>\r\n                    <CaseDonnee\r\n                        key={1}\r\n                        name={\"budgetSeqTot\"}\r\n                        value={budget!=undefined ? budget.sequence : 0+\" €\"}\r\n                        primary={false}\r\n                        textes={textes}\r\n                        flexFactor={0}\r\n                    />\r\n                    <CaseDonnee\r\n                        key={2}\r\n                        name={\"budgetSeqDep\"}\r\n                        value={budget!=undefined ? budget.depense : 0+\" €\"}\r\n                        primary={false}\r\n                        textes={textes}\r\n                        flexFactor={0}\r\n                    />\r\n                    <CaseDonnee\r\n                        key={3}\r\n                        name={\"budgetSeqDispo\"}\r\n                        value={budget!=undefined ? budget.sequence-budget.depense : 0+\" €\"}\r\n                        primary={false}\r\n                        textes={textes}\r\n                        flexFactor={0}\r\n                    />\r\n                </div>\r\n                {/* <div\r\n                    className=\"case-panel donnees-container \"\r\n                    style={{\r\n                        flex: 1\r\n                    }}\r\n                >\r\n                    <label\r\n                        className=\"label-title\"\r\n                    >\r\n                        {\"Cycle en cours\"}\r\n                    </label>\r\n                    <CaseDonnee\r\n                        key={1}\r\n                        name={\"budgetCycleTot\"}\r\n                        value={budget.cycle.total+\" €\"}\r\n                        primary={false}\r\n                        textes={textes}\r\n                        flexFactor={0}\r\n                    />\r\n                    <CaseDonnee\r\n                        key={2}\r\n                        name={\"budgetCycleDep\"}\r\n                        value={budget.cycle.depense+\" €\"}\r\n                        primary={false}\r\n                        textes={textes}\r\n                        flexFactor={0}\r\n                    />\r\n                    <CaseDonnee\r\n                        key={3}\r\n                        name={\"budgetCycleDispo\"}\r\n                        value={budget.cycle.total-budget.cycle.depense+\" €\"}\r\n                        primary={false}\r\n                        textes={textes}\r\n                        flexFactor={0}\r\n                    />\r\n                    \r\n                </div> */}\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n\r\n    const renderBoutonsValider = () => {\r\n        return (\r\n            <div className=\"boutons-valider-container\">\r\n                <Button\r\n                    disabled={numeroPompier !== pomp || (vue==\"interventions\" ? validated.interventions : validated.equipements)}\r\n                    key={0}\r\n                    className=\"bouton-valider vert\"\r\n                    variant='contained'\r\n                    disableElevation\r\n                    onClick={() => handleClicValidated(vue,true)}\r\n\r\n                >\r\n                    <img src={\"assets/validate.png\"} alt={\"image\"} />\r\n\r\n                </Button>\r\n\r\n                <Button\r\n                    disabled={numeroPompier !== pomp || (vue==\"interventions\" ? !(validated.interventions && !validated.equipements) : !(!validated.interventions && validated.equipements))}\r\n                    key={1}\r\n                    className=\"bouton-valider rouge\"\r\n                    variant='contained'\r\n                    disableElevation\r\n                    onClick={() => handleClicValidated(vue,false)}\r\n                >\r\n                    <img src={\"assets/return.png\"} alt={\"image\"} />\r\n                </Button>\r\n\r\n            </div>\r\n        )\r\n\r\n    }\r\n\r\n\r\n    const renderResults = () => {\r\n        return (\r\n            <div\r\n                className=\"case-panel donnees-container\"\r\n                style={{\r\n                    flex: 2\r\n                }}\r\n            >\r\n                <label\r\n                    className=\"label-title\"\r\n                >\r\n                    {getText(\"resultats\") + \" N°\" + equipe}\r\n                </label>\r\n                <CaseDonnee\r\n                    key={1}\r\n                    name={getText(\"nbDecedes\")}\r\n                    value={resultats.Decedes}\r\n                    primary={false}\r\n                    flexFactor={0}\r\n                />\r\n                <CaseDonnee\r\n                    key={2}\r\n                    name={getText(\"nbSauves\")}\r\n                    value={resultats.Sauves}\r\n                    primary={false}\r\n                    flexFactor={0}\r\n                />\r\n                <CaseDonnee\r\n                    key={3}\r\n                    name={getText(\"nbMarqueurs\")}\r\n                    value={resultats.Marqueur}\r\n                    primary={false}\r\n                    flexFactor={0}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n           { vue==\"operations\"? \r\n                <div className=\"bandeau-bottom-inter left\">\r\n                    {renderResults()}\r\n                </div>\r\n            : null}\r\n             { vue==\"interventions\"? \r\n                <div className=\"bandeau-bottom-inter\">\r\n                {renderCoutsInterventions(true)}\r\n                {renderBudgets()}\r\n                {renderBoutonsValider()}\r\n            </div>\r\n            : null}\r\n             { vue==\"equipements\"? \r\n                <div className=\"bandeau-bottom-inter\">\r\n                {renderCoutsInterventions(false)}\r\n                {renderBudgets()}\r\n                {renderBoutonsValider()}\r\n            </div>\r\n            : null}\r\n            \r\n        </>\r\n    );\r\n}\r\n\r\nexport default InterBandeauBottom;","import React, { useEffect, useState, useRef } from 'react';\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport Paper from \"@material-ui/core/Paper\"\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableFooter from '@material-ui/core/TableFooter';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ContentsAPI from \"../../API/ContentsAPI\"\r\n\r\nimport '../../styles/Interfaces.css';\r\n\r\n\r\nconst InterInterventions = ({\r\n    budget,\r\n    cycles,\r\n    handleBudgetChange,\r\n    type,\r\n    currentCycle,\r\n    currentSequence,\r\n    budgetSim,\r\n    couts,\r\n    page,\r\n    nbCycleParSeq,\r\n    configuration\r\n\r\n}) => {\r\n    const lastRow = useRef(null)\r\n    const nbPompiers = configuration.nbPompEquipe.valeur\r\n    const [numCycle, setNumCycle] = useState(budgetSim.numCycle)\r\n    const [lastCycle, setLastCycle] = useState(budgetSim)\r\n\r\n    const initLocalPage=()=>{\r\n        console.log(\"init local page\")\r\n        if(nbCycleParSeq>0 && budgetSim.numSeq>0){\r\n            if(type==\"interventions\"){\r\n                // return Math.floor(budgetSim.numSeq/nbCycleParSeq) \r\n                return cycles.length>0 ? Math.floor(cycles[cycles.length-1].numSeq/nbCycleParSeq) : 0\r\n            }else{\r\n                \r\n                // return Math.floor((budgetSim.numSeq-1)*nbCycleParSeq+budgetSim.numCycle-1)\r\n                return cycles.length>0 ? Math.floor((cycles[cycles.length-1].numSeq-1)*nbCycleParSeq+cycles[cycles.length-1].numCycle-1) : 0\r\n            }\r\n        }\r\n        return 0    \r\n    }\r\n    const [localPage, setLocalPage] = useState(initLocalPage())\r\n\r\n    // useEffect(()=>{\r\n    //     console.log(localPage)\r\n    // },[localPage])\r\n\r\n\r\n    const renderHeaders = () => {\r\n        var components = []\r\n        components.push(\r\n            <TableCell key={\"head\"+0} align=\"center\" component=\"th\">Séquence</TableCell>\r\n        )\r\n        components.push(\r\n            <TableCell key={\"head\"+1} align=\"center\" component=\"th\">Cycle</TableCell>\r\n        )\r\n        if (type == \"equipements\") {\r\n            components.push(\r\n                <TableCell key={\"head\"+2} align=\"center\" component=\"th\">Type</TableCell>\r\n            )\r\n        }\r\n\r\n        for (let i = 1; i <= nbPompiers; i++) {\r\n            components.push(\r\n                <TableCell key={\"head\"+i+3} align=\"center\" component=\"th\">Pompier {i}</TableCell>\r\n            )\r\n        }\r\n        components.push(\r\n            <TableCell key={1000} align=\"center\" component=\"th\">Total</TableCell>\r\n        )\r\n        return (\r\n            <TableRow key={\"header\"}>\r\n                {components}\r\n            </TableRow>\r\n        )\r\n    }\r\n\r\n\r\n\r\n\r\n    const [textes, setTextes] = useState(null)\r\n\r\n    useEffect(() => {\r\n        const getTextes = async () => {\r\n            const textes = ContentsAPI.getTexts(\"jeuInterInterventions\").then(\r\n                (res) => { setTextes(res) }\r\n            )\r\n        }\r\n        if (textes == null) {\r\n            getTextes()\r\n        }\r\n        // console.log(textes)\r\n    }, [textes])\r\n\r\n\r\n    const getText = (name) => {\r\n        if (textes == null) {\r\n            return name\r\n        } else {\r\n            try {\r\n                return textes[\"label\" + name.charAt(0).toUpperCase() + name.slice(1)].contenu\r\n            } catch (error) {\r\n                console.log(\"label\" + name.charAt(0).toUpperCase() + name.slice(1))\r\n                return name\r\n            }\r\n        }\r\n    }\r\n\r\n    // useEffect(()=>{\r\n    //     // setLocalPage(initLocalPage())\r\n    // },[lastCycle])\r\n\r\n\r\n\r\n    const initLastCycle = () => {\r\n        \r\n        // setLastCycle(\r\n        //     type == \"interventions\" ?\r\n        //         {\r\n        //             numSeq: cycles.length>0 ? cycles.length%nbCycleParSeq == 0  ? cycles[cycles.length -1].numSeq +1 : cycles[cycles.length -1].numSeq :1 ,\r\n        //             numCycle:(cycles.length)%nbCycleParSeq+1,\r\n        //             pomp1: 0,\r\n        //             pomp2: 0,\r\n        //             pomp3: 0,\r\n        //             pomp4: 0,\r\n        //             pomp5: 0,\r\n        //             pomp6: 0,\r\n\r\n        //         }\r\n        //         :\r\n        //         {\r\n        //             numSeq:cycles.length>0 ? cycles.length>1 ? cycles.length%2 == 0  ? cycles[cycles.length -1].numSeq +1 : cycles[cycles.length -1].numSeq : 1 :1 ,\r\n        //             numCycle: (cycles.length)%2+1,\r\n        //             Feu: {\r\n        //                 pomp1: 0,\r\n        //                 pomp2: 0,\r\n        //                 pomp3: 0,\r\n        //                 pomp4: 0,\r\n        //                 pomp5: 0,\r\n        //                 pomp6: 0,\r\n        //             },\r\n        //             FeuFum: {\r\n        //                 pomp1: 0,\r\n        //                 pomp2: 0,\r\n        //                 pomp3: 0,\r\n        //                 pomp4: 0,\r\n        //                 pomp5: 0,\r\n        //                 pomp6: 0,\r\n        //             },\r\n        //             Fum: {\r\n        //                 pomp1: 0,\r\n        //                 pomp2: 0,\r\n        //                 pomp3: 0,\r\n        //                 pomp4: 0,\r\n        //                 pomp5: 0,\r\n        //                 pomp6: 0,\r\n        //             },\r\n        //             Marqueur: {\r\n        //                 pomp1: 0,\r\n        //                 pomp2: 0,\r\n        //                 pomp3: 0,\r\n        //                 pomp4: 0,\r\n        //                 pomp5: 0,\r\n        //                 pomp6: 0,\r\n        //             }\r\n        //         }\r\n        // )\r\n        setLastCycle(budgetSim)\r\n    }\r\n\r\n    // useEffect(()=>{\r\n    //     console.log(\"local page\", localPage)\r\n    // },[localPage])\r\n\r\n\r\n    // useEffect(()=>{\r\n    //     console.log(lastCycle)\r\n    // },[lastCycle])\r\n\r\n    const handleChangeSelect = (numPompier, event, key) => {\r\n        var c = { ...lastCycle }\r\n        if (type == \"interventions\") {\r\n            c[\"pomp\" + numPompier] = event.target.value\r\n        } else {\r\n            c[key][\"pomp\" + numPompier] = event.target.value\r\n        }\r\n        setLastCycle(c)\r\n        handleBudgetChange(type, c)\r\n        \r\n    }\r\n\r\n    const renderPropositionsBudget = (nSeq, nCycle, numPompier,value) => {\r\n        let cycle = [...cycles].sort((a, b) => a.numCycle - b.numCycle).sort((a, b) => a.numSeq - b.numSeq)[(nSeq-1)*nbCycleParSeq+nCycle - 1]\r\n        if (cycle == null) cycle = {...lastCycle}\r\n        let sum = 0\r\n        if (cycle != null) {\r\n            Object.keys(cycle).forEach((key, index) => {\r\n                if (key != \"numCycle\" && key !== \"numSeq\" && (numPompier !== index - 1 || nCycle < lastCycle.numCycle || nSeq<lastCycle.numSeq)) {\r\n                    sum += cycle[key]\r\n                }\r\n            })\r\n        }\r\n\r\n        var components = []\r\n        const maxValue = cycle != null && (nCycle < lastCycle.numCycle || nSeq<lastCycle.numSeq) ? sum : (budget.sequence - budget.depense - sum)\r\n        // console.log(value)\r\n        for (let i = 0; i <= Math.floor(maxValue/100); i++) {\r\n            components.push(\r\n                <MenuItem  key={\"item\"+nCycle+\":\"+numPompier+\":\"+i} value={i * 100} align=\"right\" >{i * 100 + \"€\"}</MenuItem>\r\n            )\r\n        }\r\n        return components\r\n    }\r\n    const renderSelectBudgetCycle = (nSeq,nCycle, disabled, numPompier, value) => {\r\n        // console.log(nCycle)\r\n        return (\r\n            <FormControl disabled={disabled}  key={\"select\"+nSeq+\":\"+nCycle+\" : \"+numPompier} variant=\"outlined\">\r\n                <Select\r\n                    value={value}\r\n                    onChange={(value) => handleChangeSelect(numPompier, value)}\r\n                    displayEmpty\r\n                    color=\"secondary\"\r\n                    className={value==0 || disabled ? \"empty\" : \"\"}   \r\n                >\r\n                    <MenuItem value=\"\" disabled align=\"center\">\r\n                        Budget {numPompier}\r\n                    </MenuItem>\r\n\r\n                    {renderPropositionsBudget(nSeq,nCycle, numPompier,value)}\r\n\r\n                </Select >\r\n            </FormControl>\r\n        )\r\n    }\r\n    const renderRowBudgetCycle = (cycle) => {\r\n            var comp = []\r\n            var sum = 0\r\n            if (cycle.numCycle % nbCycleParSeq == 1) {\r\n                comp.push(\r\n                    <TableCell key={\"row\"+cycle+\":\"+0} scope=\"row\" align=\"center\" component=\"th\" rowSpan={nbCycleParSeq}>\r\n                        Séquence n°{cycle.numSeq}\r\n                    </TableCell>\r\n                )\r\n            }\r\n\r\n            comp.push(\r\n                <TableCell key={\"row\"+cycle+\":\"+1} scope=\"row\" align=\"center\" component=\"th\" >\r\n                    Cycle n°{cycle.numCycle}\r\n                </TableCell>\r\n            )\r\n\r\n            const disabled = cycle.numSeq<lastCycle.numSeq || cycle.numCycle<lastCycle.numCycle\r\n            // console.log(disabled)\r\n\r\n            Object.keys(cycle).forEach((key, index) => {\r\n                if (key != \"numCycle\" && key != \"numSeq\") {\r\n                    comp.push(\r\n                        <TableCell scope=\"row\"  key={\"row\"+cycle+\":pomp\"+index} align=\"center\">{renderSelectBudgetCycle(cycle[\"numSeq\"],cycle[\"numCycle\"],disabled, index - 1, cycle[key])}</TableCell>\r\n                    )\r\n                    sum += cycle[key]\r\n                }\r\n            })\r\n            comp.push(\r\n                <TableCell scope=\"row\" align=\"center\" key={1000} >\r\n\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        disabled\r\n                        value={sum + \" €\"}\r\n                        inputProps={{\r\n                            style: {\r\n                                color: !(disabled) ? sum > budget.sequence - budget.depense ? \"red\" : \"green\" : null,\r\n                                fontWeight: !disabled ? \"bold\" : null,\r\n                                fontStyle: disabled ? \"italic\" : null ,\r\n                                textAlign: \"center\",\r\n                                backgroundColor: \"#f1f1f1\",\r\n                                borderRadius: 5,\r\n                            },\r\n                        }}\r\n                    />\r\n\r\n                </TableCell>\r\n            )\r\n            return (\r\n                <TableRow hover key={\"row\"+cycle.numSeq + \" : \" + cycle.numCycle+Math.random()} ref={cycle.numCycle >= currentCycle ? lastRow : null}>\r\n                    {comp}\r\n                </TableRow>\r\n            )\r\n\r\n    }\r\n    const renderBudgetsCycles = () => {\r\n        \r\n        if (budgetSim.numCycle !== lastCycle.numCycle ) initLastCycle()\r\n        // if(budgetSim.numCycle<lastCycle.numCycle) setLastCycle(budgetSim)\r\n        const cyclesSorted = [...cycles].sort((a,b)=>a.numCycle-b.numCycle).sort((a,b)=>a.numSeq-b.numSeq)\r\n        // console.log(cycles)\r\n        var components = []\r\n        cyclesSorted.forEach((cycle, index) => {\r\n            // type==\"interventions\" ? Math.floor(currentCycle+(currentSequence-1)*nbCycleParSeq)/nbCycleParSeq-1: currentCycle-1\r\n            if (cycle.numSeq < currentSequence || (cycle.numSeq == currentSequence && cycle.numCycle<currentCycle+1)) {\r\n\r\n            if (cycle.numSeq==localPage+1 ) {\r\n                // console.log(\"render\",localPage,cycle.numCycle,cycle.numSeq)\r\n\r\n                components.push(\r\n                    renderRowBudgetCycle(cycle)\r\n                )\r\n            }\r\n        }\r\n\r\n        })\r\n\r\n        // console.log(lastCycle,localPage)\r\n        if (lastCycle.numSeq==localPage+1) {\r\n            components.push(renderRowBudgetCycle(lastCycle))\r\n        }\r\n\r\n        return (\r\n            components\r\n        )\r\n    }\r\n\r\n\r\n    const renderPropositionsStock = (nSeq,nCycle, numPompier, key) => {\r\n        let cycle = [...cycles].sort((a, b) => a.numCycle - b.numCycle).sort((a, b) => a.numSeq - b.numSeq)[(nSeq-1)*nbCycleParSeq+nCycle - 1]\r\n        if (cycle == null) cycle = {...lastCycle}\r\n\r\n        let sum=0\r\n\r\n        if (cycle != null) {\r\n            Object.keys(cycle).forEach((k) => {\r\n                if (k != \"numCycle\" && k !== \"numSeq\" && k !== \"type\") {\r\n\r\n                    Object.values(cycle[k]).forEach((value, index) => {\r\n                        if ((key!==k ) || numPompier!==index+1 ||( nCycle < lastCycle.numCycle || nSeq<lastCycle.numSeq)) {\r\n                            sum+= value * couts.equipements[\"coutEq\" + k]\r\n                            \r\n                        }\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        var components = []\r\n        const maxValue = cycle != null && (nCycle < lastCycle.numCycle || nSeq<lastCycle.numSeq) ? Math.floor((sum) / couts.equipements[\"coutEq\" + key]) : Math.floor((budget.sequence - budget.depense - sum) / couts.equipements[\"coutEq\" + key])\r\n       \r\n        \r\n        for (let i = 0; i <= Math.max(0,maxValue); i++) {\r\n            components.push(\r\n                <MenuItem key={nCycle+\":\"+numPompier+\":\"+i} value={i} align=\"right\" >{i}</MenuItem>\r\n            )\r\n        }\r\n        return components\r\n    }\r\n\r\n    const renderSelectStockCycle = (nSeq,nCycle, disabled, numPompier, value, key) => {\r\n        // console.log(value)\r\n        return (\r\n            <FormControl disabled={disabled} variant=\"outlined\" key={nSeq+\":\"+nCycle+\" :\" +numPompier+\":\"+key+Math.random()}>\r\n                <Select\r\n                    value={value}\r\n                    onChange={(value) => handleChangeSelect(numPompier, value, key)}\r\n                    displayEmpty\r\n                    color=\"secondary\"\r\n                    className={value==0 || disabled ? \"empty\" : \"\"}   \r\n\r\n                >\r\n                    <MenuItem value=\"\" disabled align=\"center\">\r\n                        Stock {numPompier}\r\n                    </MenuItem>\r\n\r\n                    {renderPropositionsStock(nSeq,nCycle, numPompier, key)}\r\n\r\n                </Select >\r\n            </FormControl>\r\n        )\r\n    }\r\n\r\n    const renderRowStocksCycle = (cycle, key, data) => {\r\n        if (cycle.numCycle < currentCycle + 2) {\r\n            var comp = []\r\n            var sum = 0\r\n\r\n            // console.log(key,data)\r\n            const nbLignesParCycle = (Object.keys(lastCycle).length - 2)\r\n\r\n            if (key == \"Feu\") {\r\n                // if(cycle.numCycle%nbCycleParSeq==1){\r\n                comp.push(\r\n                    <TableCell key={\"row\"+cycle+\":\"+0} scope=\"row\" align=\"center\" component=\"th\" rowSpan={nbCycleParSeq * (Object.keys(lastCycle).length - 2)}>\r\n                        Séquence n°{cycle.numSeq}\r\n                    </TableCell>\r\n                )\r\n                // }\r\n                comp.push(\r\n                    <TableCell key={\"row\"+cycle+\":\"+1} scope=\"row\" align=\"center\" component=\"th\" rowSpan={Object.keys(lastCycle).length - 2}>\r\n                        Cycle n°{cycle.numCycle}\r\n                    </TableCell>\r\n                )\r\n            }\r\n\r\n            comp.push(\r\n                <TableCell key={\"row\"+cycle+\":\"+2} scope=\"row\" align=\"center\"  >\r\n                    {getText(key!==\"Marqueur\" ? \"Ext\"+key : key)}\r\n                </TableCell>\r\n            )\r\n            const disabled = cycle.numSeq<lastCycle.numSeq || cycle.numCycle<lastCycle.numCycle\r\n            // console.log()\r\n            if (data !== null && data !== undefined) {\r\n                Object.keys(data).forEach((k, index) => {\r\n                    if (k != \"numCycle\" && k != \"numSeq\" && k !== \"type\") {\r\n                        comp.push(\r\n                            <TableCell key={\"row\"+cycle+\":pomp\"+index + 3} align=\"center\" scope=\"row\">{renderSelectStockCycle(cycle.numSeq,cycle.numCycle, disabled, index + 1, data[k], key)}</TableCell>\r\n                        )\r\n                        sum += data[k] * couts.equipements[\"coutEq\" + key]\r\n                    }\r\n                })\r\n            }\r\n\r\n            comp.push(\r\n                <TableCell scope=\"row\" align=\"center\" key={20} >\r\n                    <TextField\r\n                        id=\"outlined-basic\"\r\n                        variant=\"outlined\"\r\n                        disabled\r\n                        value={sum + \" €\"}\r\n                        inputProps={{\r\n                            style: {\r\n                                color: !disabled ? sum > budget.sequence - budget.depense ? \"red\" : \"green\" : null,\r\n                                fontWeight: !disabled? \"bold\" : null,\r\n                                fontStyle: disabled ? \"italic\" : null,\r\n                                textAlign: \"center\",\r\n                                backgroundColor: \"#f1f1f1\",\r\n                                borderRadius: 5,\r\n                                // minWidth: 70\r\n\r\n                            },\r\n                        }}\r\n                    />\r\n                </TableCell>\r\n            )\r\n\r\n            return (\r\n                <TableRow hover key={cycle.numSeq + \" : \" + cycle.numCycle + \" : \" + key+Math.random()} ref={cycle.numCycle >= currentCycle ? lastRow : null}>\r\n                    {comp}\r\n                </TableRow>\r\n            )\r\n\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n\r\n    const renderStocksCycle = () => {\r\n        if (budgetSim.numCycle !== lastCycle.numCycle ) initLastCycle()\r\n        const cyclesSorted = [...cycles].sort((a, b) => (a.numSeq-b.numSeq)*100+a.numCycle - b.numCycle)\r\n        var components = []\r\n        cyclesSorted.forEach((cycle, index) => {\r\n            if (index == localPage) {\r\n                Object.keys(cycle).forEach(key => {\r\n                    if (key !== \"numSeq\" && key !== \"numCycle\") {\r\n                        components.push(\r\n                            renderRowStocksCycle(cycle, key, cycle[key])\r\n                        )\r\n                    }\r\n                });\r\n            }\r\n        })\r\n        if (localPage == (lastCycle.numSeq-1)*nbCycleParSeq+lastCycle.numCycle - 1) {\r\n            Object.keys(lastCycle).forEach(key => {\r\n                if (key !== \"numSeq\" && key !== \"numCycle\") {\r\n                    components.push(renderRowStocksCycle(lastCycle, key, lastCycle[key]))\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        return (\r\n            components\r\n        )\r\n    }\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setLocalPage(newPage);\r\n        // console.log(\"new Page\", newPage)\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <TableContainer component={Paper} className=\"tableau\">\r\n                <Table stickyHeader size=\"small\" >\r\n                    <TableHead>\r\n                        {renderHeaders()}\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            type == \"interventions\" ?\r\n                                renderBudgetsCycles()\r\n\r\n                                : null\r\n                        }\r\n                        {\r\n                            type == \"equipements\" ?\r\n                                renderStocksCycle()\r\n\r\n                                : null\r\n                        }\r\n\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow key=\"footer-row\">\r\n                            <TablePagination\r\n                                rowsPerPageOptions={[Object.keys(lastCycle).length - 2]}\r\n                                // colSpan={3}\r\n                                count={type == \"interventions\" ? lastCycle.numSeq*nbCycleParSeq : (lastCycle.numSeq-1)*nbCycleParSeq+ lastCycle.numCycle}\r\n                                \r\n                                rowsPerPage={type == \"interventions\" ? nbCycleParSeq : 1}\r\n                                page={localPage}\r\n                                // labelDisplayedRows={({ from, to, count }) => type == \"interventions\" ? \"Séquence n° \" + Math.ceil(from/nbCycleParSeq) + \" | Cycles \"+1+\" - \"+(nbCycleParSeq) : \"Séquence n° \" + Math.ceil(from/nbCycleParSeq) + \"    |    Cycle n° \" + ((to+1)%nbCycleParSeq+1) }\r\n                                labelDisplayedRows={({ from, to, count }) => type == \"interventions\" ? \"Séquence n° \" + Math.ceil(from/nbCycleParSeq) + \" | Cycles \"+1+\" - \"+(nbCycleParSeq) : \"Séquence n° \" + Math.ceil(from/nbCycleParSeq) + \"    |    Cycle n° \" + ((localPage)%nbCycleParSeq+1) }\r\n\r\n                                // SelectProps={{\r\n                                //     inputProps: { 'aria-label': 'rows per page' },\r\n                                //     native: true,\r\n                                // }}\r\n                                onChangePage={handleChangePage}\r\n                            // onRowsPerPageChange={handleChangeRowsPerPage}\r\n                            // ActionsComponent={TablePaginationActions}\r\n                            />\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </TableContainer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InterInterventions;","import React, { useState, useEffect } from 'react'\r\nimport CaseDonnee from './panels/CaseDonnee'\r\nimport \"../../styles/InterBandeauDroite.css\"\r\nimport ExitToAppOutlinedIcon from '@material-ui/icons/ExitToAppOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ChatOutlinedIcon from '@material-ui/icons/ChatOutlined';\r\nimport ContentsAPI from \"../../API/ContentsAPI\"\r\nimport cookie from 'react-cookies'\r\nimport { useHistory } from 'react-router-dom';\r\nconst InterBandeauDroite = ({\r\n    configuration,\r\n    handleDisconnect\r\n}) => {\r\n\r\n    const [developpe, setDeveloppe] = useState(false)\r\n\r\n\r\n    //     console.log(configuration)\r\n    //     const [textes, setTextes] = useState(null)\r\n    //     const [chrono,setChrono]=useState(null)\r\n    //     useEffect(() => {\r\n    //         if(tour==numeroPompier){\r\n    //         if (chrono > 0) {\r\n    //             var chronoTimer = setInterval(() => {\r\n    //             setChrono(chrono => chrono - 1)\r\n\r\n    //             }, 1000)\r\n\r\n    //         }\r\n    //         return () => {\r\n    //         clearInterval(chronoTimer)\r\n    //         }\r\n    //     }\r\n    //     }, [chrono])\r\n\r\n\r\n\r\n    //   useEffect(()=>{\r\n    //     if(chrono===null && configuration!==null){\r\n    //       setChrono(configuration.chronoTour.valeur)\r\n    //     }\r\n    //   })\r\n\r\n    //     useEffect(() => {\r\n    //         // console.log(\"use effect\")\r\n    //         const getTextes = async () => {\r\n    //             const textes = ContentsAPI.getTexts(\"jeuInterBandeauDroite\").then(\r\n    //                 (res) => { setTextes(res) }\r\n    //             )\r\n    //         }\r\n    //         if (textes == null) {\r\n    //             getTextes()\r\n    //         }\r\n    //     }, [textes])\r\n\r\n\r\n\r\n    //     const getText = (name) => {\r\n    //         if (textes == null) {\r\n    //             return name\r\n    //         } else {\r\n    //             try {\r\n    //                 return textes[\"label\" + name.charAt(0).toUpperCase() + name.slice(1)].contenu\r\n    //             } catch (error) {\r\n    //                 console.log(\"label\" + name.charAt(0).toUpperCase() + name.slice(1))\r\n    //                 return name\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n\r\n\r\n    //     const renderStocks = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel donnees-container\"\r\n    //                 style={{\r\n    //                     flex: 3\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"stockEquipements\")}\r\n    //                 </label>\r\n    //                 <div className=\"sous-donnees-container\">\r\n    //                     <CaseDonnee\r\n    //                         key={0}\r\n    //                         name={\"nbExtFeu\"}\r\n    //                         value={stocks.Feu}\r\n    //                         primary={false}\r\n    //                         flexFactor={1}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                     <CaseDonnee\r\n    //                         key={1}\r\n    //                         name={\"nbExtFum\"}\r\n    //                         value={stocks.Fum}\r\n    //                         primary={false}\r\n    //                         flexFactor={1}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                 </div>\r\n    //                 <div className=\"sous-donnees-container\">\r\n    //                     <CaseDonnee\r\n    //                         key={2}\r\n    //                         name={\"nbExtFeuFum\"}\r\n    //                         value={stocks.FeuFum}\r\n    //                         primary={false}\r\n    //                         flexFactor={2}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                     <CaseDonnee\r\n    //                         key={3}\r\n    //                         name={\"nbMarqueurs\"}\r\n    //                         value={stocks.Marqueur}\r\n    //                         primary={false}\r\n    //                         flexFactor={2}\r\n    //                         textes={textes}\r\n\r\n    //                     />\r\n    //                 </div>\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderResults = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel donnees-container\"\r\n    //                 style={{\r\n    //                     flex: 2\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"resultats\") + \" \" + numeroPompier}\r\n    //                 </label>\r\n    //                 <CaseDonnee\r\n    //                     key={4}\r\n    //                     name={getText(\"nbDecedes\")}\r\n    //                     value={resultats.Decedes}\r\n    //                     primary={false}\r\n    //                     flexFactor={0}\r\n    //                 />\r\n    //                 <CaseDonnee\r\n    //                     key={5}\r\n    //                     name={getText(\"nbSauves\")}\r\n    //                     value={resultats.Sauves}\r\n    //                     primary={false}\r\n    //                     flexFactor={0}\r\n    //                 />\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderNumPompier = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel\"\r\n    //                 style={{\r\n    //                     flex: 1\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"numPompier\")}\r\n    //                 </label>\r\n    //                 <div className=\"donnees-container\">\r\n    //                     <label\r\n    //                         className=\"label-title label-num-pompier\"\r\n    //                     >\r\n    //                         {numeroPompier}\r\n    //                     </label>\r\n    //                     <BookmarkRoundedIcon\r\n    //                         className=\"icone-num-pompier\"\r\n    //                         fontSize=\"large\"\r\n    //                         stroke={\"white\"}\r\n    //                         strokeWidth={1}\r\n    //                     />\r\n    //                 </div>\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderCircleTours = () => {\r\n    //         var type = 1, //circle type - 1 whole, 0.5 half, 0.25 quarter\r\n    //             radius = 20, //distance from center\r\n    //             start = -90, //shift start from 0\r\n    //             // $elements = $('li:not(:first-child)'),\r\n    //             numberOfElements = configuration.nbPompEquipe.valeur,\r\n    //             slice = 360 * type / numberOfElements;\r\n\r\n    //         const renderCircleItems = () => {\r\n    //             var items = []\r\n    //             const decalage = 1.2\r\n    //             // items.push(\r\n    //             //     <li\r\n    //             //         key={\"c\"}\r\n    //             //         style={{\r\n    //             //             'transform': 'translate(' + (-radius*decalage*2) + 'px,'+ (-radius*decalage) +'px)',\r\n    //             //             \"backgroundColor\": tour==-1 ? \"#BF0000\" : null\r\n    //             //         }}\r\n\r\n    //             //     >\r\n    //             //         {\"C\"}\r\n    //             //     </li>\r\n    //             // )\r\n    //             items.push(\r\n    //                 <li\r\n    //                     key={\"s\"}\r\n    //                     style={{\r\n    //                         'transform': 'translate(' + (radius*decalage) + 'px,'+ (-radius*decalage) +'px)',\r\n    //                         \"backgroundColor\": tour==0 ? \"#BF0000\" : null\r\n    //                     }}\r\n\r\n    //                 >\r\n    //                     {\"S\"}\r\n    //                 </li>\r\n    //             )\r\n\r\n    //             for (let i = 0; i < numberOfElements; i++) {\r\n    //                 const rotate = slice * i + start\r\n    //                 const rotateReverse = rotate * -1\r\n    //                 const decalageCircle=10\r\n\r\n    //                 items.push(\r\n    //                     <li\r\n    //                         key={i}\r\n    //                         style={{\r\n    //                             'transform': 'rotate(' + rotate + 'deg) translate(' + radius + 'px) rotate(' + rotateReverse + 'deg) translate(' + -radius / 2 + 'px) translateY('+decalageCircle+'px)',\r\n    //                             \"backgroundColor\": i + 1 == tour ? \"#BF0000\" : null\r\n    //                         }}\r\n\r\n    //                     >\r\n    //                         {i + 1}\r\n    //                     </li>\r\n\r\n    //                 )\r\n    //             }\r\n    //             return items\r\n    //         }\r\n\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel\"\r\n    //                 style={{\r\n    //                     flex: 1\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"tourParTour\")}\r\n    //                 </label>\r\n    //                 <ul >\r\n    //                     {renderCircleItems()}\r\n    //                 </ul>\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n    //     const renderFeu = () => {\r\n    //         return (\r\n    //             <div\r\n    //                 className=\"case-panel\"\r\n    //                 style={{\r\n    //                     flex: 1\r\n    //                 }}\r\n    //             >\r\n    //                 <label\r\n    //                     className=\"label-title\"\r\n    //                 >\r\n    //                     {getText(\"play\")}\r\n    //                 </label>\r\n\r\n    //                 <div className=\"donnees-container\">\r\n    //                     <div className='feu'>\r\n    //                         <div style={{ backgroundColor: numeroPompier != tour || chrono < 30 ? chrono <= 30  ? \"#ff0000\" : \"#4dff4d\" : \"#9F9F9F\" }}></div>\r\n    //                         <div\r\n    //                             className={chrono <= 30 && chrono>0? \"clignotant\" : \"\"}\r\n    //                             style={{ backgroundColor: numeroPompier == tour ? chrono <= 30 ? chrono>0 ? \"#E26F00\" :  \"#ff0000\" : \"#4dff4d\" : \"#9F9F9F\" }}\r\n    //                         ></div>\r\n    //                     </div>\r\n    //                     <span className=\"case-value\" style={{\r\n    //                         marginTop: \"10%\",\r\n    //                         width: \"100%\",\r\n    //                         maxWidth: \"100%\"\r\n    //                     }} >\r\n    //                         {(Math.floor(chrono / 60)).toString().padStart(2, \"0\") + \" : \"}\r\n    //                         <span style={{ color: chrono <= 30 ? \"red\" : \"inherit\", marginLeft: 5 }}> {\" \" + (chrono % 60).toString().padStart(2, \"0\")} </span>\r\n    //                     </span>\r\n    //                 </div>\r\n\r\n\r\n\r\n\r\n\r\n    //             </div>\r\n    //         )\r\n    //     }\r\n\r\n \r\n\r\n\r\n\r\n    const renderDisconnect = () => {\r\n        return (\r\n            <div\r\n                className=\"btn-panel-droite\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n\r\n                {developpe ?\r\n\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        // className={classes.button}\r\n                        onClick={()=>{\r\n                            setDeveloppe(false)\r\n                            handleDisconnect()\r\n                        }}\r\n                        startIcon={\r\n                            <ExitToAppOutlinedIcon\r\n                                fontSize=\"large\"\r\n                            />}\r\n                    >\r\n                        Se déconnecter\r\n                    </Button>\r\n                    :\r\n                    // <IconButton aria-label=\"delete\" variant=\"contained\"\r\n                    //     color=\"primary\">\r\n                    <div>\r\n                        <ExitToAppOutlinedIcon\r\n                            fontSize=\"small\"\r\n                            // color=\"primary\"\r\n                        />\r\n                        </div>\r\n                    // </IconButton>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderMessage = () => {\r\n        return (\r\n            <div\r\n                className=\"btn-panel-droite\"\r\n                style={{\r\n                    flex: 1\r\n                }}\r\n            >\r\n\r\n                {developpe ?\r\n\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={true}\r\n                        startIcon={\r\n                            <ChatOutlinedIcon\r\n                                fontSize=\"large\"\r\n                            />}\r\n                    >\r\n                        Messagerie\r\n                    </Button>\r\n                    :\r\n                    <div>\r\n                        <ChatOutlinedIcon\r\n                            fontSize=\"small\"\r\n                            // color=\"gray\"\r\n                        />\r\n                        </div>\r\n                    // </IconButton>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        configuration != null ?\r\n            <div className=\"bandeau-droite-inter\"\r\n                onMouseEnter={() => setDeveloppe(true)}\r\n                onMouseLeave={() => setDeveloppe(false)}\r\n            >\r\n                {renderDisconnect()}\r\n                {renderMessage()}\r\n            </div>\r\n            :\r\n            null\r\n\r\n    );\r\n}\r\n\r\nexport default InterBandeauDroite;","import \"../styles/App.css\"\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport PlayAPI from \"../API/PlayAPI\"\r\nimport InterBandeauTop from \"../components/interfaceJoueur/InterBandeauTop\"\r\nimport InterBandeauBottom from \"../components/interfaceJoueur/InterBandeauBottom\"\r\nimport Grille from \"../components/interfaceJoueur/Grille\"\r\nimport InterInterventions from \"../components/interfaceJoueur/InterInterventions\"\r\nimport { useHistory } from 'react-router-dom';\r\nimport io from 'socket.io-client'\r\n\r\nimport cookie from 'react-cookies'\r\nimport InterBandeauDroite from \"../components/interfaceJoueur/InterBandeauDroite\"\r\n\r\nimport { Typography } from \"@material-ui/core\"\r\nimport ContentsAPI from \"../API/ContentsAPI\"\r\n\r\n\r\nconst InterInterface = () => {\r\n\r\n  const history = useHistory()\r\n\r\n  const user = cookie.load(\"user\")\r\n  const handleDisconnect = () => {\r\n    cookie.save('user', \"disconnected\", {\r\n      path: '/',\r\n      maxAge: 60 * 60 * 1.5, //sec\r\n    })\r\n    history.push('/login');\r\n  }\r\n\r\n  if (user === null || user === undefined || user==\"disconnected\") history.push(\"/login\");\r\n  if(user !== null && user !== undefined && user.role!==undefined && !user.role.includes(\"INTER\")) handleDisconnect()\r\n  const [play,setPlay]=useState(false)\r\n\r\n\r\n  const [numPompier, setNumPompier] = useState(0)\r\n  const [currentPomp, setCurrentPomp] = useState(null)\r\n  const [currentTour, setCurrentTour] = useState(null)\r\n  const [currentCycle, setCurrentCycle] = useState(null)\r\n  const [currentSequence, setCurrentSequence] = useState(null)\r\n\r\n  const [session, setSession] = useState(user !== null && user !== undefined ? user.session : null)\r\n  const [equipe, setEquipe] = useState(user !== null && user !== undefined ?  user.equipe : null)\r\n  const [chrono, setChrono]=useState(null)\r\n  const [vue, setVue] = useState(\"operations\")\r\n\r\n\r\n\r\n  const [configuration, setConfiguration] = useState(null)\r\n\r\n\r\n\r\n  const [couts, setCouts] = useState(null)\r\n\r\n\r\n\r\n  const [resultats, setResultats] = useState({\r\n    Decedes: 0,\r\n    Sauves: 0,\r\n    Marqueur: 0\r\n  })\r\n\r\n\r\n  const [budget, setBudget] = useState({\r\n    sequence: 0,\r\n    depense: 0\r\n  })\r\n\r\n\r\n  const [cycles, setCycles] = useState(null)\r\n\r\n  useEffect(() => {\r\n\r\n    if (configuration != null) {\r\n\r\n      setCouts({\r\n        interventions: {\r\n          coutInterDeplacement: configuration.coutInterDeplacement.valeur,\r\n          coutInterDeplacementHab: configuration.coutInterDeplacementHab.valeur,\r\n          coutInterFeu: configuration.coutInterFeu.valeur,\r\n          coutInterFeuFum: configuration.coutInterFeuFum.valeur,\r\n          coutInterFum: configuration.coutInterFum.valeur,\r\n          coutInterMarqueur: configuration.coutInterMarqueur.valeur,\r\n          coutInterPorte: configuration.coutInterPorte.valeur,\r\n          coutInterHab: configuration.coutInterHabitant.valeur,\r\n        },\r\n        equipements: {\r\n          coutEqFeu: configuration.coutEqFeu.valeur,\r\n          coutEqFeuFum: configuration.coutEqFeuFum.valeur,\r\n          coutEqFum: configuration.coutEqFum.valeur,\r\n          coutEqMarqueur: configuration.coutEqMarqueur.valeur,\r\n\r\n        }\r\n      })\r\n      setBudget({\r\n        interventions:{\r\n          sequence: configuration.budgetDefaultInter.valeur,\r\n          depense: 0\r\n        },\r\n        equipements:{\r\n          sequence: configuration.budgetDefaultInter.valeur,\r\n          depense: 0\r\n        }\r\n        \r\n      })\r\n\r\n      if (cycles != null) {\r\n        initInfos(cycles)\r\n      }\r\n\r\n    }\r\n  }, [configuration])\r\n\r\n\r\n\r\n  const [budgetSim, setBudgetSim] = useState(null)\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (cycles != null) {\r\n      // console.log(\"save bdg init\")\r\n      PlayAPI.saveBudgetsPompInit(cycles, session, equipe).then(()=>{\r\n        if (configuration != null) {\r\n          initInfos(cycles)\r\n        }\r\n  \r\n        if(budgetSim==null || budgetSim.interventions==undefined || budgetSim.interventions.numCycle!==(cycles.interventions.length) % 2 + 1 || budgetSim.equipements.numCycle!==(cycles.equipements.length) % 2 + 1){\r\n          setBudgetSim({\r\n            interventions: {\r\n              numSeq: cycles.interventions.length > 1 ? cycles.interventions.length % 2 == 0 ? cycles.interventions[cycles.interventions.length - 1].numSeq + 1 : cycles.interventions[cycles.interventions.length - 1].numSeq : 1,\r\n              numCycle: (cycles.interventions.length) % 2 + 1,\r\n              pomp1: 0,\r\n              pomp2: 0,\r\n              pomp3: 0,\r\n              pomp4: 0,\r\n              pomp5: 0,\r\n              pomp6: 0,\r\n            },\r\n            equipements: {\r\n              numSeq: cycles.equipements.length > 1 ? cycles.equipements.length % 2 == 0 ? cycles.equipements[cycles.equipements.length - 1].numSeq + 1 : cycles.equipements[cycles.equipements.length - 1].numSeq : 1,\r\n              numCycle: (cycles.equipements.length) % 2 + 1,\r\n              Feu: {\r\n                pomp1: 0,\r\n                pomp2: 0,\r\n                pomp3: 0,\r\n                pomp4: 0,\r\n                pomp5: 0,\r\n                pomp6: 0,\r\n              },\r\n              FeuFum: {\r\n                pomp1: 0,\r\n                pomp2: 0,\r\n                pomp3: 0,\r\n                pomp4: 0,\r\n                pomp5: 0,\r\n                pomp6: 0,\r\n              },\r\n              Fum: {\r\n                pomp1: 0,\r\n                pomp2: 0,\r\n                pomp3: 0,\r\n                pomp4: 0,\r\n                pomp5: 0,\r\n                pomp6: 0\r\n              },\r\n              Marqueur: {\r\n                pomp1: 0,\r\n                pomp2: 0,\r\n                pomp3: 0,\r\n                pomp4: 0,\r\n                pomp5: 0,\r\n                pomp6: 0,\r\n              },\r\n            },\r\n          })\r\n      }\r\n    })\r\n    }\r\n\r\n\r\n    // console.log(cycles.equipements)\r\n  }, [cycles])\r\n\r\n  const [validated, setValidated] = useState({\r\n    interventions:false,\r\n    equipements:false\r\n    \r\n  })\r\n  // const [page, setPage] = useState({\r\n  //   interventions: 0,\r\n  //   equipements: 0\r\n  // })\r\n\r\n\r\n\r\n  const isLoading = useRef(false)\r\n\r\n  // INITIALISATION DE LA CARTE\r\n\r\n  const [carte, setCarte] = useState([\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n  ])\r\n\r\n  // const [carte, setCarte] = useState([])\r\n\r\n  const [nbLignesGrille, setNbLignesGrille] = useState(0)\r\n  const [nbColonnesGrille, setNbColonnesGrille] = useState(0)\r\n  const [position, setPosition] = useState(null)\r\n\r\n\r\n  const [mursH, setMursH] = useState([\r\n    [1, 1, 1, 1, 1, 1, 2, 6, 1, 1, 1, 1, 2, 5, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 2, 6, 1, 6, 2, 1, 1, 1, 5, 2, 1, 1],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1]\r\n  ])\r\n\r\n  const [mursV, setMursV] = useState([\r\n    [1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [5, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 2],\r\n    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 5]\r\n  ])\r\n\r\n\r\n  const getNombreMarqueur = (mursH, mursV) => {\r\n    let nbMarqueur = 0\r\n    mursH.forEach(ligne => {\r\n      ligne.forEach(valeur => {\r\n        if (valeur == 3) nbMarqueur = nbMarqueur + 1\r\n        if (valeur == 4) nbMarqueur = nbMarqueur + 2\r\n      })\r\n    })\r\n    mursV.forEach(ligne => {\r\n      ligne.forEach(valeur => {\r\n        if (valeur == 3) nbMarqueur = nbMarqueur + 1\r\n        if (valeur == 4) nbMarqueur = nbMarqueur + 2\r\n      })\r\n    })\r\n    return nbMarqueur\r\n  }\r\n\r\n  // GET PLAY PARAMETERS \r\n\r\n\r\n\r\n  const initInfos = (cycles) => {\r\n    if (cycles !== null && configuration !== null) {\r\n      console.log(\"init infos\")\r\n      const lastCycleEq = [...cycles.equipements].sort((a, b) => (a.numSeq - b.numSeq) * 100 + a.numCycle - b.numCycle)[[...cycles.equipements].length - 1]\r\n      const lastCycleInter = [...cycles.interventions].sort((a, b) => (a.numSeq - b.numSeq) * 100 + a.numCycle - b.numCycle)[[...cycles.interventions].length - 1]\r\n\r\n      var val = {\r\n        interventions: false,\r\n        equipements: false\r\n      }\r\n\r\n      if (lastCycleInter !== null && lastCycleInter !== undefined && lastCycleInter.numSeq == currentSequence && lastCycleInter.numCycle == currentCycle) val.interventions = true\r\n      if (lastCycleEq !== null && lastCycleEq !== undefined && lastCycleEq.numSeq == currentSequence && lastCycleEq.numCycle == currentCycle) val.equipements = true\r\n      setValidated(val)\r\n\r\n      var b = {\r\n        interventions:{\r\n          sequence: configuration.budgetDefaultInter.valeur,\r\n          depense: getBudgetTot(budgetSim,\"interventions\")\r\n        },\r\n        equipements:{\r\n          sequence: configuration.budgetDefaultInter.valeur,\r\n          depense: getBudgetTot(budgetSim,\"equipements\")\r\n        }\r\n        \r\n      }\r\n\r\n\r\n      setBudget(b)\r\n    }\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    initInfos(cycles)\r\n  }, [couts])\r\n\r\n\r\n  // useEffect(()=>{\r\n  //   console.log(chrono)\r\n  // },[chrono])\r\n\r\n\r\n\r\n  const getPlayState = async (session, equipe) => {\r\n    \r\n    if (!isLoading.current && configuration != null) {\r\n      \r\n      isLoading.current = true\r\n      console.log(\"getplaystate\")\r\n      const currentPlayState = await PlayAPI.getPlayState(session, equipe)\r\n      console.log(currentPlayState)\r\n      if (Object.keys(currentPlayState).length > 0) {\r\n\r\n        // console.log(currentPlayState)\r\n        setCurrentPomp(parseInt(JSON.parse(currentPlayState.currentPomp.valeur)))\r\n        setCurrentTour(parseInt(JSON.parse(currentPlayState.currentTour.valeur)))\r\n        setCurrentCycle(parseInt(JSON.parse(currentPlayState.currentCycle.valeur)))\r\n        setCurrentSequence(parseInt(JSON.parse(currentPlayState.currentSequence.valeur)))\r\n        const mursH = JSON.parse(currentPlayState.mursH.valeur)\r\n        const mursV = JSON.parse(currentPlayState.mursV.valeur)\r\n        setPlay(JSON.parse(currentPlayState.play.valeur))\r\n        setMursH(mursH)\r\n        setMursV(mursV)\r\n        setCarte(JSON.parse(currentPlayState.carte.valeur))\r\n        setResultats({\r\n          Decedes: parseInt(JSON.parse(currentPlayState.resultatsDecedes.valeur)),\r\n          Sauves: parseInt(JSON.parse(currentPlayState.resultatsSauves.valeur)),\r\n          Marqueur: getNombreMarqueur(mursH, mursV)\r\n        })\r\n        setCycles(JSON.parse(currentPlayState.budgetsPompInit.valeur))\r\n        const c = parseInt(JSON.parse(currentPlayState.currrentChrono.valeur))\r\n        if (configuration !== null && c <= configuration.chronoTourInter.valeur && parseInt(JSON.parse(currentPlayState.currentPomp.valeur)) == numPompier) {\r\n          setChrono(c)\r\n        } else {\r\n          setChrono(null)\r\n          // console.log(\"chrono\")\r\n        }\r\n        \r\n        setPlay(JSON.parse(currentPlayState.play.valeur))\r\n      }else{\r\n        console.log(\"error\")\r\n      }\r\n      // getPositionFromCarte(JSON.parse(currentPlayState.carte.valeur))\r\n      isLoading.current = false\r\n    }else{\r\n      console.log(configuration)\r\n    }\r\n\r\n  }\r\n\r\n  // useEffect(()=>{\r\n  //   console.log(currentPomp)\r\n  // },[currentPomp])\r\n\r\n\r\n  useEffect(() => {\r\n    // console.log(carte)\r\n    if (carte.length > 0) {\r\n      setNbLignesGrille(carte.length)\r\n      setNbColonnesGrille(carte[0].length)\r\n      setPosition([carte.length + 1, carte[0].length + 1])\r\n    }\r\n\r\n  }, [carte])\r\n\r\n  useEffect(()=>{\r\n    console.log(configuration)\r\n  },[configuration])\r\n  useEffect(() => {\r\n    if(configuration===null) getPlayParameters()\r\n    if (session != null && equipe != null && currentTour == null) {\r\n      \r\n      if (!isLoading.current && configuration!==null) getPlayState(session, equipe)\r\n      \r\n      // getPositionFromCarte()\r\n    }\r\n  }, [session, equipe, numPompier,configuration])\r\n\r\n  const getPlayParameters = async () => {\r\n    console.log(\"getPlay Parameters\")\r\n    const param =await PlayAPI.getConfiguration(session)\r\n    setConfiguration(param)\r\n    console.log(param)\r\n  }\r\n\r\n\r\n\r\n\r\n  const getBudgetTot = (budgetSim,type) => {\r\n    let sum = 0\r\n\r\n    if (couts !== null) {\r\n\r\n\r\n      if(type==\"interventions\"){\r\n        // if (budgetSim !== null && budgetSim !== undefined) {\r\n        //   const lastCycleInter = [...cycles.interventions].sort((a, b) => (a.numSeq - b.numSeq) * 100 + a.numCycle - b.numCycle)[[...cycles.interventions].length - 1]\r\n        //   if (budgetSim.interventions.numSeq == currentSequence && budgetSim.interventions.numCycle > currentCycle || lastCycleInter === undefined) {\r\n        //     Object.keys(budgetSim.interventions).forEach((key) => {\r\n        //       if (key != \"numCycle\" && key != \"numSeq\") {\r\n        //         console.log(\"test\")\r\n        //         sum += budgetSim.interventions[key]\r\n        //       }\r\n        //     })\r\n        //   }\r\n\r\n\r\n          \r\n        // }\r\n        cycles.interventions.forEach((c) => {\r\n          if (c.numSeq == currentSequence) {\r\n            Object.keys(c).forEach((key) => {\r\n              if (key != \"numCycle\" && key != \"numSeq\") {\r\n                // console.log(c[key])\r\n                sum += c[key]\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }else{\r\n\r\n\r\n        const lastCycleEq = [...cycles.equipements].sort((a, b) => (a.numSeq - b.numSeq) * 100 + a.numCycle - b.numCycle)[[...cycles.equipements].length - 1]\r\n      \r\n\r\n        // if (budgetSim.equipements.numSeq == currentSequence && budgetSim.equipements.numCycle > currentCycle || lastCycleEq === undefined) {\r\n        //   Object.keys(budgetSim.equipements).forEach((key) => {\r\n        //     if (key != \"numCycle\" && key != \"numSeq\") {\r\n        //       Object.values(budgetSim.equipements[key]).forEach(value => {\r\n        //         sum += value * couts.equipements[\"coutEq\" + key]\r\n        //       })\r\n        //     }\r\n        //   })\r\n        // }\r\n\r\n        cycles.equipements.forEach((c) => {\r\n          if (c.numSeq == currentSequence) {\r\n            Object.keys(c).forEach((key) => {\r\n              if (key != \"numCycle\" && key != \"numSeq\") {\r\n                Object.values(c[key]).forEach((v) => {\r\n                  sum += couts.equipements[\"coutEq\" + key] * v\r\n                })\r\n              }\r\n  \r\n            })\r\n          }\r\n\r\n      \r\n        })\r\n\r\n      }\r\n\r\n    }\r\n    return sum\r\n  }\r\n  // useEffect(()=>{\r\n  //   if(budgetSim!==null){\r\n  //     console.log(budgetSim.interventions)\r\n  //   }\r\n    \r\n  // },[budgetSim])\r\n\r\n\r\n  const handleBudgetChange = (type, newBudget) => {\r\n    var bSim = { ...budgetSim }\r\n    bSim[type] = newBudget\r\n    setBudgetSim(bSim)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(validated.interventions && validated.equipements && numPompier == currentPomp) checkNouveauTour()\r\n  },[validated,vue])\r\n\r\n  const handleClicValidated = (type,bool) => {\r\n    if(bool){\r\n      var v = { ...validated }\r\n      v[type] = true\r\n      setValidated(v)\r\n  \r\n      // var p = { ...page }\r\n      // if (type == \"interventions\") p[type] += 1\r\n      // if (type == \"equipements\") p[type] += 1\r\n      // setPage(p)\r\n  \r\n      var c = { ...cycles }\r\n      c[type].push(budgetSim[type])\r\n      setCycles(c)\r\n      setChrono(null)\r\n    }else{ // RETOUR\r\n      console.log(\"clic retour vue \",type)\r\n\r\n      var c = {...cycles}\r\n      if(c[type]!==undefined){\r\n        var bSim = {...budgetSim}\r\n        bSim[type]=c[type][c[type].length-1]\r\n        console.log(bSim)\r\n        setBudgetSim(bSim)\r\n        c[type].pop()\r\n        setCycles(c)\r\n  \r\n  \r\n        var v = { ...validated }\r\n        v[type] = false\r\n        setValidated(v)\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n\r\n\r\n  const nouveauTour =  () => {\r\n    isLoading.current=true\r\n    if (configuration != null) {\r\n      // if(bool){\r\n      console.log(\"save bdg fin\")\r\n      PlayAPI.saveBudgetsPompFin(cycles, session, equipe).then((res)=>{\r\n        let prochainPomp = 1\r\n        let prochainTour = currentTour\r\n        let prochainCycle = currentCycle\r\n        let prochaineSequence = currentSequence\r\n        let prochainChrono = configuration.chronoTourTact.valeur\r\n  \r\n  \r\n  \r\n        // if(numPompier==configuration.nbPompEquipe.valeur){ // DERNIER POMP DU TOUR\r\n        //   if(currentTour==configu  ration.nbToursParCycle.valeur){ // SEND TO INTER\r\n        //     prochainTour = 1\r\n        //     prochainPomp=0 // A CHANGER AVEC STRATEGIQUE\r\n  \r\n        //     if(prochainCycle==configuration.nbCyclesParSequence.valeur){\r\n        //       prochainCycle=1\r\n        //       prochaineSequence=prochaineSequence+1\r\n        //     }else{\r\n        //       prochainCycle=prochainCycle+1\r\n        //     }\r\n  \r\n  \r\n        //   }else{ // PAS DERNIER TOUR DU CYCLE\r\n        //     console.log(\"pas dernier tour\")\r\n        //     prochainPomp=1\r\n        //     prochainTour=prochainTour+1\r\n  \r\n  \r\n        //   }\r\n  \r\n        // }\r\n        \r\n         PlayAPI.nouveauTour(socket,prochainPomp, carte, mursH, mursV, prochaineSequence, prochainCycle, prochainTour, resultats.Decedes, resultats.Sauves, session, equipe,prochainChrono).then(()=>{\r\n          console.log(\"nouveau tour\")\r\n          isLoading.current=false\r\n         })\r\n        \r\n         \r\n        \r\n        // }else{\r\n        //   // retourAction()\r\n        // }\r\n      })\r\n      \r\n         \r\n        \r\n      \r\n\r\n     \r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  const checkNouveauTour =  () => {\r\n    console.log(\"check nv tour\")\r\n    if (validated.interventions && validated.equipements && numPompier == currentPomp) {\r\n      if(!isLoading.current){\r\n        nouveauTour()\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  // SOCKETS\r\n  const [socket, setSocket] = useState(null)\r\n  useEffect(() => {\r\n    if (socket == null && configuration!==null) {\r\n      const s = io(\"https://www.back.leaders-extreme.fr\")\r\n      s.emit(\"connecti\",JSON.stringify({\r\n        session:session,\r\n        equipe:equipe\r\n      }))\r\n      \r\n      s.on('changementTour', (data) => {\r\n\r\n      \r\n      // console.log(currentPomp != data.currentPomp)\r\n      if (currentPomp != data.currentPomp || currentCycle !== data.currentCycle || currentTour !== data.currentTour || currentSequence !== data.currentSequence) {        \r\n\r\n        getPlayState(session, equipe)\r\n      }\r\n\r\n\r\n\r\n    })\r\n\r\n    s.on('startStopPartie', (data) => {\r\n      setPlay(data.start)\r\n    });\r\n\r\n    // socket.on('revealHabitant',(data)=>{\r\n    //   if(carte!==null && carte.length>0){\r\n    //     // console.log(carte[data.y][data.x])\r\n    //     // console.log(carte[data.y])\r\n    //     if(carte[data.y][data.x]==20){\r\n    //       // console.log([data.y,data.x])\r\n    //       updateCarte([data.y,data.x],data.type)\r\n    //       // console.log(\"socket hab\")\r\n    //       // console.log(data)\r\n    //     }\r\n    //   }\r\n    // })\r\n    setSocket(s)\r\n  }\r\n  },[socket,configuration]);\r\n\r\n  \r\n  const [textes, setTextes] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const getTextes = async () => {\r\n      const textes = ContentsAPI.getTexts(\"jeuInterInterface\").then(\r\n        (res) => { setTextes(res) }\r\n      )\r\n    }\r\n    if (textes == null) {\r\n      getTextes()\r\n    }\r\n    // console.log(textes)\r\n  }, [textes])\r\n\r\n\r\n\r\n\r\n  const getText = (name) => {\r\n    if (textes == null) {\r\n      return name\r\n    } else {\r\n      try {\r\n        return textes[name].contenu\r\n      } catch (error) {\r\n        // console.log(textes)\r\n        return name\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  const renderAttenteLancement = () => {\r\n\r\n    return (\r\n      <div style={{ color: \"gray\", textAlign: \"center\", fontSize: 20 }}>\r\n        <Typography >{getText('attenteLancement')}</Typography>\r\n        <Typography >{getText('infoLancement')}</Typography>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  const handleViewChange = (event, newValue) => {\r\n    if (newValue != null) {\r\n      setVue(newValue)\r\n    }\r\n  }\r\n  // useEffect(() => {\r\n  //   console.log(vue)\r\n  // }, [vue])\r\n\r\n  console.log(play)\r\n  return (\r\n\r\n    carte.length > 0 && position != null && configuration !== null && configuration !== undefined && budget != null && budget != undefined && couts!==null && couts!=undefined && play?\r\n\r\n      <div style={{ position: \"absolute\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", flex: 1, width: \"100%\", height: \"100%\" }}>\r\n        <InterBandeauTop\r\n          // stocks={stocks}\r\n          numeroPompier={numPompier}\r\n          numEquipe={equipe}\r\n          numSession={session}\r\n          sequence={currentSequence}\r\n          cycle={currentCycle}\r\n          tour={currentTour}\r\n          pomp={currentPomp}\r\n          configuration={configuration}\r\n          handleViewChange={handleViewChange}\r\n          vue={vue}\r\n          interventionsValidated={validated.interventions}\r\n          equipementsValidated={validated.equipements}\r\n          play={play}\r\n          handleClicValidated={handleClicValidated}\r\n          chronoInit={chrono}\r\n          validated={validated}\r\n        />\r\n        {\r\n          vue == \"operations\" ?\r\n            <Grille\r\n              nbColonnesGrille={nbColonnesGrille}\r\n              nbLignesGrille={nbLignesGrille}\r\n              carte={carte}\r\n              position={position}\r\n              mursH={mursH}\r\n              mursV={mursV}\r\n            />\r\n            : null\r\n        }\r\n\r\n\r\n        {\r\n          vue == \"interventions\" && cycles != null ?\r\n\r\n            <InterInterventions\r\n              budget={{...budget.interventions}}\r\n              cycles={[...cycles.interventions]}\r\n              handleBudgetChange={handleBudgetChange}\r\n              type=\"interventions\"\r\n              currentCycle={currentCycle}\r\n              currentSequence={currentSequence}\r\n              budgetSim={{ ...budgetSim.interventions }}\r\n              couts={couts}\r\n              nbCycleParSeq={configuration !== null ? configuration.nbCyclesParSequence.valeur : 0}\r\n              configuration={configuration}\r\n            // page={page.interventions}\r\n            />\r\n            : null\r\n        }\r\n\r\n        {\r\n          vue == \"equipements\" && cycles != null ?\r\n\r\n            <InterInterventions\r\n              budget={{...budget.equipements}}\r\n              cycles={[...cycles.equipements]}\r\n              handleBudgetChange={handleBudgetChange}\r\n              type=\"equipements\"\r\n              currentCycle={currentCycle}\r\n              currentSequence={currentSequence}\r\n              budgetSim={{ ...budgetSim.equipements }}\r\n              couts={couts}\r\n              nbCycleParSeq={configuration !== null ? configuration.nbCyclesParSequence.valeur : 0}\r\n              configuration={configuration}\r\n            // page={page.equipements}\r\n            />\r\n            : null\r\n        }\r\n\r\n\r\n\r\n\r\n        <InterBandeauBottom\r\n          numeroPompier={numPompier}\r\n          tour={currentTour}\r\n          pomp={currentPomp}\r\n          resultats={resultats}\r\n          vue={vue}\r\n          couts={couts}\r\n          budget={vue === \"interventions\" ? budget.interventions : budget.equipements}\r\n          validated={validated}\r\n          handleClicValidated={handleClicValidated}\r\n          equipe={equipe}\r\n        />\r\n        <InterBandeauDroite\r\n          handleDisconnect={handleDisconnect}\r\n          configuration={configuration}\r\n        />\r\n      </div>\r\n\r\n      : renderAttenteLancement()\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default InterInterface;\r\n\r\n","\nconst urlBack = \"https://www.back.leaders-extreme.fr\";\n\nexport default {\n    login: async(dataConnexion)=>{\n        \n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(dataConnexion)\n        };\n\n        const response = await  fetch(urlBack+\"/login\", requestOptions)\n\n        return  await response.json()\n    },\n    getNbEquipes:async(session)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session\n            })\n        };\n\n        const response = await  fetch(urlBack+\"/getNbEquipes\", requestOptions)\n\n        return  await response.json()\n    },\n    getUsers:async(session)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session\n            })\n        };\n\n        const response = await  fetch(urlBack+\"/getUsers\", requestOptions)\n\n        return  await response.json()\n    },\n    createUsers:async(session,nbEquipes,users)=>{\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                session:session,\n                nbEquipes:nbEquipes,\n                users:users\n            })\n        };\n\n        const response = await  fetch(urlBack+\"/createUsers\", requestOptions)\n\n        return  await response.json()\n    },\n};","import '../styles/App.css';\r\nimport '../styles/Login.css'\r\nimport { useEffect, useState } from 'react';\r\nimport { TextField, Button, Divider, Typography } from \"@material-ui/core\"\r\nimport UsersAPI from \"../API/UsersAPI\"\r\nimport ContentsAPI from \"../API/ContentsAPI\"\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nimport cookie from 'react-cookies'\r\n\r\nconst Login = ({\r\n  handleLogin,\r\n  userConnected,\r\n  handleDisconnectApp\r\n}) => {\r\n\r\n  const history = useHistory()\r\n\r\n  const [user, setUser] = useState(userConnected)\r\n  const [error,setError]=useState(null)\r\n\r\n  const handleConnect = async (e) => {\r\n    e.preventDefault()\r\n    const response = await UsersAPI.login(dataConnection)\r\n    if (response.id != null) {\r\n      setError(null)\r\n      \r\n      setUser(response)\r\n      \r\n    } else {\r\n      setError(\"erreurConnexion\")\r\n      handleLogin(null)\r\n    }\r\n  }\r\n  const [textes, setTextes] = useState(null)\r\n\r\n  useEffect(() => {\r\n      const getTextes = async () => {\r\n          const textes = ContentsAPI.getTexts(\"jeuLogin\").then(\r\n              (res) => { setTextes(res) }\r\n          )\r\n      }\r\n      if (textes == null) {\r\n\r\n          getTextes()\r\n          \r\n      }\r\n  }, [textes])\r\n\r\n\r\n  const getText = (name) => {\r\n    if (textes == null) {\r\n        return name\r\n    } else {\r\n        try {\r\n            return textes[name].contenu\r\n        } catch (error) {\r\n            return name\r\n        }\r\n    }\r\n}\r\n\r\n  useEffect(() => {\r\n    \r\n    if (user != null ) {\r\n      if(cookie.load('user')!==\"disconnected\"){\r\n        if(cookie.load('user')!=null ) cookie.remove('user')\r\n        cookie.save('user', user, { \r\n          path: '/',\r\n          maxAge: 60*60*1.5, //sec\r\n        })\r\n        handleLogin(user)\r\n        if (user.role.includes(\"TACT\")) {\r\n          history.push(\"/tact\");\r\n        } else if (user.role.includes(\"INTER\")) {\r\n          history.push(\"/inter\");\r\n        }else if (user.role.includes(\"ADMIN\")) {\r\n          history.push(\"/admin\");\r\n        }\r\n      }else{\r\n        setUser(null)\r\n        cookie.remove('user', { path: '/' })\r\n        handleDisconnectApp()\r\n      }\r\n      \r\n\r\n    }\r\n  }, [user])\r\n\r\n  const [dataConnection, setDataConnection] = useState({\r\n    identifiant: \"\",\r\n    mdp: \"\"\r\n  })\r\n\r\n\r\n\r\n  const onChange = (e) => {\r\n    setError(null)\r\n    var data = {\r\n      identifiant: dataConnection.identifiant,\r\n      mdp: dataConnection.mdp\r\n    }\r\n    data[e.target.name] = e.target.value\r\n    setDataConnection(data)\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"body-login\"\r\n      >\r\n\r\n        <Typography variant=\"h1\" color=\"primary\">Connexion</Typography>\r\n        {/* <Typography variant=\"subtitle1\">Texte à ajouter</Typography> */}\r\n\r\n\r\n\r\n        <div\r\n          className=\"login-image-container\"\r\n        >\r\n          <img\r\n            src='./assets/Login.png'\r\n          />\r\n          <Divider orientation=\"vertical\" flexItem />\r\n          <form method=\"post\" className=\"login-form\" >\r\n            <TextField\r\n              required\r\n              label=\"Identifiant\"\r\n              variant=\"outlined\"\r\n              name={\"identifiant\"}\r\n              value={dataConnection.identifiant}\r\n              onChange={onChange}\r\n              className=\"login-field\"\r\n              color=\"primary\"\r\n              inputProps={{style: {fontSize: 25}}}\r\n              InputLabelProps={{style: {fontSize: 20}}}\r\n            />\r\n            <TextField\r\n              required\r\n              label=\"Mot de passe\"\r\n              variant=\"outlined\"\r\n              name=\"mdp\"\r\n              value={dataConnection.mdp}\r\n              onChange={onChange}\r\n              type=\"password\"\r\n              className=\"login-field\"\r\n              color=\"primary\"\r\n              inputProps={{style: {fontSize: 25}}}\r\n              InputLabelProps={{style: {fontSize: 20}}}\r\n              onKeyUp={(event) => {\r\n                if (!event.ctrlKey && event.key== 'Enter')\r\n                  handleConnect(event)\r\n                }}\r\n            />\r\n            <Typography  color=\"primary\">{textes!=null && error!==null ? getText(error) : \"\"}</Typography>\r\n            <div className=\"login-buttons-container\">\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={() => history.push(\"/\")}\r\n                className=\"login-button retour\"\r\n                color=\"default\"\r\n                disabled={true}\r\n                \r\n              >\r\n                Retour\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={handleConnect}\r\n                className=\"login-button connect\"\r\n                color=\"primary\"\r\n\r\n              >\r\n                Se connecter\r\n              </Button>\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n\r\n      </div>\r\n      </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import '../styles/App.css';\r\nimport '../styles/Login.css'\r\nimport { useEffect, useState } from 'react';\r\nimport { TextField, Button, Divider, Typography } from \"@material-ui/core\"\r\nimport UsersAPI from \"../API/UsersAPI\"\r\nimport ContentsAPI from \"../API/ContentsAPI\"\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nimport cookie from 'react-cookies'\r\n\r\nconst Accueil = ({\r\n}) => {\r\n\r\n  const history = useHistory()\r\n\r\n\r\n  const handleRedirect = async (e) => {\r\n    e.preventDefault()\r\n    history.push(\"/login\")\r\n  }\r\n\r\n\r\n\r\n  return (\r\n      <div\r\n        className=\"body-login\"\r\n      >\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={handleRedirect}\r\n                className=\"login-button connect\"\r\n                color=\"primary\"\r\n\r\n              >\r\n                Lien de connexion\r\n              </Button>\r\n\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Accueil;\r\n","import {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    Redirect\r\n} from \"react-router-dom\";\r\nimport cookie from 'react-cookies'\r\n\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n    const user = cookie.load(\"user\")\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={\r\n                (props) => user !== undefined\r\n                    ? <Component\r\n                     {...props} \r\n                    />\r\n                    : <Redirect to={{\r\n                        pathname: '/login',\r\n                    }} />\r\n            }\r\n        />\r\n    )\r\n}\r\nexport default PrivateRoute","import \"../styles/AdminInterface.css\"\r\nimport \"../styles/App.css\"\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport PlayAPI from \"../API/PlayAPI\"\r\nimport UsersAPI from \"../API/UsersAPI\"\r\n\r\nimport { useHistory } from 'react-router-dom';\r\nimport { TextField, Button, Divider, Typography, TableContainer, TableHead, TableRow, Paper, TableBody, Table, TableCell } from \"@material-ui/core\"\r\nimport io from 'socket.io-client'\r\n\r\nimport cookie from 'react-cookies'\r\nimport { config } from \"react-transition-group\";\r\n\r\nconst AdminInterface = () => {\r\n  // console.log(\"admin\")\r\n  const history = useHistory()\r\n\r\n\r\n  const user = cookie.load(\"user\")\r\n  // console.log(user)\r\n  const handleDisconnect = () => {\r\n    // console.log(\"handleDisconnect\")\r\n    cookie.save('user', \"disconnected\", {\r\n      path: '/',\r\n      maxAge: 60 * 60 * 1.5, //sec\r\n    })\r\n    history.push('/login');\r\n  }\r\n\r\n\r\n  if (user === null || user === undefined || user == \"disconnected\") history.push(\"/login\");\r\n  if (user !== null && user !== undefined && user.role !== undefined && !user.role.includes(\"ADMIN\")) handleDisconnect()\r\n\r\n  const [session, setSession] = useState(user !== null && user !== undefined ? user.session : null)\r\n\r\n  const [configuration, setConfiguration] = useState(null)\r\n  const [manualConfig, setManualConfig] = useState(null)\r\n\r\n  const [lancement, setLancement] = useState(true)\r\n  const isLoading = useRef(false)\r\n\r\n  const [socket, setSocket] = useState(null)\r\n  useEffect(() => {\r\n    if (socket == null && configuration !== null) {\r\n      const s = io(\"https://www.back.leaders-extreme.fr\")\r\n      \r\n      s.on('startStopPartie', (data) => {\r\n        setLancement(!data.start)\r\n        // console.log(!data.start)\r\n      });\r\n\r\n      s.on('connect_error', err => console.log(\"error\",err));\r\n      s.on('connect_failed', err => console.log(\"failed\",err));\r\n      setSocket(s)\r\n    }\r\n  })\r\n\r\n  const getPlayParameters = async () => {\r\n    if (configuration === null) {\r\n      setConfiguration(await PlayAPI.getConfiguration(session))\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    getPlayState(session)\r\n    setManualConfig(configuration)\r\n  }, [configuration])\r\n\r\n  const getPlayState = async (session) => {\r\n\r\n    if (!isLoading.current && configuration != null) {\r\n\r\n      isLoading.current = true\r\n      const currentPlayState = await PlayAPI.getPlayState(session, null)\r\n      if (currentPlayState !== undefined) {\r\n        setLancement(!JSON.parse(currentPlayState.valeur))\r\n      } else {\r\n        console.log(\"error\")\r\n      }\r\n      // getPositionFromCarte(JSON.parse(currentPlayState.carte.valeur))\r\n      isLoading.current = false\r\n    } else {\r\n      // console.log(configuration)\r\n    }\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    getPlayParameters()\r\n  })\r\n\r\n\r\n  const handleClicLancement = async () => {\r\n    await PlayAPI.startStopPartie(socket, session, lancement)\r\n  }\r\n\r\n  const handleClicDisconnect = async () => {\r\n    // console.log(\"handleClic disc\")\r\n    setLancement(true)\r\n    PlayAPI.disconnectUsers(socket, session)\r\n  }\r\n\r\n  const configChange = (evt) => {\r\n    const name = evt.target.name\r\n    const val = evt.target.value\r\n\r\n    if(parseInt(val)>=0){\r\n      var c = { ...manualConfig }\r\n      c[name].valeur = parseInt(val)\r\n      setManualConfig(c)\r\n    }\r\n\r\n    \r\n    // console.log(name,val)\r\n  }\r\n\r\n  // useEffect(() => {\r\n  //   console.log(manualConfig)\r\n  // }, [manualConfig])\r\n\r\n  const handleConfigChange = () => {\r\n    console.log(\"départ\")\r\n    setLancement(true)\r\n    PlayAPI.updateConfig(manualConfig, session).then(() => {\r\n      handleClicDisconnect()\r\n    })\r\n  }\r\n\r\n  const [nbEquipes, setNbEquipes] = useState(null)\r\n\r\n  const countEquipes = async () => {\r\n    const count = (await UsersAPI.getNbEquipes(session)).count\r\n    // console.log(count)\r\n    setNbEquipes(count)\r\n    return count\r\n  }\r\n  const [users, setUsers] = useState(null)\r\n  useEffect(() => {\r\n      if(nbEquipes==null){\r\n        countEquipes()\r\n        getIdents()\r\n      }\r\n      \r\n  }, [nbEquipes])\r\n\r\n  useEffect(()=>{\r\n    countEquipes()\r\n  },[users])\r\n\r\n  const createIdents = async () => {\r\n    // console.log(users)\r\n    \r\n    const us = await UsersAPI.getUsers(session)\r\n    console.log(us)\r\n    setUsers(us)\r\n    UsersAPI.createUsers(session, nbEquipes, us).then(() => {\r\n      handleClicDisconnect()\r\n      getIdents()\r\n      setLancement(true)\r\n    }\r\n    )\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  const getIdents = async () => {\r\n    setUsers(await UsersAPI.getUsers(session))\r\n  }\r\n\r\n  const resetPartie=async()=>{\r\n    // const count = countEquipes()\r\n    // console.log(count)\r\n    // const etats =await  PlayAPI.getGeneralStats(session)\r\n\r\n    handleClicDisconnect()\r\n     PlayAPI.getGeneralStats(session).then((res)=>{\r\n      //  console.log(res)\r\n       PlayAPI.resetPartie(nbEquipes,session,res,manualConfig.chronoTourInter.valeur).then(()=>{\r\n        setLancement(true)\r\n       })\r\n     })\r\n    // PlayAPI.resetPartie(nbEquipes,session)\r\n\r\n  }\r\n\r\n\r\n  const renderUsers = () => {\r\n    if (users !== null) {\r\n      return (\r\n        <TableContainer component={Paper}>\r\n          <Table sx={{ minWidth: 700 }} aria-label=\"customized table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell align=\"center\">Equipe</TableCell>\r\n                <TableCell align=\"center\">Role</TableCell>\r\n                <TableCell align=\"center\">Identifiant</TableCell>\r\n                <TableCell align=\"center\">Mot de passe</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {users.map((u) => (\r\n                <TableRow key={u.identifiant + \" : \" + u.equipe + \" : \" + u.role}>\r\n                  <TableCell align=\"center\">{u.equipe}</TableCell>\r\n                  <TableCell align=\"center\">{u.role}</TableCell>\r\n                  <TableCell align=\"center\">{u.identifiant}</TableCell>\r\n                  <TableCell align=\"center\">{u.mdp}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>)\r\n    }\r\n\r\n    return null\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div\r\n      className=\"body-admin\"\r\n    >\r\n\r\n      <Typography variant=\"h1\" color=\"primary\">Espace administrateur</Typography>\r\n\r\n      <div className=\"admin-buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n\r\n          className=\"admin-button\"\r\n          color={lancement ? \"default\" : \"primary\"}\r\n          onClick={handleClicLancement}\r\n        // disabled={lancement}\r\n        >\r\n          {lancement ? \"Lancer la partie\" : \"Mettre la partie sur pause\"}\r\n        </Button>\r\n        <Divider />\r\n        <Button\r\n          variant=\"contained\"\r\n\r\n          className=\"admin-button\"\r\n          color={\"primary\"}\r\n          onClick={handleClicDisconnect}\r\n        // disabled={lancement}\r\n        >\r\n          {\"Déconnecter les utilisateurs et mettre sur pause\"}\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n\r\n          className=\"admin-button\"\r\n          color={\"primary\"}\r\n          onClick={resetPartie}\r\n        // disabled={lancement}\r\n        >\r\n          {\"Déconnecter les utilisateurs et Relancer la partie\"}\r\n        </Button>\r\n        <Divider />\r\n        {\r\n          manualConfig !== null && manualConfig !== undefined && nbEquipes !== null ?\r\n            <form method=\"post\" className=\"login-form\" >\r\n\r\n              <div className=\"admin-buttons-config-container\">\r\n                <TextField\r\n                  // required\r\n                  label=\"Chrono Intermédiaire (s)\"\r\n                  type=\"number\"\r\n                  // variant=\"outlined\"\r\n                  name={\"chronoTourInter\"}\r\n                  value={manualConfig.chronoTourInter.valeur}\r\n                  onChange={(evt) => configChange(evt)}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n                <TextField\r\n                  // required\r\n\r\n                  type=\"number\"\r\n                  label=\"Chrono Tactique (s)\"\r\n                  // variant=\"outlined\"\r\n                  name={\"chronoTourTact\"}\r\n                  value={manualConfig.chronoTourTact.valeur}\r\n                  onChange={(evt) => configChange(evt)}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n              </div>\r\n              <div className=\"admin-buttons-config-container\">\r\n                <TextField\r\n                  // required\r\n                  label=\"Nombre de séquences\"\r\n                  type=\"number\"\r\n                  // variant=\"outlined\"\r\n                  name={\"nbSequences\"}\r\n                  value={manualConfig.nbSequences.valeur}\r\n                  onChange={(evt) => configChange(evt)}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n                <TextField\r\n                  // required\r\n\r\n                  type=\"number\"\r\n                  label=\"Budget cycle intermédiaire\"\r\n                  // variant=\"outlined\"\r\n                  name={\"budgetDefaultInter\"}\r\n                  value={manualConfig.budgetDefaultInter.valeur}\r\n                  onChange={(evt) => configChange(evt)}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n              </div>\r\n              <div className=\"admin-buttons-config-container\">\r\n\r\n                <TextField\r\n                  // required\r\n\r\n                  type=\"number\"\r\n                  label=\"Nombre de marqueurs max\"\r\n                  // variant=\"outlined\"\r\n                  name={\"nbMarqueursMax\"}\r\n                  value={manualConfig.nbMarqueursMax.valeur}\r\n                  onChange={(evt) => configChange(evt)}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n                <TextField\r\n                  // required\r\n\r\n                  type=\"number\"\r\n                  label=\"Nombre de victimes max\"\r\n                  // variant=\"outlined\"\r\n                  name={\"nbVictimesMax\"}\r\n                  value={manualConfig.nbVictimesMax.valeur}\r\n                  onChange={(evt) => configChange(evt)}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n                <TextField\r\n                  // required\r\n\r\n                  type=\"number\"\r\n                  label=\"Nombre d'habitants à sauver\"\r\n                  // variant=\"outlined\"\r\n                  name={\"nbHabitantsASauver\"}\r\n                  value={manualConfig.nbHabitantsASauver.valeur}\r\n                  onChange={(evt) => configChange(evt)}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n              </div>\r\n              <Button\r\n                variant=\"contained\"\r\n\r\n                className=\"admin-button\"\r\n                color={\"primary\"}\r\n                onClick={handleConfigChange}\r\n              >\r\n                {\"Modifier les paramètres\"}\r\n              </Button>\r\n              <Divider />\r\n\r\n\r\n              <Divider />\r\n              <div className=\"admin-buttons-config-container\">\r\n                <TextField\r\n                  // required\r\n\r\n                  type=\"number\"\r\n                  label=\"Nombre d'équipes\"\r\n                  // variant=\"outlined\"\r\n                  name={\"nbEquipes\"}\r\n                  value={nbEquipes}\r\n                  onChange={evt =>{ \r\n                    if (parseInt(evt.target.value)>=0) setNbEquipes(parseInt(evt.target.value))\r\n                  }}\r\n                  className=\"login-field\"\r\n                  color=\"primary\"\r\n                  inputProps={{ style: { fontSize: 25 } }}\r\n                  InputLabelProps={{ style: { fontSize: 20 } }}\r\n                />\r\n                <Button\r\n                  variant=\"contained\"\r\n                  disabled={users == null}\r\n                  className=\"admin-button\"\r\n                  color={\"primary\"}\r\n                  onClick={createIdents}\r\n                >\r\n                  {\"Générer les identifiants\"}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n            : null\r\n        }\r\n\r\n\r\n        <div>\r\n          {renderUsers()}\r\n        </div>\r\n\r\n\r\n\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminInterface;\r\n\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nimport MyTheme from './styles/MyTheme';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\n\r\nimport TactInterface from \"./routes/TactInterface\"\r\nimport InterInterface from \"./routes/InterInterface\"\r\nimport Login from \"./routes/Login\"\r\nimport Accueil from \"./routes/Accueil\"\r\nimport PrivateRoute from \"./routes/PrivateRoute\";\r\nimport AdminInterface from \"./routes/AdminInterface\";\r\n\r\n\r\nexport default function App() {\r\n\r\n    const [userConnected,setUserConnected]=useState(null)\r\n\r\n    const handleLogin=(value)=>{\r\n        // console.log(value)\r\n        setUserConnected(value)\r\n    }\r\n\r\n    const handleDisconnectApp=()=>{\r\n      setUserConnected(null)\r\n    }\r\n    // useEffect(()=>{\r\n    //     console.log(userConnected)\r\n    // },[userConnected])\r\n\r\n\r\n\r\n    \r\n\r\n\r\n  return (\r\n    <ThemeProvider theme={MyTheme}>\r\n\r\n    <Router>\r\n      {/* <div style={{\r\n          position:\"absolute\",\r\n          top:250,\r\n          zIndex:50\r\n          }}>\r\n        <nav>\r\n          <ul>\r\n            <li>\r\n              <Link to=\"/tact\">Interface Tact</Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/inter\">Interface Inter</Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/login\">Login</Link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n        </div> */}\r\n        <Switch>\r\n          <PrivateRoute \r\n            userConnected={userConnected}\r\n            path=\"/tact\"\r\n            component={TactInterface }\r\n          />\r\n            <PrivateRoute \r\n            userConnected={userConnected}\r\n            path=\"/inter\"\r\n            component={InterInterface }\r\n          />\r\n          <PrivateRoute path=\"/admin\"\r\n          userConnected={userConnected}\r\n            component={AdminInterface }\r\n          />\r\n       \r\n          <Route path=\"/login\">\r\n            <Login \r\n                userConnected={userConnected}\r\n                handleLogin={handleLogin}\r\n                handleDisconnectApp={handleDisconnectApp}\r\n            />\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <Accueil />\r\n          </Route>\r\n          \r\n          \r\n        </Switch>\r\n      \r\n    </Router>\r\n  </ThemeProvider>\r\n    );\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}